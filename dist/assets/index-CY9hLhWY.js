function D1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function L1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d_={exports:{}},mu={},f_={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),M1=Symbol.for("react.portal"),j1=Symbol.for("react.fragment"),O1=Symbol.for("react.strict_mode"),F1=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),B1=Symbol.for("react.context"),$1=Symbol.for("react.forward_ref"),z1=Symbol.for("react.suspense"),W1=Symbol.for("react.memo"),H1=Symbol.for("react.lazy"),_g=Symbol.iterator;function q1(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var p_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m_=Object.assign,g_={};function us(t,e,n){this.props=t,this.context=e,this.refs=g_,this.updater=n||p_}us.prototype.isReactComponent={};us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y_(){}y_.prototype=us.prototype;function ef(t,e,n){this.props=t,this.context=e,this.refs=g_,this.updater=n||p_}var tf=ef.prototype=new y_;tf.constructor=ef;m_(tf,us.prototype);tf.isPureReactComponent=!0;var wg=Array.isArray,v_=Object.prototype.hasOwnProperty,nf={current:null},__={key:!0,ref:!0,__self:!0,__source:!0};function w_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)v_.call(e,r)&&!__.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xo,type:t,key:s,ref:o,props:i,_owner:nf.current}}function K1(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function G1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eg=/\/+/g;function _c(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G1(""+t.key):e.toString(36)}function sl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xo:case M1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+_c(o,0):r,wg(i)?(n="",t!=null&&(n=t.replace(Eg,"$&/")+"/"),sl(i,e,n,"",function(c){return c})):i!=null&&(rf(i)&&(i=K1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Eg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+_c(s,a);o+=sl(s,e,n,u,i)}else if(u=q1(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+_c(s,a++),o+=sl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Na(t,e,n){if(t==null)return t;var r=[],i=0;return sl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Q1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},ol={transition:null},Y1={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:ol,ReactCurrentOwner:nf};function E_(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:Na,forEach:function(t,e,n){Na(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Na(t,function(){e++}),e},toArray:function(t){return Na(t,function(e){return e})||[]},only:function(t){if(!rf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=us;J.Fragment=j1;J.Profiler=F1;J.PureComponent=ef;J.StrictMode=O1;J.Suspense=z1;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1;J.act=E_;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=nf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)v_.call(e,u)&&!__.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xo,type:t.type,key:i,ref:s,props:r,_owner:o}};J.createContext=function(t){return t={$$typeof:B1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:U1,_context:t},t.Consumer=t};J.createElement=w_;J.createFactory=function(t){var e=w_.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:$1,render:t}};J.isValidElement=rf;J.lazy=function(t){return{$$typeof:H1,_payload:{_status:-1,_result:t},_init:Q1}};J.memo=function(t,e){return{$$typeof:W1,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=ol.transition;ol.transition={};try{t()}finally{ol.transition=e}};J.unstable_act=E_;J.useCallback=function(t,e){return mt.current.useCallback(t,e)};J.useContext=function(t){return mt.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};J.useEffect=function(t,e){return mt.current.useEffect(t,e)};J.useId=function(){return mt.current.useId()};J.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return mt.current.useMemo(t,e)};J.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};J.useRef=function(t){return mt.current.useRef(t)};J.useState=function(t){return mt.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return mt.current.useTransition()};J.version="18.3.1";f_.exports=J;var k=f_.exports;const T_=L1(k),X1=D1({__proto__:null,default:T_},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1=k,Z1=Symbol.for("react.element"),eA=Symbol.for("react.fragment"),tA=Object.prototype.hasOwnProperty,nA=J1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rA={key:!0,ref:!0,__self:!0,__source:!0};function S_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tA.call(e,r)&&!rA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Z1,type:t,key:s,ref:o,props:i,_owner:nA.current}}mu.Fragment=eA;mu.jsx=S_;mu.jsxs=S_;d_.exports=mu;var p=d_.exports,_h={},x_={exports:{}},Vt={},A_={exports:{}},I_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var Q=$.length;$.push(G);e:for(;0<Q;){var _e=Q-1>>>1,le=$[_e];if(0<i(le,G))$[_e]=G,$[Q]=le,Q=_e;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],Q=$.pop();if(Q!==G){$[0]=Q;e:for(var _e=0,le=$.length,Re=le>>>1;_e<Re;){var fn=2*(_e+1)-1,pn=$[fn],mn=fn+1,gn=$[mn];if(0>i(pn,Q))mn<le&&0>i(gn,pn)?($[_e]=gn,$[mn]=Q,_e=mn):($[_e]=pn,$[fn]=Q,_e=fn);else if(mn<le&&0>i(gn,Q))$[_e]=gn,$[mn]=Q,_e=mn;else break e}}return G}function i($,G){var Q=$.sortIndex-G.sortIndex;return Q!==0?Q:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,m=3,_=!1,S=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=$)r(c),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(c)}}function N($){if(I=!1,w($),!S)if(n(u)!==null)S=!0,oi(V);else{var G=n(c);G!==null&&de(N,G.startTime-$)}}function V($,G){S=!1,I&&(I=!1,E(y),y=-1),_=!0;var Q=m;try{for(w(G),f=n(u);f!==null&&(!(f.expirationTime>G)||$&&!b());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,m=f.priorityLevel;var le=_e(f.expirationTime<=G);G=t.unstable_now(),typeof le=="function"?f.callback=le:f===n(u)&&r(u),w(G)}else r(u);f=n(u)}if(f!==null)var Re=!0;else{var fn=n(c);fn!==null&&de(N,fn.startTime-G),Re=!1}return Re}finally{f=null,m=Q,_=!1}}var j=!1,x=null,y=-1,A=5,C=-1;function b(){return!(t.unstable_now()-C<A)}function D(){if(x!==null){var $=t.unstable_now();C=$;var G=!0;try{G=x(!0,$)}finally{G?R():(j=!1,x=null)}}else j=!1}var R;if(typeof v=="function")R=function(){v(D)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Wt=he.port2;he.port1.onmessage=D,R=function(){Wt.postMessage(null)}}else R=function(){P(D,0)};function oi($){x=$,j||(j=!0,R())}function de($,G){y=P(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||_||(S=!0,oi(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Q=m;m=G;try{return $()}finally{m=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=m;m=$;try{return G()}finally{m=Q}},t.unstable_scheduleCallback=function($,G,Q){var _e=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?_e+Q:_e):Q=_e,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Q+le,$={id:h++,callback:G,priorityLevel:$,startTime:Q,expirationTime:le,sortIndex:-1},Q>_e?($.sortIndex=Q,e(c,$),n(u)===null&&$===n(c)&&(I?(E(y),y=-1):I=!0,de(N,Q-_e))):($.sortIndex=le,e(u,$),S||_||(S=!0,oi(V))),$},t.unstable_shouldYield=b,t.unstable_wrapCallback=function($){var G=m;return function(){var Q=m;m=G;try{return $.apply(this,arguments)}finally{m=Q}}}})(I_);A_.exports=I_;var iA=A_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=k,Nt=iA;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C_=new Set,wo={};function ni(t,e){Hi(t,e),Hi(t+"Capture",e)}function Hi(t,e){for(wo[t]=e,t=0;t<e.length;t++)C_.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,oA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tg={},Sg={};function aA(t){return wh.call(Sg,t)?!0:wh.call(Tg,t)?!1:oA.test(t)?Sg[t]=!0:(Tg[t]=!0,!1)}function lA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uA(t,e,n,r){if(e===null||typeof e>"u"||lA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sf=/[\-:]([a-z])/g;function of(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sf,of);Xe[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sf,of);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sf,of);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function af(t,e,n,r){var i=Xe.hasOwnProperty(e)?Xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uA(e,n,i,r)&&(n=null),r||i===null?aA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=sA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),lf=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),P_=Symbol.for("react.provider"),R_=Symbol.for("react.context"),uf=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Sh=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),k_=Symbol.for("react.offscreen"),xg=Symbol.iterator;function Vs(t){return t===null||typeof t!="object"?null:(t=xg&&t[xg]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,wc;function zs(t){if(wc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wc=e&&e[1]||""}return`
`+wc+t}var Ec=!1;function Tc(t,e){if(!t||Ec)return"";Ec=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Ec=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zs(t):""}function cA(t){switch(t.tag){case 5:return zs(t.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return t=Tc(t.type,!1),t;case 11:return t=Tc(t.type.render,!1),t;case 1:return t=Tc(t.type,!0),t;default:return""}}function xh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case Eh:return"Profiler";case lf:return"StrictMode";case Th:return"Suspense";case Sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R_:return(t.displayName||"Context")+".Consumer";case P_:return(t._context.displayName||"Context")+".Provider";case uf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cf:return e=t.displayName||null,e!==null?e:xh(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return xh(t(e))}catch{}}return null}function hA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xh(e);case 8:return e===lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dA(t){var e=N_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=dA(t))}function b_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ah(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ag(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function V_(t,e){e=e.checked,e!=null&&af(t,"checked",e,!1)}function Ih(t,e){V_(t,e);var n=dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ch(t,e.type,dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ig(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ch(t,e,n){(e!=="number"||Il(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ws=Array.isArray;function Di(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ws(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dr(n)}}function D_(t,e){var n=dr(e.value),r=dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function L_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?L_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,M_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fA=["Webkit","ms","Moz","O"];Object.keys(eo).forEach(function(t){fA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eo[e]=eo[t]})});function j_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eo.hasOwnProperty(t)&&eo[t]?(""+e).trim():e+"px"}function O_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=j_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pA=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kh(t,e){if(e){if(pA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=null;function hf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vh=null,Li=null,Mi=null;function Rg(t){if(t=ea(t)){if(typeof Vh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=wu(e),Vh(t.stateNode,t.type,e))}}function F_(t){Li?Mi?Mi.push(t):Mi=[t]:Li=t}function U_(){if(Li){var t=Li,e=Mi;if(Mi=Li=null,Rg(t),e)for(t=0;t<e.length;t++)Rg(e[t])}}function B_(t,e){return t(e)}function $_(){}var Sc=!1;function z_(t,e,n){if(Sc)return t(e,n);Sc=!0;try{return B_(t,e,n)}finally{Sc=!1,(Li!==null||Mi!==null)&&($_(),U_())}}function To(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Dh=!1;if(Cn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Dh=!1}function mA(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var to=!1,Cl=null,Pl=!1,Lh=null,gA={onError:function(t){to=!0,Cl=t}};function yA(t,e,n,r,i,s,o,a,u){to=!1,Cl=null,mA.apply(gA,arguments)}function vA(t,e,n,r,i,s,o,a,u){if(yA.apply(this,arguments),to){if(to){var c=Cl;to=!1,Cl=null}else throw Error(F(198));Pl||(Pl=!0,Lh=c)}}function ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kg(t){if(ri(t)!==t)throw Error(F(188))}function _A(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return kg(i),t;if(s===r)return kg(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function H_(t){return t=_A(t),t!==null?q_(t):null}function q_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q_(t);if(e!==null)return e;t=t.sibling}return null}var K_=Nt.unstable_scheduleCallback,Ng=Nt.unstable_cancelCallback,wA=Nt.unstable_shouldYield,EA=Nt.unstable_requestPaint,be=Nt.unstable_now,TA=Nt.unstable_getCurrentPriorityLevel,df=Nt.unstable_ImmediatePriority,G_=Nt.unstable_UserBlockingPriority,Rl=Nt.unstable_NormalPriority,SA=Nt.unstable_LowPriority,Q_=Nt.unstable_IdlePriority,gu=null,an=null;function xA(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:CA,AA=Math.log,IA=Math.LN2;function CA(t){return t>>>=0,t===0?32:31-(AA(t)/IA|0)|0}var La=64,Ma=4194304;function Hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hs(a):(s&=o,s!==0&&(r=Hs(s)))}else o=n&~i,o!==0?r=Hs(o):s!==0&&(r=Hs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xt(e),i=1<<n,r|=t[n],e&=~i;return r}function PA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xt(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=PA(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Y_(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function xc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xt(e),t[e]=n}function kA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function X_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J_,pf,Z_,ew,tw,jh=!1,ja=[],er=null,tr=null,nr=null,So=new Map,xo=new Map,qn=[],NA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bg(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":So.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(e.pointerId)}}function Ls(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ea(e),e!==null&&pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bA(t,e,n,r,i){switch(e){case"focusin":return er=Ls(er,t,e,n,r,i),!0;case"dragenter":return tr=Ls(tr,t,e,n,r,i),!0;case"mouseover":return nr=Ls(nr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return So.set(s,Ls(So.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xo.set(s,Ls(xo.get(s)||null,t,e,n,r,i)),!0}return!1}function nw(t){var e=Mr(t.target);if(e!==null){var n=ri(e);if(n!==null){if(e=n.tag,e===13){if(e=W_(n),e!==null){t.blockedOn=e,tw(t.priority,function(){Z_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bh=r,n.target.dispatchEvent(r),bh=null}else return e=ea(n),e!==null&&pf(e),t.blockedOn=n,!1;e.shift()}return!0}function Vg(t,e,n){al(t)&&n.delete(e)}function VA(){jh=!1,er!==null&&al(er)&&(er=null),tr!==null&&al(tr)&&(tr=null),nr!==null&&al(nr)&&(nr=null),So.forEach(Vg),xo.forEach(Vg)}function Ms(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,VA)))}function Ao(t){function e(i){return Ms(i,t)}if(0<ja.length){Ms(ja[0],t);for(var n=1;n<ja.length;n++){var r=ja[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&Ms(er,t),tr!==null&&Ms(tr,t),nr!==null&&Ms(nr,t),So.forEach(e),xo.forEach(e),n=0;n<qn.length;n++)r=qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qn.length&&(n=qn[0],n.blockedOn===null);)nw(n),n.blockedOn===null&&qn.shift()}var ji=Dn.ReactCurrentBatchConfig,Nl=!0;function DA(t,e,n,r){var i=ae,s=ji.transition;ji.transition=null;try{ae=1,mf(t,e,n,r)}finally{ae=i,ji.transition=s}}function LA(t,e,n,r){var i=ae,s=ji.transition;ji.transition=null;try{ae=4,mf(t,e,n,r)}finally{ae=i,ji.transition=s}}function mf(t,e,n,r){if(Nl){var i=Oh(t,e,n,r);if(i===null)Dc(t,e,r,bl,n),bg(t,r);else if(bA(i,t,e,n,r))r.stopPropagation();else if(bg(t,r),e&4&&-1<NA.indexOf(t)){for(;i!==null;){var s=ea(i);if(s!==null&&J_(s),s=Oh(t,e,n,r),s===null&&Dc(t,e,r,bl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dc(t,e,r,null,n)}}var bl=null;function Oh(t,e,n,r){if(bl=null,t=hf(r),t=Mr(t),t!==null)if(e=ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bl=t,null}function rw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TA()){case df:return 1;case G_:return 4;case Rl:case SA:return 16;case Q_:return 536870912;default:return 16}default:return 16}}var Gn=null,gf=null,ll=null;function iw(){if(ll)return ll;var t,e=gf,n=e.length,r,i="value"in Gn?Gn.value:Gn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ll=i.slice(t,1<r?1-r:void 0)}function ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function Dg(){return!1}function Dt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oa:Dg,this.isPropagationStopped=Dg,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yf=Dt(cs),Zo=xe({},cs,{view:0,detail:0}),MA=Dt(Zo),Ac,Ic,js,yu=xe({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==js&&(js&&t.type==="mousemove"?(Ac=t.screenX-js.screenX,Ic=t.screenY-js.screenY):Ic=Ac=0,js=t),Ac)},movementY:function(t){return"movementY"in t?t.movementY:Ic}}),Lg=Dt(yu),jA=xe({},yu,{dataTransfer:0}),OA=Dt(jA),FA=xe({},Zo,{relatedTarget:0}),Cc=Dt(FA),UA=xe({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),BA=Dt(UA),$A=xe({},cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zA=Dt($A),WA=xe({},cs,{data:0}),Mg=Dt(WA),HA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KA[t])?!!e[t]:!1}function vf(){return GA}var QA=xe({},Zo,{key:function(t){if(t.key){var e=HA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vf,charCode:function(t){return t.type==="keypress"?ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YA=Dt(QA),XA=xe({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jg=Dt(XA),JA=xe({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vf}),ZA=Dt(JA),eI=xe({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tI=Dt(eI),nI=xe({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rI=Dt(nI),iI=[9,13,27,32],_f=Cn&&"CompositionEvent"in window,no=null;Cn&&"documentMode"in document&&(no=document.documentMode);var sI=Cn&&"TextEvent"in window&&!no,sw=Cn&&(!_f||no&&8<no&&11>=no),Og=" ",Fg=!1;function ow(t,e){switch(t){case"keyup":return iI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _i=!1;function oI(t,e){switch(t){case"compositionend":return aw(e);case"keypress":return e.which!==32?null:(Fg=!0,Og);case"textInput":return t=e.data,t===Og&&Fg?null:t;default:return null}}function aI(t,e){if(_i)return t==="compositionend"||!_f&&ow(t,e)?(t=iw(),ll=gf=Gn=null,_i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sw&&e.locale!=="ko"?null:e.data;default:return null}}var lI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lI[t.type]:e==="textarea"}function lw(t,e,n,r){F_(r),e=Vl(e,"onChange"),0<e.length&&(n=new yf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ro=null,Io=null;function uI(t){_w(t,0)}function vu(t){var e=Ti(t);if(b_(e))return t}function cI(t,e){if(t==="change")return e}var uw=!1;if(Cn){var Pc;if(Cn){var Rc="oninput"in document;if(!Rc){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),Rc=typeof Bg.oninput=="function"}Pc=Rc}else Pc=!1;uw=Pc&&(!document.documentMode||9<document.documentMode)}function $g(){ro&&(ro.detachEvent("onpropertychange",cw),Io=ro=null)}function cw(t){if(t.propertyName==="value"&&vu(Io)){var e=[];lw(e,Io,t,hf(t)),z_(uI,e)}}function hI(t,e,n){t==="focusin"?($g(),ro=e,Io=n,ro.attachEvent("onpropertychange",cw)):t==="focusout"&&$g()}function dI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Io)}function fI(t,e){if(t==="click")return vu(e)}function pI(t,e){if(t==="input"||t==="change")return vu(e)}function mI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:mI;function Co(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wh.call(e,i)||!Zt(t[i],e[i]))return!1}return!0}function zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,e){var n=zg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zg(n)}}function hw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dw(){for(var t=window,e=Il();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Il(t.document)}return e}function wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gI(t){var e=dw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hw(n.ownerDocument.documentElement,n)){if(r!==null&&wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Wg(n,s);var o=Wg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yI=Cn&&"documentMode"in document&&11>=document.documentMode,wi=null,Fh=null,io=null,Uh=!1;function Hg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||wi==null||wi!==Il(r)||(r=wi,"selectionStart"in r&&wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&Co(io,r)||(io=r,r=Vl(Fh,"onSelect"),0<r.length&&(e=new yf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wi)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ei={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},kc={},fw={};Cn&&(fw=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function _u(t){if(kc[t])return kc[t];if(!Ei[t])return t;var e=Ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fw)return kc[t]=e[n];return t}var pw=_u("animationend"),mw=_u("animationiteration"),gw=_u("animationstart"),yw=_u("transitionend"),vw=new Map,qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(t,e){vw.set(t,e),ni(e,[t])}for(var Nc=0;Nc<qg.length;Nc++){var bc=qg[Nc],vI=bc.toLowerCase(),_I=bc[0].toUpperCase()+bc.slice(1);wr(vI,"on"+_I)}wr(pw,"onAnimationEnd");wr(mw,"onAnimationIteration");wr(gw,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(yw,"onTransitionEnd");Hi("onMouseEnter",["mouseout","mouseover"]);Hi("onMouseLeave",["mouseout","mouseover"]);Hi("onPointerEnter",["pointerout","pointerover"]);Hi("onPointerLeave",["pointerout","pointerover"]);ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wI=new Set("cancel close invalid load scroll toggle".split(" ").concat(qs));function Kg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vA(r,e,void 0,t),t.currentTarget=null}function _w(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Kg(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Kg(i,a,c),s=u}}}if(Pl)throw t=Lh,Pl=!1,Lh=null,t}function pe(t,e){var n=e[Hh];n===void 0&&(n=e[Hh]=new Set);var r=t+"__bubble";n.has(r)||(ww(e,t,2,!1),n.add(r))}function Vc(t,e,n){var r=0;e&&(r|=4),ww(n,t,r,e)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[Ua]){t[Ua]=!0,C_.forEach(function(n){n!=="selectionchange"&&(wI.has(n)||Vc(n,!1,t),Vc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ua]||(e[Ua]=!0,Vc("selectionchange",!1,e))}}function ww(t,e,n,r){switch(rw(e)){case 1:var i=DA;break;case 4:i=LA;break;default:i=mf}n=i.bind(null,e,n,t),i=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Mr(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}z_(function(){var c=s,h=hf(n),f=[];e:{var m=vw.get(t);if(m!==void 0){var _=yf,S=t;switch(t){case"keypress":if(ul(n)===0)break e;case"keydown":case"keyup":_=YA;break;case"focusin":S="focus",_=Cc;break;case"focusout":S="blur",_=Cc;break;case"beforeblur":case"afterblur":_=Cc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=OA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=ZA;break;case pw:case mw:case gw:_=BA;break;case yw:_=tI;break;case"scroll":_=MA;break;case"wheel":_=rI;break;case"copy":case"cut":case"paste":_=zA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=jg}var I=(e&4)!==0,P=!I&&t==="scroll",E=I?m!==null?m+"Capture":null:m;I=[];for(var v=c,w;v!==null;){w=v;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,E!==null&&(N=To(v,E),N!=null&&I.push(Ro(v,N,w)))),P)break;v=v.return}0<I.length&&(m=new _(m,S,null,n,h),f.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==bh&&(S=n.relatedTarget||n.fromElement)&&(Mr(S)||S[Pn]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(S=n.relatedTarget||n.toElement,_=c,S=S?Mr(S):null,S!==null&&(P=ri(S),S!==P||S.tag!==5&&S.tag!==6)&&(S=null)):(_=null,S=c),_!==S)){if(I=Lg,N="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(I=jg,N="onPointerLeave",E="onPointerEnter",v="pointer"),P=_==null?m:Ti(_),w=S==null?m:Ti(S),m=new I(N,v+"leave",_,n,h),m.target=P,m.relatedTarget=w,N=null,Mr(h)===c&&(I=new I(E,v+"enter",S,n,h),I.target=w,I.relatedTarget=P,N=I),P=N,_&&S)t:{for(I=_,E=S,v=0,w=I;w;w=hi(w))v++;for(w=0,N=E;N;N=hi(N))w++;for(;0<v-w;)I=hi(I),v--;for(;0<w-v;)E=hi(E),w--;for(;v--;){if(I===E||E!==null&&I===E.alternate)break t;I=hi(I),E=hi(E)}I=null}else I=null;_!==null&&Gg(f,m,_,I,!1),S!==null&&P!==null&&Gg(f,P,S,I,!0)}}e:{if(m=c?Ti(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var V=cI;else if(Ug(m))if(uw)V=pI;else{V=dI;var j=hI}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=fI);if(V&&(V=V(t,c))){lw(f,V,n,h);break e}j&&j(t,m,c),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Ch(m,"number",m.value)}switch(j=c?Ti(c):window,t){case"focusin":(Ug(j)||j.contentEditable==="true")&&(wi=j,Fh=c,io=null);break;case"focusout":io=Fh=wi=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,Hg(f,n,h);break;case"selectionchange":if(yI)break;case"keydown":case"keyup":Hg(f,n,h)}var x;if(_f)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else _i?ow(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(sw&&n.locale!=="ko"&&(_i||y!=="onCompositionStart"?y==="onCompositionEnd"&&_i&&(x=iw()):(Gn=h,gf="value"in Gn?Gn.value:Gn.textContent,_i=!0)),j=Vl(c,y),0<j.length&&(y=new Mg(y,t,null,n,h),f.push({event:y,listeners:j}),x?y.data=x:(x=aw(n),x!==null&&(y.data=x)))),(x=sI?oI(t,n):aI(t,n))&&(c=Vl(c,"onBeforeInput"),0<c.length&&(h=new Mg("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=x))}_w(f,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=To(t,n),s!=null&&r.unshift(Ro(t,s,i)),s=To(t,e),s!=null&&r.push(Ro(t,s,i))),t=t.return}return r}function hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=To(n,s),u!=null&&o.unshift(Ro(n,u,a))):i||(u=To(n,s),u!=null&&o.push(Ro(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EI=/\r\n?/g,TI=/\u0000|\uFFFD/g;function Qg(t){return(typeof t=="string"?t:""+t).replace(EI,`
`).replace(TI,"")}function Ba(t,e,n){if(e=Qg(e),Qg(t)!==e&&n)throw Error(F(425))}function Dl(){}var Bh=null,$h=null;function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,xI=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(t){return Yg.resolve(null).then(t).catch(AI)}:Wh;function AI(t){setTimeout(function(){throw t})}function Lc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ao(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hs=Math.random().toString(36).slice(2),sn="__reactFiber$"+hs,ko="__reactProps$"+hs,Pn="__reactContainer$"+hs,Hh="__reactEvents$"+hs,II="__reactListeners$"+hs,CI="__reactHandles$"+hs;function Mr(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pn]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[sn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function ea(t){return t=t[sn]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function wu(t){return t[ko]||null}var qh=[],Si=-1;function Er(t){return{current:t}}function ge(t){0>Si||(t.current=qh[Si],qh[Si]=null,Si--)}function ce(t,e){Si++,qh[Si]=t.current,t.current=e}var fr={},ct=Er(fr),Et=Er(!1),Gr=fr;function qi(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function Ll(){ge(Et),ge(ct)}function Jg(t,e,n){if(ct.current!==fr)throw Error(F(168));ce(ct,e),ce(Et,n)}function Ew(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,hA(t)||"Unknown",i));return xe({},n,r)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,Gr=ct.current,ce(ct,t),ce(Et,Et.current),!0}function Zg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Ew(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,ge(Et),ge(ct),ce(ct,t)):ge(Et),ce(Et,n)}var wn=null,Eu=!1,Mc=!1;function Tw(t){wn===null?wn=[t]:wn.push(t)}function PI(t){Eu=!0,Tw(t)}function Tr(){if(!Mc&&wn!==null){Mc=!0;var t=0,e=ae;try{var n=wn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,Eu=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),K_(df,Tr),i}finally{ae=e,Mc=!1}}return null}var xi=[],Ai=0,jl=null,Ol=0,jt=[],Ot=0,Qr=null,Tn=1,Sn="";function br(t,e){xi[Ai++]=Ol,xi[Ai++]=jl,jl=t,Ol=e}function Sw(t,e,n){jt[Ot++]=Tn,jt[Ot++]=Sn,jt[Ot++]=Qr,Qr=t;var r=Tn;t=Sn;var i=32-Xt(r)-1;r&=~(1<<i),n+=1;var s=32-Xt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tn=1<<32-Xt(e)+i|n<<i|r,Sn=s+t}else Tn=1<<s|n<<i|r,Sn=t}function Ef(t){t.return!==null&&(br(t,1),Sw(t,1,0))}function Tf(t){for(;t===jl;)jl=xi[--Ai],xi[Ai]=null,Ol=xi[--Ai],xi[Ai]=null;for(;t===Qr;)Qr=jt[--Ot],jt[Ot]=null,Sn=jt[--Ot],jt[Ot]=null,Tn=jt[--Ot],jt[Ot]=null}var Rt=null,Pt=null,ve=!1,Yt=null;function xw(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Pt=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qr!==null?{id:Tn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Pt=null,!0):!1;default:return!1}}function Kh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gh(t){if(ve){var e=Pt;if(e){var n=e;if(!ey(t,e)){if(Kh(t))throw Error(F(418));e=rr(n.nextSibling);var r=Rt;e&&ey(t,e)?xw(r,n):(t.flags=t.flags&-4097|2,ve=!1,Rt=t)}}else{if(Kh(t))throw Error(F(418));t.flags=t.flags&-4097|2,ve=!1,Rt=t}}}function ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function $a(t){if(t!==Rt)return!1;if(!ve)return ty(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zh(t.type,t.memoizedProps)),e&&(e=Pt)){if(Kh(t))throw Aw(),Error(F(418));for(;e;)xw(t,e),e=rr(e.nextSibling)}if(ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Rt?rr(t.stateNode.nextSibling):null;return!0}function Aw(){for(var t=Pt;t;)t=rr(t.nextSibling)}function Ki(){Pt=Rt=null,ve=!1}function Sf(t){Yt===null?Yt=[t]:Yt.push(t)}var RI=Dn.ReactCurrentBatchConfig;function Os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function za(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ny(t){var e=t._init;return e(t._payload)}function Iw(t){function e(E,v){if(t){var w=E.deletions;w===null?(E.deletions=[v],E.flags|=16):w.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=ar(E,v),E.index=0,E.sibling=null,E}function s(E,v,w){return E.index=w,t?(w=E.alternate,w!==null?(w=w.index,w<v?(E.flags|=2,v):w):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,w,N){return v===null||v.tag!==6?(v=zc(w,E.mode,N),v.return=E,v):(v=i(v,w),v.return=E,v)}function u(E,v,w,N){var V=w.type;return V===vi?h(E,v,w.props.children,N,w.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Wn&&ny(V)===v.type)?(N=i(v,w.props),N.ref=Os(E,v,w),N.return=E,N):(N=gl(w.type,w.key,w.props,null,E.mode,N),N.ref=Os(E,v,w),N.return=E,N)}function c(E,v,w,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Wc(w,E.mode,N),v.return=E,v):(v=i(v,w.children||[]),v.return=E,v)}function h(E,v,w,N,V){return v===null||v.tag!==7?(v=zr(w,E.mode,N,V),v.return=E,v):(v=i(v,w),v.return=E,v)}function f(E,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zc(""+v,E.mode,w),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ba:return w=gl(v.type,v.key,v.props,null,E.mode,w),w.ref=Os(E,null,v),w.return=E,w;case yi:return v=Wc(v,E.mode,w),v.return=E,v;case Wn:var N=v._init;return f(E,N(v._payload),w)}if(Ws(v)||Vs(v))return v=zr(v,E.mode,w,null),v.return=E,v;za(E,v)}return null}function m(E,v,w,N){var V=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:a(E,v,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ba:return w.key===V?u(E,v,w,N):null;case yi:return w.key===V?c(E,v,w,N):null;case Wn:return V=w._init,m(E,v,V(w._payload),N)}if(Ws(w)||Vs(w))return V!==null?null:h(E,v,w,N,null);za(E,w)}return null}function _(E,v,w,N,V){if(typeof N=="string"&&N!==""||typeof N=="number")return E=E.get(w)||null,a(v,E,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ba:return E=E.get(N.key===null?w:N.key)||null,u(v,E,N,V);case yi:return E=E.get(N.key===null?w:N.key)||null,c(v,E,N,V);case Wn:var j=N._init;return _(E,v,w,j(N._payload),V)}if(Ws(N)||Vs(N))return E=E.get(w)||null,h(v,E,N,V,null);za(v,N)}return null}function S(E,v,w,N){for(var V=null,j=null,x=v,y=v=0,A=null;x!==null&&y<w.length;y++){x.index>y?(A=x,x=null):A=x.sibling;var C=m(E,x,w[y],N);if(C===null){x===null&&(x=A);break}t&&x&&C.alternate===null&&e(E,x),v=s(C,v,y),j===null?V=C:j.sibling=C,j=C,x=A}if(y===w.length)return n(E,x),ve&&br(E,y),V;if(x===null){for(;y<w.length;y++)x=f(E,w[y],N),x!==null&&(v=s(x,v,y),j===null?V=x:j.sibling=x,j=x);return ve&&br(E,y),V}for(x=r(E,x);y<w.length;y++)A=_(x,E,y,w[y],N),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?y:A.key),v=s(A,v,y),j===null?V=A:j.sibling=A,j=A);return t&&x.forEach(function(b){return e(E,b)}),ve&&br(E,y),V}function I(E,v,w,N){var V=Vs(w);if(typeof V!="function")throw Error(F(150));if(w=V.call(w),w==null)throw Error(F(151));for(var j=V=null,x=v,y=v=0,A=null,C=w.next();x!==null&&!C.done;y++,C=w.next()){x.index>y?(A=x,x=null):A=x.sibling;var b=m(E,x,C.value,N);if(b===null){x===null&&(x=A);break}t&&x&&b.alternate===null&&e(E,x),v=s(b,v,y),j===null?V=b:j.sibling=b,j=b,x=A}if(C.done)return n(E,x),ve&&br(E,y),V;if(x===null){for(;!C.done;y++,C=w.next())C=f(E,C.value,N),C!==null&&(v=s(C,v,y),j===null?V=C:j.sibling=C,j=C);return ve&&br(E,y),V}for(x=r(E,x);!C.done;y++,C=w.next())C=_(x,E,y,C.value,N),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?y:C.key),v=s(C,v,y),j===null?V=C:j.sibling=C,j=C);return t&&x.forEach(function(D){return e(E,D)}),ve&&br(E,y),V}function P(E,v,w,N){if(typeof w=="object"&&w!==null&&w.type===vi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ba:e:{for(var V=w.key,j=v;j!==null;){if(j.key===V){if(V=w.type,V===vi){if(j.tag===7){n(E,j.sibling),v=i(j,w.props.children),v.return=E,E=v;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Wn&&ny(V)===j.type){n(E,j.sibling),v=i(j,w.props),v.ref=Os(E,j,w),v.return=E,E=v;break e}n(E,j);break}else e(E,j);j=j.sibling}w.type===vi?(v=zr(w.props.children,E.mode,N,w.key),v.return=E,E=v):(N=gl(w.type,w.key,w.props,null,E.mode,N),N.ref=Os(E,v,w),N.return=E,E=N)}return o(E);case yi:e:{for(j=w.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(E,v.sibling),v=i(v,w.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Wc(w,E.mode,N),v.return=E,E=v}return o(E);case Wn:return j=w._init,P(E,v,j(w._payload),N)}if(Ws(w))return S(E,v,w,N);if(Vs(w))return I(E,v,w,N);za(E,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,w),v.return=E,E=v):(n(E,v),v=zc(w,E.mode,N),v.return=E,E=v),o(E)):n(E,v)}return P}var Gi=Iw(!0),Cw=Iw(!1),Fl=Er(null),Ul=null,Ii=null,xf=null;function Af(){xf=Ii=Ul=null}function If(t){var e=Fl.current;ge(Fl),t._currentValue=e}function Qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oi(t,e){Ul=t,xf=Ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Bt(t){var e=t._currentValue;if(xf!==t)if(t={context:t,memoizedValue:e,next:null},Ii===null){if(Ul===null)throw Error(F(308));Ii=t,Ul.dependencies={lanes:0,firstContext:t}}else Ii=Ii.next=t;return e}var jr=null;function Cf(t){jr===null?jr=[t]:jr.push(t)}function Pw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Cf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hn=!1;function Pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,Cf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ff(t,n)}}function ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bl(t,e,n,r){var i=t.updateQueue;Hn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,a=s;do{var m=a.lane,_=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,I=a;switch(m=e,_=n,I.tag){case 1:if(S=I.payload,typeof S=="function"){f=S.call(_,f,m);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=I.payload,m=typeof S=="function"?S.call(_,f,m):S,m==null)break e;f=xe({},f,m);break e;case 2:Hn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else _={eventTime:_,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,u=f):h=h.next=_,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=f}}function iy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var ta={},ln=Er(ta),No=Er(ta),bo=Er(ta);function Or(t){if(t===ta)throw Error(F(174));return t}function Rf(t,e){switch(ce(bo,e),ce(No,t),ce(ln,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rh(e,t)}ge(ln),ce(ln,e)}function Qi(){ge(ln),ge(No),ge(bo)}function kw(t){Or(bo.current);var e=Or(ln.current),n=Rh(e,t.type);e!==n&&(ce(No,t),ce(ln,n))}function kf(t){No.current===t&&(ge(ln),ge(No))}var we=Er(0);function $l(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jc=[];function Nf(){for(var t=0;t<jc.length;t++)jc[t]._workInProgressVersionPrimary=null;jc.length=0}var hl=Dn.ReactCurrentDispatcher,Oc=Dn.ReactCurrentBatchConfig,Yr=0,Se=null,Oe=null,$e=null,zl=!1,so=!1,Vo=0,kI=0;function nt(){throw Error(F(321))}function bf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function Vf(t,e,n,r,i,s){if(Yr=s,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hl.current=t===null||t.memoizedState===null?DI:LI,t=n(r,i),so){s=0;do{if(so=!1,Vo=0,25<=s)throw Error(F(301));s+=1,$e=Oe=null,e.updateQueue=null,hl.current=MI,t=n(r,i)}while(so)}if(hl.current=Wl,e=Oe!==null&&Oe.next!==null,Yr=0,$e=Oe=Se=null,zl=!1,e)throw Error(F(300));return t}function Df(){var t=Vo!==0;return Vo=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Se.memoizedState=$e=t:$e=$e.next=t,$e}function $t(){if(Oe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=$e===null?Se.memoizedState:$e.next;if(e!==null)$e=e,Oe=t;else{if(t===null)throw Error(F(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},$e===null?Se.memoizedState=$e=t:$e=$e.next=t}return $e}function Do(t,e){return typeof e=="function"?e(t):e}function Fc(t){var e=$t(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Oe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Yr&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Se.lanes|=h,Xr|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Zt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Se.lanes|=s,Xr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uc(t){var e=$t(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zt(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Nw(){}function bw(t,e){var n=Se,r=$t(),i=e(),s=!Zt(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,Lf(Lw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Lo(9,Dw.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(F(349));Yr&30||Vw(n,e,i)}return i}function Vw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dw(t,e,n,r){e.value=n,e.getSnapshot=r,Mw(e)&&jw(t)}function Lw(t,e,n){return n(function(){Mw(e)&&jw(t)})}function Mw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function jw(t){var e=Rn(t,1);e!==null&&Jt(e,t,1,-1)}function sy(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},e.queue=t,t=t.dispatch=VI.bind(null,Se,t),[e.memoizedState,t]}function Lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ow(){return $t().memoizedState}function dl(t,e,n,r){var i=rn();Se.flags|=t,i.memoizedState=Lo(1|e,n,void 0,r===void 0?null:r)}function Tu(t,e,n,r){var i=$t();r=r===void 0?null:r;var s=void 0;if(Oe!==null){var o=Oe.memoizedState;if(s=o.destroy,r!==null&&bf(r,o.deps)){i.memoizedState=Lo(e,n,s,r);return}}Se.flags|=t,i.memoizedState=Lo(1|e,n,s,r)}function oy(t,e){return dl(8390656,8,t,e)}function Lf(t,e){return Tu(2048,8,t,e)}function Fw(t,e){return Tu(4,2,t,e)}function Uw(t,e){return Tu(4,4,t,e)}function Bw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $w(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4,4,Bw.bind(null,e,t),n)}function Mf(){}function zw(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ww(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hw(t,e,n){return Yr&21?(Zt(n,e)||(n=Y_(),Se.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function NI(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Oc.transition;Oc.transition={};try{t(!1),e()}finally{ae=n,Oc.transition=r}}function qw(){return $t().memoizedState}function bI(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kw(t))Gw(e,n);else if(n=Pw(t,e,n,r),n!==null){var i=pt();Jt(n,t,r,i),Qw(n,e,r)}}function VI(t,e,n){var r=or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kw(t))Gw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zt(a,o)){var u=e.interleaved;u===null?(i.next=i,Cf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Pw(t,e,i,r),n!==null&&(i=pt(),Jt(n,t,r,i),Qw(n,e,r))}}function Kw(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Gw(t,e){so=zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ff(t,n)}}var Wl={readContext:Bt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},DI={readContext:Bt,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:oy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dl(4194308,4,Bw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return dl(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bI.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:Mf,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=NI.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,i=rn();if(ve){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),ze===null)throw Error(F(349));Yr&30||Vw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,oy(Lw.bind(null,r,s,t),[t]),r.flags|=2048,Lo(9,Dw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rn(),e=ze.identifierPrefix;if(ve){var n=Sn,r=Tn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LI={readContext:Bt,useCallback:zw,useContext:Bt,useEffect:Lf,useImperativeHandle:$w,useInsertionEffect:Fw,useLayoutEffect:Uw,useMemo:Ww,useReducer:Fc,useRef:Ow,useState:function(){return Fc(Do)},useDebugValue:Mf,useDeferredValue:function(t){var e=$t();return Hw(e,Oe.memoizedState,t)},useTransition:function(){var t=Fc(Do)[0],e=$t().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:bw,useId:qw,unstable_isNewReconciler:!1},MI={readContext:Bt,useCallback:zw,useContext:Bt,useEffect:Lf,useImperativeHandle:$w,useInsertionEffect:Fw,useLayoutEffect:Uw,useMemo:Ww,useReducer:Uc,useRef:Ow,useState:function(){return Uc(Do)},useDebugValue:Mf,useDeferredValue:function(t){var e=$t();return Oe===null?e.memoizedState=t:Hw(e,Oe.memoizedState,t)},useTransition:function(){var t=Uc(Do)[0],e=$t().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:bw,useId:qw,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Su={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=or(t),s=xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=ir(t,s,i),e!==null&&(Jt(e,t,i,r),cl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=or(t),s=xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ir(t,s,i),e!==null&&(Jt(e,t,i,r),cl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=or(t),i=xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=ir(t,i,r),e!==null&&(Jt(e,t,r,n),cl(e,t,r))}};function ay(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Co(n,r)||!Co(i,s):!0}function Yw(t,e,n){var r=!1,i=fr,s=e.contextType;return typeof s=="object"&&s!==null?s=Bt(s):(i=Tt(e)?Gr:ct.current,r=e.contextTypes,s=(r=r!=null)?qi(t,i):fr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ly(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Su.enqueueReplaceState(e,e.state,null)}function Xh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bt(s):(s=Tt(e)?Gr:ct.current,i.context=qi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Su.enqueueReplaceState(i,i.state,null),Bl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yi(t,e){try{var n="",r=e;do n+=cA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jI=typeof WeakMap=="function"?WeakMap:Map;function Xw(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ql||(ql=!0,ld=r),Jh(t,e)},n}function Jw(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jh(t,e),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XI.bind(null,t,e,n),e.then(t,t))}function cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,ir(n,e,1))),n.lanes|=1),t)}var OI=Dn.ReactCurrentOwner,_t=!1;function ft(t,e,n,r){e.child=t===null?Cw(e,null,n,r):Gi(e,t.child,n,r)}function dy(t,e,n,r,i){n=n.render;var s=e.ref;return Oi(e,i),r=Vf(t,e,n,r,s,i),n=Df(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(ve&&n&&Ef(e),e.flags|=1,ft(t,e,r,i),e.child)}function fy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Zw(t,e,s,r,i)):(t=gl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Co,n(o,r)&&t.ref===e.ref)return kn(t,e,i)}return e.flags|=1,t=ar(s,r),t.ref=e.ref,t.return=e,e.child=t}function Zw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Co(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,kn(t,e,i)}return Zh(t,e,n,r,i)}function eE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Pi,Ct),Ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Pi,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ce(Pi,Ct),Ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ce(Pi,Ct),Ct|=r;return ft(t,e,i,n),e.child}function tE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zh(t,e,n,r,i){var s=Tt(n)?Gr:ct.current;return s=qi(e,s),Oi(e,i),n=Vf(t,e,n,r,s,i),r=Df(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(ve&&r&&Ef(e),e.flags|=1,ft(t,e,n,i),e.child)}function py(t,e,n,r,i){if(Tt(n)){var s=!0;Ml(e)}else s=!1;if(Oi(e,i),e.stateNode===null)fl(t,e),Yw(e,n,r),Xh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bt(c):(c=Tt(n)?Gr:ct.current,c=qi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ly(e,o,r,c),Hn=!1;var m=e.memoizedState;o.state=m,Bl(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Et.current||Hn?(typeof h=="function"&&(Yh(e,n,h,r),u=e.memoizedState),(a=Hn||ay(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gt(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bt(u):(u=Tt(n)?Gr:ct.current,u=qi(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&ly(e,o,r,u),Hn=!1,m=e.memoizedState,o.state=m,Bl(e,r,o,i);var S=e.memoizedState;a!==f||m!==S||Et.current||Hn?(typeof _=="function"&&(Yh(e,n,_,r),S=e.memoizedState),(c=Hn||ay(e,n,c,r,m,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ed(t,e,n,r,s,i)}function ed(t,e,n,r,i,s){tE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zg(e,n,!1),kn(t,e,s);r=e.stateNode,OI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gi(e,t.child,null,s),e.child=Gi(e,null,a,s)):ft(t,e,a,s),e.memoizedState=r.state,i&&Zg(e,n,!0),e.child}function nE(t){var e=t.stateNode;e.pendingContext?Jg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jg(t,e.context,!1),Rf(t,e.containerInfo)}function my(t,e,n,r,i){return Ki(),Sf(i),e.flags|=256,ft(t,e,n,r),e.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(t){return{baseLanes:t,cachePool:null,transitions:null}}function rE(t,e,n){var r=e.pendingProps,i=we.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ce(we,i&1),t===null)return Gh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Iu(o,r,0,null),t=zr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nd(n),e.memoizedState=td,t):jf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return FI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ar(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ar(a,s):(s=zr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?nd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=td,r}return s=t.child,t=s.sibling,r=ar(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jf(t,e){return e=Iu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&Sf(r),Gi(e,t.child,null,n),t=jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bc(Error(F(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Iu({mode:"visible",children:r.children},i,0,null),s=zr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Gi(e,t.child,null,o),e.child.memoizedState=nd(o),e.memoizedState=td,s);if(!(e.mode&1))return Wa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(F(419)),r=Bc(s,r,void 0),Wa(t,e,o,r)}if(a=(o&t.childLanes)!==0,_t||a){if(r=ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(t,i),Jt(r,t,i,-1))}return zf(),r=Bc(Error(F(421))),Wa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=JI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pt=rr(i.nextSibling),Rt=e,ve=!0,Yt=null,t!==null&&(jt[Ot++]=Tn,jt[Ot++]=Sn,jt[Ot++]=Qr,Tn=t.id,Sn=t.overflow,Qr=e),e=jf(e,r.children),e.flags|=4096,e)}function gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qh(t.return,e,n)}function $c(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,n,e);else if(t.tag===19)gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(we,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$l(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$c(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$l(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$c(e,!0,n,null,s);break;case"together":$c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UI(t,e,n){switch(e.tag){case 3:nE(e),Ki();break;case 5:kw(e);break;case 1:Tt(e.type)&&Ml(e);break;case 4:Rf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ce(Fl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?rE(t,e,n):(ce(we,we.current&1),t=kn(t,e,n),t!==null?t.sibling:null);ce(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,eE(t,e,n)}return kn(t,e,n)}var sE,rd,oE,aE;sE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rd=function(){};oE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Or(ln.current);var s=null;switch(n){case"input":i=Ah(t,i),r=Ah(t,r),s=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),s=[];break;case"textarea":i=Ph(t,i),r=Ph(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dl)}kh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&pe("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fs(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BI(t,e,n){var r=e.pendingProps;switch(Tf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Tt(e.type)&&Ll(),rt(e),null;case 3:return r=e.stateNode,Qi(),ge(Et),ge(ct),Nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(hd(Yt),Yt=null))),rd(t,e),rt(e),null;case 5:kf(e);var i=Or(bo.current);if(n=e.type,t!==null&&e.stateNode!=null)oE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return rt(e),null}if(t=Or(ln.current),$a(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sn]=e,r[ko]=s,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(i=0;i<qs.length;i++)pe(qs[i],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Ag(r,s),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pe("invalid",r);break;case"textarea":Cg(r,s),pe("invalid",r)}kh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ba(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ba(r.textContent,a,t),i=["children",""+a]):wo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":Va(r),Ig(r,s,!0);break;case"textarea":Va(r),Pg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Dl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sn]=e,t[ko]=r,sE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nh(n,r),n){case"dialog":pe("cancel",t),pe("close",t),i=r;break;case"iframe":case"object":case"embed":pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<qs.length;i++)pe(qs[i],t);i=r;break;case"source":pe("error",t),i=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),i=r;break;case"details":pe("toggle",t),i=r;break;case"input":Ag(t,r),i=Ah(t,r),pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),pe("invalid",t);break;case"textarea":Cg(t,r),i=Ph(t,r),pe("invalid",t);break;default:i=r}kh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?O_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&M_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Eo(t,u):typeof u=="number"&&Eo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&pe("scroll",t):u!=null&&af(t,s,u,o))}switch(n){case"input":Va(t),Ig(t,r,!1);break;case"textarea":Va(t),Pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Di(t,!!r.multiple,s,!1):r.defaultValue!=null&&Di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)aE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Or(bo.current),Or(ln.current),$a(e)){if(r=e.stateNode,n=e.memoizedProps,r[sn]=e,(s=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sn]=e,e.stateNode=r}return rt(e),null;case 13:if(ge(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&Pt!==null&&e.mode&1&&!(e.flags&128))Aw(),Ki(),e.flags|=98560,s=!1;else if(s=$a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[sn]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),s=!1}else Yt!==null&&(hd(Yt),Yt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Fe===0&&(Fe=3):zf())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Qi(),rd(t,e),t===null&&Po(e.stateNode.containerInfo),rt(e),null;case 10:return If(e.type._context),rt(e),null;case 17:return Tt(e.type)&&Ll(),rt(e),null;case 19:if(ge(we),s=e.memoizedState,s===null)return rt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fs(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$l(t),o!==null){for(e.flags|=128,Fs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(we,we.current&1|2),e.child}t=t.sibling}s.tail!==null&&be()>Xi&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304)}else{if(!r)if(t=$l(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ve)return rt(e),null}else 2*be()-s.renderingStartTime>Xi&&n!==1073741824&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=be(),e.sibling=null,n=we.current,ce(we,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return $f(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function $I(t,e){switch(Tf(e),e.tag){case 1:return Tt(e.type)&&Ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qi(),ge(Et),ge(ct),Nf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kf(e),null;case 13:if(ge(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(we),null;case 4:return Qi(),null;case 10:return If(e.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var Ha=!1,ot=!1,zI=typeof WeakSet=="function"?WeakSet:Set,z=null;function Ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function id(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var yy=!1;function WI(t,e){if(Bh=Nl,t=dw(),wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var _;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)m=f,f=_;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(u=o),(_=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=_}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:t,selectionRange:n},Nl=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var I=S.memoizedProps,P=S.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?I:Gt(e.type,I),P);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(N){Ce(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return S=yy,yy=!1,S}function oo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&id(e,n,s)}i=i.next}while(i!==r)}}function xu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lE(t){var e=t.alternate;e!==null&&(t.alternate=null,lE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sn],delete e[ko],delete e[Hh],delete e[II],delete e[CI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uE(t){return t.tag===5||t.tag===3||t.tag===4}function vy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function od(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dl));else if(r!==4&&(t=t.child,t!==null))for(od(t,e,n),t=t.sibling;t!==null;)od(t,e,n),t=t.sibling}function ad(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ad(t,e,n),t=t.sibling;t!==null;)ad(t,e,n),t=t.sibling}var qe=null,Qt=!1;function Un(t,e,n){for(n=n.child;n!==null;)cE(t,e,n),n=n.sibling}function cE(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:ot||Ci(n,e);case 6:var r=qe,i=Qt;qe=null,Un(t,e,n),qe=r,Qt=i,qe!==null&&(Qt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Qt?(t=qe,n=n.stateNode,t.nodeType===8?Lc(t.parentNode,n):t.nodeType===1&&Lc(t,n),Ao(t)):Lc(qe,n.stateNode));break;case 4:r=qe,i=Qt,qe=n.stateNode.containerInfo,Qt=!0,Un(t,e,n),qe=r,Qt=i;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&id(n,e,o),i=i.next}while(i!==r)}Un(t,e,n);break;case 1:if(!ot&&(Ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,e,a)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Un(t,e,n),ot=r):Un(t,e,n);break;default:Un(t,e,n)}}function _y(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zI),e.forEach(function(r){var i=ZI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qe=a.stateNode,Qt=!1;break e;case 3:qe=a.stateNode.containerInfo,Qt=!0;break e;case 4:qe=a.stateNode.containerInfo,Qt=!0;break e}a=a.return}if(qe===null)throw Error(F(160));cE(s,o,i),qe=null,Qt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ce(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hE(e,t),e=e.sibling}function hE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),nn(t),r&4){try{oo(3,t,t.return),xu(3,t)}catch(I){Ce(t,t.return,I)}try{oo(5,t,t.return)}catch(I){Ce(t,t.return,I)}}break;case 1:qt(e,t),nn(t),r&512&&n!==null&&Ci(n,n.return);break;case 5:if(qt(e,t),nn(t),r&512&&n!==null&&Ci(n,n.return),t.flags&32){var i=t.stateNode;try{Eo(i,"")}catch(I){Ce(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&V_(i,s),Nh(a,o);var c=Nh(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?O_(i,f):h==="dangerouslySetInnerHTML"?M_(i,f):h==="children"?Eo(i,f):af(i,h,f,c)}switch(a){case"input":Ih(i,s);break;case"textarea":D_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Di(i,!!s.multiple,_,!1):m!==!!s.multiple&&(s.defaultValue!=null?Di(i,!!s.multiple,s.defaultValue,!0):Di(i,!!s.multiple,s.multiple?[]:"",!1))}i[ko]=s}catch(I){Ce(t,t.return,I)}}break;case 6:if(qt(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Ce(t,t.return,I)}}break;case 3:if(qt(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(I){Ce(t,t.return,I)}break;case 4:qt(e,t),nn(t);break;case 13:qt(e,t),nn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Uf=be())),r&4&&_y(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(c=ot)||h,qt(e,t),ot=c):qt(e,t),nn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(f=z=h;z!==null;){switch(m=z,_=m.child,m.tag){case 0:case 11:case 14:case 15:oo(4,m,m.return);break;case 1:Ci(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(I){Ce(r,n,I)}}break;case 5:Ci(m,m.return);break;case 22:if(m.memoizedState!==null){Ey(f);continue}}_!==null?(_.return=m,z=_):Ey(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=j_("display",o))}catch(I){Ce(t,t.return,I)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(I){Ce(t,t.return,I)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qt(e,t),nn(t),r&4&&_y(t);break;case 21:break;default:qt(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uE(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Eo(i,""),r.flags&=-33);var s=vy(t);ad(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vy(t);od(t,a,o);break;default:throw Error(F(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HI(t,e,n){z=t,dE(t)}function dE(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ha;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ot;a=Ha;var c=ot;if(Ha=o,(ot=u)&&!c)for(z=i;z!==null;)o=z,u=o.child,o.tag===22&&o.memoizedState!==null?Ty(i):u!==null?(u.return=o,z=u):Ty(i);for(;s!==null;)z=s,dE(s),s=s.sibling;z=i,Ha=a,ot=c}wy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):wy(t)}}function wy(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||xu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ao(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ot||e.flags&512&&sd(e)}catch(m){Ce(e,e.return,m)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Ey(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Ty(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xu(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ce(e,i,u)}}var s=e.return;try{sd(e)}catch(u){Ce(e,s,u)}break;case 5:var o=e.return;try{sd(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var qI=Math.ceil,Hl=Dn.ReactCurrentDispatcher,Of=Dn.ReactCurrentOwner,Ut=Dn.ReactCurrentBatchConfig,re=0,ze=null,Me=null,Qe=0,Ct=0,Pi=Er(0),Fe=0,Mo=null,Xr=0,Au=0,Ff=0,ao=null,vt=null,Uf=0,Xi=1/0,_n=null,ql=!1,ld=null,sr=null,qa=!1,Qn=null,Kl=0,lo=0,ud=null,pl=-1,ml=0;function pt(){return re&6?be():pl!==-1?pl:pl=be()}function or(t){return t.mode&1?re&2&&Qe!==0?Qe&-Qe:RI.transition!==null?(ml===0&&(ml=Y_()),ml):(t=ae,t!==0||(t=window.event,t=t===void 0?16:rw(t.type)),t):1}function Jt(t,e,n,r){if(50<lo)throw lo=0,ud=null,Error(F(185));Jo(t,n,r),(!(re&2)||t!==ze)&&(t===ze&&(!(re&2)&&(Au|=n),Fe===4&&Kn(t,Qe)),St(t,r),n===1&&re===0&&!(e.mode&1)&&(Xi=be()+500,Eu&&Tr()))}function St(t,e){var n=t.callbackNode;RA(t,e);var r=kl(t,t===ze?Qe:0);if(r===0)n!==null&&Ng(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ng(n),e===1)t.tag===0?PI(Sy.bind(null,t)):Tw(Sy.bind(null,t)),xI(function(){!(re&6)&&Tr()}),n=null;else{switch(X_(r)){case 1:n=df;break;case 4:n=G_;break;case 16:n=Rl;break;case 536870912:n=Q_;break;default:n=Rl}n=wE(n,fE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fE(t,e){if(pl=-1,ml=0,re&6)throw Error(F(327));var n=t.callbackNode;if(Fi()&&t.callbackNode!==n)return null;var r=kl(t,t===ze?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gl(t,r);else{e=r;var i=re;re|=2;var s=mE();(ze!==t||Qe!==e)&&(_n=null,Xi=be()+500,$r(t,e));do try{QI();break}catch(a){pE(t,a)}while(!0);Af(),Hl.current=s,re=i,Me!==null?e=0:(ze=null,Qe=0,e=Fe)}if(e!==0){if(e===2&&(i=Mh(t),i!==0&&(r=i,e=cd(t,i))),e===1)throw n=Mo,$r(t,0),Kn(t,r),St(t,be()),n;if(e===6)Kn(t,r);else{if(i=t.current.alternate,!(r&30)&&!KI(i)&&(e=Gl(t,r),e===2&&(s=Mh(t),s!==0&&(r=s,e=cd(t,s))),e===1))throw n=Mo,$r(t,0),Kn(t,r),St(t,be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Vr(t,vt,_n);break;case 3:if(Kn(t,r),(r&130023424)===r&&(e=Uf+500-be(),10<e)){if(kl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wh(Vr.bind(null,t,vt,_n),e);break}Vr(t,vt,_n);break;case 4:if(Kn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qI(r/1960))-r,10<r){t.timeoutHandle=Wh(Vr.bind(null,t,vt,_n),r);break}Vr(t,vt,_n);break;case 5:Vr(t,vt,_n);break;default:throw Error(F(329))}}}return St(t,be()),t.callbackNode===n?fE.bind(null,t):null}function cd(t,e){var n=ao;return t.current.memoizedState.isDehydrated&&($r(t,e).flags|=256),t=Gl(t,e),t!==2&&(e=vt,vt=n,e!==null&&hd(e)),t}function hd(t){vt===null?vt=t:vt.push.apply(vt,t)}function KI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kn(t,e){for(e&=~Ff,e&=~Au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xt(e),r=1<<n;t[n]=-1,e&=~r}}function Sy(t){if(re&6)throw Error(F(327));Fi();var e=kl(t,0);if(!(e&1))return St(t,be()),null;var n=Gl(t,e);if(t.tag!==0&&n===2){var r=Mh(t);r!==0&&(e=r,n=cd(t,r))}if(n===1)throw n=Mo,$r(t,0),Kn(t,e),St(t,be()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vr(t,vt,_n),St(t,be()),null}function Bf(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Xi=be()+500,Eu&&Tr())}}function Jr(t){Qn!==null&&Qn.tag===0&&!(re&6)&&Fi();var e=re;re|=1;var n=Ut.transition,r=ae;try{if(Ut.transition=null,ae=1,t)return t()}finally{ae=r,Ut.transition=n,re=e,!(re&6)&&Tr()}}function $f(){Ct=Pi.current,ge(Pi)}function $r(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SI(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ll();break;case 3:Qi(),ge(Et),ge(ct),Nf();break;case 5:kf(r);break;case 4:Qi();break;case 13:ge(we);break;case 19:ge(we);break;case 10:If(r.type._context);break;case 22:case 23:$f()}n=n.return}if(ze=t,Me=t=ar(t.current,null),Qe=Ct=e,Fe=0,Mo=null,Ff=Au=Xr=0,vt=ao=null,jr!==null){for(e=0;e<jr.length;e++)if(n=jr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}jr=null}return t}function pE(t,e){do{var n=Me;try{if(Af(),hl.current=Wl,zl){for(var r=Se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zl=!1}if(Yr=0,$e=Oe=Se=null,so=!1,Vo=0,Of.current=null,n===null||n.return===null){Fe=1,Mo=e,Me=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Qe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=cy(o);if(_!==null){_.flags&=-257,hy(_,o,a,s,e),_.mode&1&&uy(s,c,e),e=_,u=c;var S=e.updateQueue;if(S===null){var I=new Set;I.add(u),e.updateQueue=I}else S.add(u);break e}else{if(!(e&1)){uy(s,c,e),zf();break e}u=Error(F(426))}}else if(ve&&a.mode&1){var P=cy(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),hy(P,o,a,s,e),Sf(Yi(u,a));break e}}s=u=Yi(u,a),Fe!==4&&(Fe=2),ao===null?ao=[s]:ao.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Xw(s,u,e);ry(s,E);break e;case 1:a=u;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(sr===null||!sr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Jw(s,a,e);ry(s,N);break e}}s=s.return}while(s!==null)}yE(n)}catch(V){e=V,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function mE(){var t=Hl.current;return Hl.current=Wl,t===null?Wl:t}function zf(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),ze===null||!(Xr&268435455)&&!(Au&268435455)||Kn(ze,Qe)}function Gl(t,e){var n=re;re|=2;var r=mE();(ze!==t||Qe!==e)&&(_n=null,$r(t,e));do try{GI();break}catch(i){pE(t,i)}while(!0);if(Af(),re=n,Hl.current=r,Me!==null)throw Error(F(261));return ze=null,Qe=0,Fe}function GI(){for(;Me!==null;)gE(Me)}function QI(){for(;Me!==null&&!wA();)gE(Me)}function gE(t){var e=_E(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?yE(t):Me=e,Of.current=null}function yE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$I(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Me=null;return}}else if(n=BI(n,e,Ct),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Fe===0&&(Fe=5)}function Vr(t,e,n){var r=ae,i=Ut.transition;try{Ut.transition=null,ae=1,YI(t,e,n,r)}finally{Ut.transition=i,ae=r}return null}function YI(t,e,n,r){do Fi();while(Qn!==null);if(re&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kA(t,s),t===ze&&(Me=ze=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qa||(qa=!0,wE(Rl,function(){return Fi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ut.transition,Ut.transition=null;var o=ae;ae=1;var a=re;re|=4,Of.current=null,WI(t,n),hE(n,t),gI($h),Nl=!!Bh,$h=Bh=null,t.current=n,HI(n),EA(),re=a,ae=o,Ut.transition=s}else t.current=n;if(qa&&(qa=!1,Qn=t,Kl=i),s=t.pendingLanes,s===0&&(sr=null),xA(n.stateNode),St(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,t=ld,ld=null,t;return Kl&1&&t.tag!==0&&Fi(),s=t.pendingLanes,s&1?t===ud?lo++:(lo=0,ud=t):lo=0,Tr(),null}function Fi(){if(Qn!==null){var t=X_(Kl),e=Ut.transition,n=ae;try{if(Ut.transition=null,ae=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,Kl=0,re&6)throw Error(F(331));var i=re;for(re|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(z=c;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:oo(8,h,s)}var f=h.child;if(f!==null)f.return=h,z=f;else for(;z!==null;){h=z;var m=h.sibling,_=h.return;if(lE(h),h===c){z=null;break}if(m!==null){m.return=_,z=m;break}z=_}}}var S=s.alternate;if(S!==null){var I=S.child;if(I!==null){S.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oo(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,z=E;break e}z=s.return}}var v=t.current;for(z=v;z!==null;){o=z;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,z=w;else e:for(o=v;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xu(9,a)}}catch(V){Ce(a,a.return,V)}if(a===o){z=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,z=N;break e}z=a.return}}if(re=i,Tr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{ae=n,Ut.transition=e}}return!1}function xy(t,e,n){e=Yi(n,e),e=Xw(t,e,1),t=ir(t,e,1),e=pt(),t!==null&&(Jo(t,1,e),St(t,e))}function Ce(t,e,n){if(t.tag===3)xy(t,t,n);else for(;e!==null;){if(e.tag===3){xy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){t=Yi(n,t),t=Jw(e,t,1),e=ir(e,t,1),t=pt(),e!==null&&(Jo(e,1,t),St(e,t));break}}e=e.return}}function XI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Qe&n)===n&&(Fe===4||Fe===3&&(Qe&130023424)===Qe&&500>be()-Uf?$r(t,0):Ff|=n),St(t,e)}function vE(t,e){e===0&&(t.mode&1?(e=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):e=1);var n=pt();t=Rn(t,e),t!==null&&(Jo(t,e,n),St(t,n))}function JI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vE(t,n)}function ZI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),vE(t,n)}var _E;_E=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,UI(t,e,n);_t=!!(t.flags&131072)}else _t=!1,ve&&e.flags&1048576&&Sw(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fl(t,e),t=e.pendingProps;var i=qi(e,ct.current);Oi(e,n),i=Vf(null,e,r,t,i,n);var s=Df();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(s=!0,Ml(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pf(e),i.updater=Su,e.stateNode=i,i._reactInternals=e,Xh(e,r,t,n),e=ed(null,e,r,!0,s,n)):(e.tag=0,ve&&s&&Ef(e),ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tC(r),t=Gt(r,t),i){case 0:e=Zh(null,e,r,t,n);break e;case 1:e=py(null,e,r,t,n);break e;case 11:e=dy(null,e,r,t,n);break e;case 14:e=fy(null,e,r,Gt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Zh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),py(t,e,r,i,n);case 3:e:{if(nE(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Rw(t,e),Bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yi(Error(F(423)),e),e=my(t,e,r,n,i);break e}else if(r!==i){i=Yi(Error(F(424)),e),e=my(t,e,r,n,i);break e}else for(Pt=rr(e.stateNode.containerInfo.firstChild),Rt=e,ve=!0,Yt=null,n=Cw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ki(),r===i){e=kn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return kw(e),t===null&&Gh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zh(r,i)?o=null:s!==null&&zh(r,s)&&(e.flags|=32),tE(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Gh(e),null;case 13:return rE(t,e,n);case 4:return Rf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gi(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),dy(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ce(Fl,r._currentValue),r._currentValue=o,s!==null)if(Zt(s.value,o)){if(s.children===i.children&&!Et.current){e=kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=xn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Qh(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oi(e,n),i=Bt(i),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,i=Gt(r,e.pendingProps),i=Gt(r.type,i),fy(t,e,r,i,n);case 15:return Zw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),fl(t,e),e.tag=1,Tt(r)?(t=!0,Ml(e)):t=!1,Oi(e,n),Yw(e,r,i),Xh(e,r,i,n),ed(null,e,r,!0,t,n);case 19:return iE(t,e,n);case 22:return eE(t,e,n)}throw Error(F(156,e.tag))};function wE(t,e){return K_(t,e)}function eC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new eC(t,e,n,r)}function Wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tC(t){if(typeof t=="function")return Wf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uf)return 11;if(t===cf)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vi:return zr(n.children,i,s,e);case lf:o=8,i|=8;break;case Eh:return t=Ft(12,n,e,i|2),t.elementType=Eh,t.lanes=s,t;case Th:return t=Ft(13,n,e,i),t.elementType=Th,t.lanes=s,t;case Sh:return t=Ft(19,n,e,i),t.elementType=Sh,t.lanes=s,t;case k_:return Iu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P_:o=10;break e;case R_:o=9;break e;case uf:o=11;break e;case cf:o=14;break e;case Wn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ft(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zr(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Iu(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=k_,t.lanes=n,t.stateNode={isHidden:!1},t}function zc(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function Wc(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hf(t,e,n,r,i,s,o,a,u){return t=new nC(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ft(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pf(s),t}function rC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function EE(t){if(!t)return fr;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Tt(n))return Ew(t,n,e)}return e}function TE(t,e,n,r,i,s,o,a,u){return t=Hf(n,r,!0,t,i,s,o,a,u),t.context=EE(null),n=t.current,r=pt(),i=or(n),s=xn(r,i),s.callback=e??null,ir(n,s,i),t.current.lanes=i,Jo(t,i,r),St(t,r),t}function Cu(t,e,n,r){var i=e.current,s=pt(),o=or(i);return n=EE(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ir(i,e,o),t!==null&&(Jt(t,i,o,s),cl(t,i,o)),o}function Ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ay(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qf(t,e){Ay(t,e),(t=t.alternate)&&Ay(t,e)}function iC(){return null}var SE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kf(t){this._internalRoot=t}Pu.prototype.render=Kf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Cu(t,e,null,null)};Pu.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jr(function(){Cu(null,t,null,null)}),e[Pn]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ew();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qn.length&&e!==0&&e<qn[n].priority;n++);qn.splice(n,0,t),n===0&&nw(t)}};function Gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ru(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Iy(){}function sC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ql(o);s.call(c)}}var o=TE(e,r,t,0,null,!1,!1,"",Iy);return t._reactRootContainer=o,t[Pn]=o.current,Po(t.nodeType===8?t.parentNode:t),Jr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ql(u);a.call(c)}}var u=Hf(t,0,!1,null,null,!1,!1,"",Iy);return t._reactRootContainer=u,t[Pn]=u.current,Po(t.nodeType===8?t.parentNode:t),Jr(function(){Cu(e,u,n,r)}),u}function ku(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Ql(o);a.call(u)}}Cu(e,o,t,i)}else o=sC(n,e,t,i,r);return Ql(o)}J_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hs(e.pendingLanes);n!==0&&(ff(e,n|1),St(e,be()),!(re&6)&&(Xi=be()+500,Tr()))}break;case 13:Jr(function(){var r=Rn(t,1);if(r!==null){var i=pt();Jt(r,t,1,i)}}),qf(t,1)}};pf=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=pt();Jt(e,t,134217728,n)}qf(t,134217728)}};Z_=function(t){if(t.tag===13){var e=or(t),n=Rn(t,e);if(n!==null){var r=pt();Jt(n,t,e,r)}qf(t,e)}};ew=function(){return ae};tw=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Vh=function(t,e,n){switch(e){case"input":if(Ih(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wu(r);if(!i)throw Error(F(90));b_(r),Ih(r,i)}}}break;case"textarea":D_(t,n);break;case"select":e=n.value,e!=null&&Di(t,!!n.multiple,e,!1)}};B_=Bf;$_=Jr;var oC={usingClientEntryPoint:!1,Events:[ea,Ti,wu,F_,U_,Bf]},Us={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aC={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H_(t),t===null?null:t.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||iC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{gu=Ka.inject(aC),an=Ka}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oC;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(e))throw Error(F(200));return rC(t,e,null,n)};Vt.createRoot=function(t,e){if(!Gf(t))throw Error(F(299));var n=!1,r="",i=SE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hf(t,1,!1,null,null,n,!1,r,i),t[Pn]=e.current,Po(t.nodeType===8?t.parentNode:t),new Kf(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=H_(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return Jr(t)};Vt.hydrate=function(t,e,n){if(!Ru(e))throw Error(F(200));return ku(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!Gf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TE(e,null,t,1,n??null,i,!1,s,o),t[Pn]=e.current,Po(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pu(e)};Vt.render=function(t,e,n){if(!Ru(e))throw Error(F(200));return ku(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!Ru(t))throw Error(F(40));return t._reactRootContainer?(Jr(function(){ku(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};Vt.unstable_batchedUpdates=Bf;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ru(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return ku(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function xE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xE)}catch(t){console.error(t)}}xE(),x_.exports=Vt;var lC=x_.exports,Cy=lC;_h.createRoot=Cy.createRoot,_h.hydrateRoot=Cy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jo(){return jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jo.apply(this,arguments)}var Yn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yn||(Yn={}));const Py="popstate";function uC(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return dd("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Yl(i)}return hC(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cC(){return Math.random().toString(36).substr(2,8)}function Ry(t,e){return{usr:t.state,key:t.key,idx:e}}function dd(t,e,n,r){return n===void 0&&(n=null),jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ds(e):e,{state:n,key:e&&e.key||r||cC()})}function Yl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ds(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Yn.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(jo({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Yn.Pop;let P=h(),E=P==null?null:P-c;c=P,u&&u({action:a,location:I.location,delta:E})}function m(P,E){a=Yn.Push;let v=dd(I.location,P,E);c=h()+1;let w=Ry(v,c),N=I.createHref(v);try{o.pushState(w,"",N)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(N)}s&&u&&u({action:a,location:I.location,delta:1})}function _(P,E){a=Yn.Replace;let v=dd(I.location,P,E);c=h();let w=Ry(v,c),N=I.createHref(v);o.replaceState(w,"",N),s&&u&&u({action:a,location:I.location,delta:0})}function S(P){let E=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof P=="string"?P:Yl(P);return v=v.replace(/ $/,"%20"),Ve(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let I={get action(){return a},get location(){return t(i,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Py,f),u=P,()=>{i.removeEventListener(Py,f),u=null}},createHref(P){return e(i,P)},createURL:S,encodeLocation(P){let E=S(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:_,go(P){return o.go(P)}};return I}var ky;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ky||(ky={}));function dC(t,e,n){return n===void 0&&(n="/"),fC(t,e,n)}function fC(t,e,n,r){let i=typeof e=="string"?ds(e):e,s=Yf(i.pathname||"/",n);if(s==null)return null;let o=AE(t);pC(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=IC(s);a=SC(o[u],c)}return a}function AE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ve(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=lr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Ve(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AE(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:EC(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of IE(s.path))i(s,o,u)}),e}function IE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=IE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function pC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mC=/^:[\w-]+$/,gC=3,yC=2,vC=1,_C=10,wC=-2,Ny=t=>t==="*";function EC(t,e){let n=t.split("/"),r=n.length;return n.some(Ny)&&(r+=wC),e&&(r+=yC),n.filter(i=>!Ny(i)).reduce((i,s)=>i+(mC.test(s)?gC:s===""?vC:_C),r)}function TC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function SC(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=xC({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:lr([s,f.pathname]),pathnameBase:NC(lr([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=lr([s,f.pathnameBase]))}return o}function xC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=AC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let I=a[f]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const S=a[f];return _&&!S?c[m]=void 0:c[m]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function AC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const CC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PC=t=>CC.test(t);function RC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ds(t):t,s;if(n)if(PC(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=by(n.substring(1),"/"):s=by(n,e)}else s=e;return{pathname:s,search:bC(r),hash:VC(i)}}function by(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xf(t,e){let n=kC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ds(t):(i=jo({},t),Ve(!i.pathname||!i.pathname.includes("?"),Hc("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),Hc("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),Hc("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let u=RC(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const lr=t=>t.join("/").replace(/\/\/+/g,"/"),NC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CE=["post","put","patch","delete"];new Set(CE);const LC=["get",...CE];new Set(LC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oo.apply(this,arguments)}const Zf=k.createContext(null),MC=k.createContext(null),Sr=k.createContext(null),Nu=k.createContext(null),Ln=k.createContext({outlet:null,matches:[],isDataRoute:!1}),PE=k.createContext(null);function jC(t,e){let{relative:n}=e===void 0?{}:e;fs()||Ve(!1);let{basename:r,navigator:i}=k.useContext(Sr),{hash:s,pathname:o,search:a}=kE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:lr([r,o])),i.createHref({pathname:u,search:a,hash:s})}function fs(){return k.useContext(Nu)!=null}function ii(){return fs()||Ve(!1),k.useContext(Nu).location}function RE(t){k.useContext(Sr).static||k.useLayoutEffect(t)}function ep(){let{isDataRoute:t}=k.useContext(Ln);return t?XC():OC()}function OC(){fs()||Ve(!1);let t=k.useContext(Zf),{basename:e,future:n,navigator:r}=k.useContext(Sr),{matches:i}=k.useContext(Ln),{pathname:s}=ii(),o=JSON.stringify(Xf(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return RE(()=>{a.current=!0}),k.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Jf(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:lr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function FC(){let{matches:t}=k.useContext(Ln),e=t[t.length-1];return e?e.params:{}}function kE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Sr),{matches:i}=k.useContext(Ln),{pathname:s}=ii(),o=JSON.stringify(Xf(i,r.v7_relativeSplatPath));return k.useMemo(()=>Jf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function UC(t,e){return BC(t,e)}function BC(t,e,n,r){fs()||Ve(!1);let{navigator:i}=k.useContext(Sr),{matches:s}=k.useContext(Ln),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=ii(),h;if(e){var f;let P=typeof e=="string"?ds(e):e;u==="/"||(f=P.pathname)!=null&&f.startsWith(u)||Ve(!1),h=P}else h=c;let m=h.pathname||"/",_=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let S=dC(t,{pathname:_}),I=qC(S&&S.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:lr([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:lr([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&I?k.createElement(Nu.Provider,{value:{location:Oo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Yn.Pop}},I):I}function $C(){let t=YC(),e=DC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const zC=k.createElement($C,null);class WC extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Ln.Provider,{value:this.props.routeContext},k.createElement(PE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HC(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(Zf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Ln.Provider,{value:e},r)}function qC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Ve(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:_}=n,S=f.route.loader&&m[f.route.id]===void 0&&(!_||_[f.route.id]===void 0);if(f.route.lazy||S){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let _,S=!1,I=null,P=null;n&&(_=a&&f.route.id?a[f.route.id]:void 0,I=f.route.errorElement||zC,u&&(c<0&&m===0?(JC("route-fallback"),S=!0,P=null):c===m&&(S=!0,P=f.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),v=()=>{let w;return _?w=I:S?w=P:f.route.Component?w=k.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,k.createElement(HC,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?k.createElement(WC,{location:n.location,revalidation:n.revalidation,component:I,error:_,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var NE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NE||{}),bE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bE||{});function KC(t){let e=k.useContext(Zf);return e||Ve(!1),e}function GC(t){let e=k.useContext(MC);return e||Ve(!1),e}function QC(t){let e=k.useContext(Ln);return e||Ve(!1),e}function VE(t){let e=QC(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function YC(){var t;let e=k.useContext(PE),n=GC(),r=VE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XC(){let{router:t}=KC(NE.UseNavigateStable),e=VE(bE.UseNavigateStable),n=k.useRef(!1);return RE(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Oo({fromRouteId:e},s)))},[t,e])}const Vy={};function JC(t,e,n){Vy[t]||(Vy[t]=!0)}function ZC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function eP(t){let{to:e,replace:n,state:r,relative:i}=t;fs()||Ve(!1);let{future:s,static:o}=k.useContext(Sr),{matches:a}=k.useContext(Ln),{pathname:u}=ii(),c=ep(),h=Jf(e,Xf(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(h);return k.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function $n(t){Ve(!1)}function tP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yn.Pop,navigator:s,static:o=!1,future:a}=t;fs()&&Ve(!1);let u=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:u,navigator:s,static:o,future:Oo({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=ds(r));let{pathname:h="/",search:f="",hash:m="",state:_=null,key:S="default"}=r,I=k.useMemo(()=>{let P=Yf(h,u);return P==null?null:{location:{pathname:P,search:f,hash:m,state:_,key:S},navigationType:i}},[u,h,f,m,_,S,i]);return I==null?null:k.createElement(Sr.Provider,{value:c},k.createElement(Nu.Provider,{children:n,value:I}))}function nP(t){let{children:e,location:n}=t;return UC(fd(e),n)}new Promise(()=>{});function fd(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,fd(r.props.children,s));return}r.type!==$n&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fd(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}function rP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function iP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sP(t,e){return t.button===0&&(!e||e==="_self")&&!iP(t)}const oP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aP="6";try{window.__reactRouterVersion=aP}catch{}const lP="startTransition",Dy=X1[lP];function uP(t){let{basename:e,children:n,future:r,window:i}=t,s=k.useRef();s.current==null&&(s.current=uC({window:i,v5Compat:!0}));let o=s.current,[a,u]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=k.useCallback(f=>{c&&Dy?Dy(()=>u(f)):u(f)},[u,c]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.useEffect(()=>ZC(r),[r]),k.createElement(tP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const cP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=k.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f}=e,m=rP(e,oP),{basename:_}=k.useContext(Sr),S,I=!1;if(typeof c=="string"&&hP.test(c)&&(S=c,cP))try{let w=new URL(window.location.href),N=c.startsWith("//")?new URL(w.protocol+c):new URL(c),V=Yf(N.pathname,_);N.origin===w.origin&&V!=null?c=V+N.search+N.hash:I=!0}catch{}let P=jC(c,{relative:i}),E=dP(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:f});function v(w){r&&r(w),w.defaultPrevented||E(w)}return k.createElement("a",pd({},m,{href:S||P,onClick:I||s?r:v,ref:n,target:u}))});var Ly;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ly||(Ly={}));var My;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(My||(My={}));function dP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=ep(),c=ii(),h=kE(t,{relative:o});return k.useCallback(f=>{if(sP(f,n)){f.preventDefault();let m=r!==void 0?r:Yl(c)===Yl(h);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,u,h,r,i,n,t,s,o,a])}const tp=k.createContext({});function np(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const bu=k.createContext(null),rp=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class fP extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pP({children:t,isPresent:e}){const n=k.useId(),r=k.useRef(null),i=k.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=k.useContext(rp);return k.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),p.jsx(fP,{isPresent:e,childRef:r,sizeRef:i,children:k.cloneElement(t,{ref:r})})}const mP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=np(gP),u=k.useId(),c=k.useCallback(f=>{a.set(f,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),h=k.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return k.useMemo(()=>{a.forEach((f,m)=>a.set(m,!1))},[n]),k.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(pP,{isPresent:n,children:t})),p.jsx(bu.Provider,{value:h,children:t})};function gP(){return new Map}function DE(t=!0){const e=k.useContext(bu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=k.useId();k.useEffect(()=>{t&&i(s)},[t]);const o=k.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Ga=t=>t.key||"";function jy(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const ip=typeof window<"u",LE=ip?k.useLayoutEffect:k.useEffect,Oy=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,u]=DE(o),c=k.useMemo(()=>jy(t),[t]),h=o&&!a?[]:c.map(Ga),f=k.useRef(!0),m=k.useRef(c),_=np(()=>new Map),[S,I]=k.useState(c),[P,E]=k.useState(c);LE(()=>{f.current=!1,m.current=c;for(let N=0;N<P.length;N++){const V=Ga(P[N]);h.includes(V)?_.delete(V):_.get(V)!==!0&&_.set(V,!1)}},[P,h.length,h.join("-")]);const v=[];if(c!==S){let N=[...c];for(let V=0;V<P.length;V++){const j=P[V],x=Ga(j);h.includes(x)||(N.splice(V,0,j),v.push(j))}s==="wait"&&v.length&&(N=v),E(jy(N)),I(c);return}const{forceRender:w}=k.useContext(tp);return p.jsx(p.Fragment,{children:P.map(N=>{const V=Ga(N),j=o&&!a?!1:c===P||h.includes(V),x=()=>{if(_.has(V))_.set(V,!0);else return;let y=!0;_.forEach(A=>{A||(y=!1)}),y&&(w==null||w(),E(m.current),o&&(u==null||u()),r&&r())};return p.jsx(mP,{isPresent:j,initial:!f.current||n?void 0:!1,custom:j?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:j?void 0:x,children:N},V)})})},kt=t=>t;let ME=kt;function sp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ji=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},An=t=>t*1e3,In=t=>t/1e3,yP={useManualTiming:!1};function vP(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,h=!1,f=!1)=>{const _=f&&r?e:n;return h&&s.add(c),_.has(c)||_.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,u.process(c))}};return u}const Qa=["read","resolveKeyframes","update","preRender","render","postRender"],_P=40;function jE(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Qa.reduce((E,v)=>(E[v]=vP(s),E),{}),{read:a,resolveKeyframes:u,update:c,preRender:h,render:f,postRender:m}=o,_=()=>{const E=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,_P),1),i.timestamp=E,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),h.process(i),f.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},S=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:Qa.reduce((E,v)=>{const w=o[v];return E[v]=(N,V=!1,j=!1)=>(n||S(),w.schedule(N,V,j)),E},{}),cancel:E=>{for(let v=0;v<Qa.length;v++)o[Qa[v]].cancel(E)},state:i,steps:o}}const{schedule:ye,cancel:pr,state:Ke,steps:qc}=jE(typeof requestAnimationFrame<"u"?requestAnimationFrame:kt,!0),OE=k.createContext({strict:!1}),Fy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zi={};for(const t in Fy)Zi[t]={isEnabled:e=>Fy[t].some(n=>!!e[n])};function wP(t){for(const e in t)Zi[e]={...Zi[e],...t[e]}}const EP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||EP.has(t)}let FE=t=>!Xl(t);function TP(t){t&&(FE=e=>e.startsWith("on")?!Xl(e):t(e))}try{TP(require("@emotion/is-prop-valid").default)}catch{}function SP(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(FE(i)||n===!0&&Xl(i)||!e&&!Xl(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function xP(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Vu=k.createContext({});function Fo(t){return typeof t=="string"||Array.isArray(t)}function Du(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const op=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ap=["initial",...op];function Lu(t){return Du(t.animate)||ap.some(e=>Fo(t[e]))}function UE(t){return!!(Lu(t)||t.variants)}function AP(t,e){if(Lu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fo(n)?n:void 0,animate:Fo(r)?r:void 0}}return t.inherit!==!1?e:{}}function IP(t){const{initial:e,animate:n}=AP(t,k.useContext(Vu));return k.useMemo(()=>({initial:e,animate:n}),[Uy(e),Uy(n)])}function Uy(t){return Array.isArray(t)?t.join(" "):t}const CP=Symbol.for("motionComponentSymbol");function Ri(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function PP(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ri(n)&&(n.current=r))},[e])}const lp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RP="framerAppearId",BE="data-"+lp(RP),{schedule:up}=jE(queueMicrotask,!1),$E=k.createContext({});function kP(t,e,n,r,i){var s,o;const{visualElement:a}=k.useContext(Vu),u=k.useContext(OE),c=k.useContext(bu),h=k.useContext(rp).reducedMotion,f=k.useRef(null);r=r||u.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,_=k.useContext($E);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&NP(f.current,n,i,_);const S=k.useRef(!1);k.useInsertionEffect(()=>{m&&S.current&&m.update(n,c)});const I=n[BE],P=k.useRef(!!I&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,I))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,I)));return LE(()=>{m&&(S.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),up.render(m.render),P.current&&m.animationState&&m.animationState.animateChanges())}),k.useEffect(()=>{m&&(!P.current&&m.animationState&&m.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,I)}),P.current=!1))}),m}function NP(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:zE(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ri(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function zE(t){if(t)return t.options.allowProjection!==!1?t.projection:zE(t.parent)}function bP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&wP(t);function a(c,h){let f;const m={...k.useContext(rp),...c,layoutId:VP(c)},{isStatic:_}=m,S=IP(c),I=r(c,_);if(!_&&ip){DP();const P=LP(m);f=P.MeasureLayout,S.visualElement=kP(i,I,m,e,P.ProjectionNode)}return p.jsxs(Vu.Provider,{value:S,children:[f&&S.visualElement?p.jsx(f,{visualElement:S.visualElement,...m}):null,n(i,c,PP(I,S.visualElement,h),I,_,S.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const u=k.forwardRef(a);return u[CP]=i,u}function VP({layoutId:t}){const e=k.useContext(tp).id;return e&&t!==void 0?e+"-"+t:t}function DP(t,e){k.useContext(OE).strict}function LP(t){const{drag:e,layout:n}=Zi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const MP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cp(t){return typeof t!="string"||t.includes("-")?!1:!!(MP.indexOf(t)>-1||/[A-Z]/u.test(t))}function By(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function hp(t,e,n,r){if(typeof e=="function"){const[i,s]=By(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=By(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const md=t=>Array.isArray(t),jP=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),OP=t=>md(t)?t[t.length-1]||0:t,ut=t=>!!(t&&t.getVelocity);function yl(t){const e=ut(t)?t.get():t;return jP(e)?e.toValue():e}function FP({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:UP(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const WE=t=>(e,n)=>{const r=k.useContext(Vu),i=k.useContext(bu),s=()=>FP(t,e,r,i);return n?s():np(s)};function UP(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=yl(s[m]);let{initial:o,animate:a}=t;const u=Lu(t),c=UE(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Du(f)){const m=Array.isArray(f)?f:[f];for(let _=0;_<m.length;_++){const S=hp(t,m[_]);if(S){const{transitionEnd:I,transition:P,...E}=S;for(const v in E){let w=E[v];if(Array.isArray(w)){const N=h?w.length-1:0;w=w[N]}w!==null&&(i[v]=w)}for(const v in I)i[v]=I[v]}}}return i}const ps=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],si=new Set(ps),HE=t=>e=>typeof e=="string"&&e.startsWith(t),qE=HE("--"),BP=HE("var(--"),dp=t=>BP(t)?$P.test(t.split("/*")[0].trim()):!1,$P=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,KE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Nn=(t,e,n)=>n>e?e:n<t?t:n,ms={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uo={...ms,transform:t=>Nn(0,1,t)},Ya={...ms,default:1},na=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zn=na("deg"),un=na("%"),q=na("px"),zP=na("vh"),WP=na("vw"),$y={...un,parse:t=>un.parse(t)/100,transform:t=>un.transform(t*100)},HP={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,backgroundPositionX:q,backgroundPositionY:q},qP={rotate:zn,rotateX:zn,rotateY:zn,rotateZ:zn,scale:Ya,scaleX:Ya,scaleY:Ya,scaleZ:Ya,skew:zn,skewX:zn,skewY:zn,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:Uo,originX:$y,originY:$y,originZ:q},zy={...ms,transform:Math.round},fp={...HP,...qP,zIndex:zy,size:q,fillOpacity:Uo,strokeOpacity:Uo,numOctaves:zy},KP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GP=ps.length;function QP(t,e,n){let r="",i=!0;for(let s=0;s<GP;s++){const o=ps[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const c=KE(a,fp[o]);if(!u){i=!1;const h=KP[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function pp(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const c=e[u];if(si.has(u)){o=!0;continue}else if(qE(u)){i[u]=c;continue}else{const h=KE(c,fp[u]);u.startsWith("origin")?(a=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=QP(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${c} ${h}`}}const YP={offset:"stroke-dashoffset",array:"stroke-dasharray"},XP={offset:"strokeDashoffset",array:"strokeDasharray"};function JP(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?YP:XP;t[s.offset]=q.transform(-r);const o=q.transform(e),a=q.transform(n);t[s.array]=`${o} ${a}`}function Wy(t,e,n){return typeof t=="string"?t:q.transform(e+n*t)}function ZP(t,e,n){const r=Wy(e,t.x,t.width),i=Wy(n,t.y,t.height);return`${r} ${i}`}function mp(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,f){if(pp(t,c,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:_,dimensions:S}=t;m.transform&&(S&&(_.transform=m.transform),delete m.transform),S&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=ZP(S,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&JP(m,o,a,u,!1)}const gp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),GE=()=>({...gp(),attrs:{}}),yp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const YE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function XE(t,e,n,r){QE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(YE.has(i)?i:lp(i),e.attrs[i])}const Jl={};function eR(t){Object.assign(Jl,t)}function JE(t,{layout:e,layoutId:n}){return si.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Jl[t]||t==="opacity")}function vp(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ut(i[o])||e.style&&ut(e.style[o])||JE(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function ZE(t,e,n){const r=vp(t,e,n);for(const i in t)if(ut(t[i])||ut(e[i])){const s=ps.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function tR(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Hy=["x","y","width","height","cx","cy","r"],nR={useVisualState:WE({scrapeMotionValuesFromProps:ZE,createRenderState:GE,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(si.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<Hy.length;a++){const u=Hy[a];t[u]!==e[u]&&(o=!0)}o&&ye.read(()=>{tR(n,r),ye.render(()=>{mp(r,i,yp(n.tagName),t.transformTemplate),XE(n,r)})})}})},rR={useVisualState:WE({scrapeMotionValuesFromProps:vp,createRenderState:gp})};function eT(t,e,n){for(const r in e)!ut(e[r])&&!JE(r,n)&&(t[r]=e[r])}function iR({transformTemplate:t},e){return k.useMemo(()=>{const n=gp();return pp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function sR(t,e){const n=t.style||{},r={};return eT(r,n,t),Object.assign(r,iR(t,e)),r}function oR(t,e){const n={},r=sR(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function aR(t,e,n,r){const i=k.useMemo(()=>{const s=GE();return mp(s,e,yp(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};eT(s,t.style,t),i.style={...s,...i.style}}return i}function lR(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(cp(n)?aR:oR)(r,s,o,n),c=SP(r,typeof n=="string",t),h=n!==k.Fragment?{...c,...u,ref:i}:{},{children:f}=r,m=k.useMemo(()=>ut(f)?f.get():f,[f]);return k.createElement(n,{...h,children:m})}}function uR(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...cp(r)?nR:rR,preloadedFeatures:t,useRender:lR(i),createVisualElement:e,Component:r};return bP(o)}}function tT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Mu(t,e,n){const r=t.getProps();return hp(r,e,n!==void 0?n:r.custom,t)}const cR=sp(()=>window.ScrollTimeline!==void 0);class hR{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(cR()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dR extends hR{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function _p(t,e){return t?t[e]||t.default||t:void 0}const gd=2e4;function nT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<gd;)e+=n,r=t.next(e);return e>=gd?1/0:e}function wp(t){return typeof t=="function"}function qy(t,e){t.timeline=e,t.onfinish=null}const Ep=t=>Array.isArray(t)&&typeof t[0]=="number",fR={linearEasing:void 0};function pR(t,e){const n=sp(t);return()=>{var r;return(r=fR[e])!==null&&r!==void 0?r:n()}}const Zl=pR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rT=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Ji(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function iT(t){return!!(typeof t=="function"&&Zl()||!t||typeof t=="string"&&(t in yd||Zl())||Ep(t)||Array.isArray(t)&&t.every(iT))}const Ks=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,yd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ks([0,.65,.55,1]),circOut:Ks([.55,0,1,.45]),backIn:Ks([.31,.01,.66,-.59]),backOut:Ks([.33,1.53,.69,.99])};function sT(t,e){if(t)return typeof t=="function"&&Zl()?rT(t,e):Ep(t)?Ks(t):Array.isArray(t)?t.map(n=>sT(n,e)||yd.easeOut):yd[t]}const Kt={x:!1,y:!1};function oT(){return Kt.x||Kt.y}function mR(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function aT(t,e){const n=mR(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Ky(t){return e=>{e.pointerType==="touch"||oT()||t(e)}}function gR(t,e,n={}){const[r,i,s]=aT(t,n),o=Ky(a=>{const{target:u}=a,c=e(a);if(typeof c!="function"||!u)return;const h=Ky(f=>{c(f),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const lT=(t,e)=>e?t===e?!0:lT(t,e.parentElement):!1,Tp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,yR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vR(t){return yR.has(t.tagName)||t.tabIndex!==-1}const Gs=new WeakSet;function Gy(t){return e=>{e.key==="Enter"&&t(e)}}function Kc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _R=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Gy(()=>{if(Gs.has(n))return;Kc(n,"down");const i=Gy(()=>{Kc(n,"up")}),s=()=>Kc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Qy(t){return Tp(t)&&!oT()}function wR(t,e,n={}){const[r,i,s]=aT(t,n),o=a=>{const u=a.currentTarget;if(!Qy(a)||Gs.has(u))return;Gs.add(u);const c=e(a),h=(_,S)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!Qy(_)||!Gs.has(u))&&(Gs.delete(u),typeof c=="function"&&c(_,{success:S}))},f=_=>{h(_,n.useGlobalTarget||lT(u,_.target))},m=_=>{h(_,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{!vR(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>_R(c,i),i)}),s}function ER(t){return t==="x"||t==="y"?Kt[t]?null:(Kt[t]=!0,()=>{Kt[t]=!1}):Kt.x||Kt.y?null:(Kt.x=Kt.y=!0,()=>{Kt.x=Kt.y=!1})}const uT=new Set(["width","height","top","left","right","bottom",...ps]);let vl;function TR(){vl=void 0}const cn={now:()=>(vl===void 0&&cn.set(Ke.isProcessing||yP.useManualTiming?Ke.timestamp:performance.now()),vl),set:t=>{vl=t,queueMicrotask(TR)}};function Sp(t,e){t.indexOf(e)===-1&&t.push(e)}function xp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ap{constructor(){this.subscriptions=[]}add(e){return Sp(this.subscriptions,e),()=>xp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function cT(t,e){return e?t*(1e3/e):0}const Yy=30,SR=t=>!isNaN(parseFloat(t));class xR{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=cn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=cn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=SR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ap);const r=this.events[e].add(n);return e==="change"?()=>{r(),ye.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Yy);return cT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bo(t,e){return new xR(t,e)}function AR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bo(n))}function IR(t,e){const n=Mu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=OP(s[o]);AR(t,o,a)}}function CR(t){return!!(ut(t)&&t.add)}function vd(t,e){const n=t.getValue("willChange");if(CR(n))return n.add(e)}function hT(t){return t.props[BE]}const dT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,PR=1e-7,RR=12;function kR(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=dT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>PR&&++a<RR);return o}function ra(t,e,n,r){if(t===e&&n===r)return kt;const i=s=>kR(s,0,1,t,n);return s=>s===0||s===1?s:dT(i(s),e,r)}const fT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pT=t=>e=>1-t(1-e),mT=ra(.33,1.53,.69,.99),Ip=pT(mT),gT=fT(Ip),yT=t=>(t*=2)<1?.5*Ip(t):.5*(2-Math.pow(2,-10*(t-1))),Cp=t=>1-Math.sin(Math.acos(t)),vT=pT(Cp),_T=fT(Cp),wT=t=>/^0[^.\s]+$/u.test(t);function NR(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wT(t):!0}const uo=t=>Math.round(t*1e5)/1e5,Pp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bR(t){return t==null}const VR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rp=(t,e)=>n=>!!(typeof n=="string"&&VR.test(n)&&n.startsWith(t)||e&&!bR(n)&&Object.prototype.hasOwnProperty.call(n,e)),ET=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Pp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},DR=t=>Nn(0,255,t),Gc={...ms,transform:t=>Math.round(DR(t))},Fr={test:Rp("rgb","red"),parse:ET("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Gc.transform(t)+", "+Gc.transform(e)+", "+Gc.transform(n)+", "+uo(Uo.transform(r))+")"};function LR(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const _d={test:Rp("#"),parse:LR,transform:Fr.transform},ki={test:Rp("hsl","hue"),parse:ET("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+un.transform(uo(e))+", "+un.transform(uo(n))+", "+uo(Uo.transform(r))+")"},st={test:t=>Fr.test(t)||_d.test(t)||ki.test(t),parse:t=>Fr.test(t)?Fr.parse(t):ki.test(t)?ki.parse(t):_d.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fr.transform(t):ki.transform(t)},MR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jR(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Pp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(MR))===null||n===void 0?void 0:n.length)||0)>0}const TT="number",ST="color",OR="var",FR="var(",Xy="${}",UR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $o(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(UR,u=>(st.test(u)?(r.color.push(s),i.push(ST),n.push(st.parse(u))):u.startsWith(FR)?(r.var.push(s),i.push(OR),n.push(u)):(r.number.push(s),i.push(TT),n.push(parseFloat(u))),++s,Xy)).split(Xy);return{values:n,split:a,indexes:r,types:i}}function xT(t){return $o(t).values}function AT(t){const{split:e,types:n}=$o(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===TT?s+=uo(i[o]):a===ST?s+=st.transform(i[o]):s+=i[o]}return s}}const BR=t=>typeof t=="number"?0:t;function $R(t){const e=xT(t);return AT(t)(e.map(BR))}const mr={test:jR,parse:xT,createTransformer:AT,getAnimatableNone:$R},zR=new Set(["brightness","contrast","saturate","opacity"]);function WR(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Pp)||[];if(!r)return t;const i=n.replace(r,"");let s=zR.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const HR=/\b([a-z-]*)\(.*?\)/gu,wd={...mr,getAnimatableNone:t=>{const e=t.match(HR);return e?e.map(WR).join(" "):t}},qR={...fp,color:st,backgroundColor:st,outlineColor:st,fill:st,stroke:st,borderColor:st,borderTopColor:st,borderRightColor:st,borderBottomColor:st,borderLeftColor:st,filter:wd,WebkitFilter:wd},kp=t=>qR[t];function IT(t,e){let n=kp(t);return n!==wd&&(n=mr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const KR=new Set(["auto","none","0"]);function GR(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!KR.has(s)&&$o(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=IT(n,i)}const Jy=t=>t===ms||t===q,Zy=(t,e)=>parseFloat(t.split(", ")[e]),ev=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Zy(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Zy(s[1],t):0}},QR=new Set(["x","y","z"]),YR=ps.filter(t=>!QR.has(t));function XR(t){const e=[];return YR.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const es={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ev(4,13),y:ev(5,14)};es.translateX=es.x;es.translateY=es.y;const Wr=new Set;let Ed=!1,Td=!1;function CT(){if(Td){const t=Array.from(Wr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=XR(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Td=!1,Ed=!1,Wr.forEach(t=>t.complete()),Wr.clear()}function PT(){Wr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Td=!0)})}function JR(){PT(),CT()}class Np{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wr.add(this),Ed||(Ed=!0,ye.read(PT),ye.resolveKeyframes(CT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const RT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ZR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ek(t){const e=ZR.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function kT(t,e,n=1){const[r,i]=ek(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return RT(o)?parseFloat(o):o}return dp(i)?kT(i,e,n+1):i}const NT=t=>e=>e.test(t),tk={test:t=>t==="auto",parse:t=>t},bT=[ms,q,un,zn,WP,zP,tk],tv=t=>bT.find(NT(t));class VT extends Np{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),dp(c))){const h=kT(c,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!uT.has(r)||e.length!==2)return;const[i,s]=e,o=tv(i),a=tv(s);if(o!==a)if(Jy(o)&&Jy(a))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)NR(e[i])&&r.push(i);r.length&&GR(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=es[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=es[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}const nv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mr.test(t)||t==="0")&&!t.startsWith("url("));function nk(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rk(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=nv(i,e),a=nv(s,e);return!o||!a?!1:nk(t)||(n==="spring"||wp(n))&&r}const ik=t=>t!==null;function ju(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(ik),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const sk=40;class DT{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>sk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&JR(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=cn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:c}=this.options;if(!c&&!rk(e,r,i,s))if(o)this.options.duration=0;else{u&&u(ju(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Te=(t,e,n)=>t+(e-t)*n;function Qc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function ok({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=Qc(u,a,t+1/3),s=Qc(u,a,t),o=Qc(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function eu(t,e){return n=>n>0?e:t}const Yc=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ak=[_d,Fr,ki],lk=t=>ak.find(e=>e.test(t));function rv(t){const e=lk(t);if(!e)return!1;let n=e.parse(t);return e===ki&&(n=ok(n)),n}const iv=(t,e)=>{const n=rv(t),r=rv(e);if(!n||!r)return eu(t,e);const i={...n};return s=>(i.red=Yc(n.red,r.red,s),i.green=Yc(n.green,r.green,s),i.blue=Yc(n.blue,r.blue,s),i.alpha=Te(n.alpha,r.alpha,s),Fr.transform(i))},uk=(t,e)=>n=>e(t(n)),ia=(...t)=>t.reduce(uk),Sd=new Set(["none","hidden"]);function ck(t,e){return Sd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function hk(t,e){return n=>Te(t,e,n)}function bp(t){return typeof t=="number"?hk:typeof t=="string"?dp(t)?eu:st.test(t)?iv:pk:Array.isArray(t)?LT:typeof t=="object"?st.test(t)?iv:dk:eu}function LT(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>bp(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function dk(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=bp(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function fk(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const pk=(t,e)=>{const n=mr.createTransformer(e),r=$o(t),i=$o(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Sd.has(t)&&!i.values.length||Sd.has(e)&&!r.values.length?ck(t,e):ia(LT(fk(r,i),i.values),n):eu(t,e)};function MT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Te(t,e,n):bp(t)(t,e)}const mk=5;function jT(t,e,n){const r=Math.max(e-mk,0);return cT(n-t(r),e-r)}const Ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xc=.001;function gk({duration:t=Ie.duration,bounce:e=Ie.bounce,velocity:n=Ie.velocity,mass:r=Ie.mass}){let i,s,o=1-e;o=Nn(Ie.minDamping,Ie.maxDamping,o),t=Nn(Ie.minDuration,Ie.maxDuration,In(t)),o<1?(i=c=>{const h=c*o,f=h*t,m=h-n,_=xd(c,o),S=Math.exp(-f);return Xc-m/_*S},s=c=>{const f=c*o*t,m=f*n+n,_=Math.pow(o,2)*Math.pow(c,2)*t,S=Math.exp(-f),I=xd(Math.pow(c,2),o);return(-i(c)+Xc>0?-1:1)*((m-_)*S)/I}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-Xc+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,u=vk(i,s,a);if(t=An(t),isNaN(u))return{stiffness:Ie.stiffness,damping:Ie.damping,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const yk=12;function vk(t,e,n){let r=n;for(let i=1;i<yk;i++)r=r-t(r)/e(r);return r}function xd(t,e){return t*Math.sqrt(1-e*e)}const _k=["duration","bounce"],wk=["stiffness","damping","mass"];function sv(t,e){return e.some(n=>t[n]!==void 0)}function Ek(t){let e={velocity:Ie.velocity,stiffness:Ie.stiffness,damping:Ie.damping,mass:Ie.mass,isResolvedFromDuration:!1,...t};if(!sv(t,wk)&&sv(t,_k))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Nn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ie.mass,stiffness:i,damping:s}}else{const n=gk(t);e={...e,...n,mass:Ie.mass},e.isResolvedFromDuration=!0}return e}function OT(t=Ie.visualDuration,e=Ie.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:u,damping:c,mass:h,duration:f,velocity:m,isResolvedFromDuration:_}=Ek({...n,velocity:-In(n.velocity||0)}),S=m||0,I=c/(2*Math.sqrt(u*h)),P=o-s,E=In(Math.sqrt(u/h)),v=Math.abs(P)<5;r||(r=v?Ie.restSpeed.granular:Ie.restSpeed.default),i||(i=v?Ie.restDelta.granular:Ie.restDelta.default);let w;if(I<1){const V=xd(E,I);w=j=>{const x=Math.exp(-I*E*j);return o-x*((S+I*E*P)/V*Math.sin(V*j)+P*Math.cos(V*j))}}else if(I===1)w=V=>o-Math.exp(-E*V)*(P+(S+E*P)*V);else{const V=E*Math.sqrt(I*I-1);w=j=>{const x=Math.exp(-I*E*j),y=Math.min(V*j,300);return o-x*((S+I*E*P)*Math.sinh(y)+V*P*Math.cosh(y))/V}}const N={calculatedDuration:_&&f||null,next:V=>{const j=w(V);if(_)a.done=V>=f;else{let x=0;I<1&&(x=V===0?An(S):jT(w,V,j));const y=Math.abs(x)<=r,A=Math.abs(o-j)<=i;a.done=y&&A}return a.value=a.done?o:j,a},toString:()=>{const V=Math.min(nT(N),gd),j=rT(x=>N.next(V*x).value,V,30);return V+"ms "+j}};return N}function ov({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},_=y=>a!==void 0&&y<a||u!==void 0&&y>u,S=y=>a===void 0?u:u===void 0||Math.abs(a-y)<Math.abs(u-y)?a:u;let I=n*e;const P=f+I,E=o===void 0?P:o(P);E!==P&&(I=E-f);const v=y=>-I*Math.exp(-y/r),w=y=>E+v(y),N=y=>{const A=v(y),C=w(y);m.done=Math.abs(A)<=c,m.value=m.done?E:C};let V,j;const x=y=>{_(m.value)&&(V=y,j=OT({keyframes:[m.value,S(m.value)],velocity:jT(w,y,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return x(0),{calculatedDuration:null,next:y=>{let A=!1;return!j&&V===void 0&&(A=!0,N(y),x(y)),V!==void 0&&y>=V?j.next(y-V):(!A&&N(y),m)}}}const Tk=ra(.42,0,1,1),Sk=ra(0,0,.58,1),FT=ra(.42,0,.58,1),xk=t=>Array.isArray(t)&&typeof t[0]!="number",Ak={linear:kt,easeIn:Tk,easeInOut:FT,easeOut:Sk,circIn:Cp,circInOut:_T,circOut:vT,backIn:Ip,backInOut:gT,backOut:mT,anticipate:yT},av=t=>{if(Ep(t)){ME(t.length===4);const[e,n,r,i]=t;return ra(e,n,r,i)}else if(typeof t=="string")return Ak[t];return t};function Ik(t,e,n){const r=[],i=n||MT,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||kt:e;a=ia(u,a)}r.push(a)}return r}function Ck(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(ME(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Ik(e,r,i),u=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=Ji(t[f],t[f+1],h);return a[f](m)};return n?h=>c(Nn(t[0],t[s-1],h)):c}function Pk(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ji(0,e,r);t.push(Te(n,1,i))}}function Rk(t){const e=[0];return Pk(e,t.length-1),e}function kk(t,e){return t.map(n=>n*e)}function Nk(t,e){return t.map(()=>e||FT).splice(0,t.length-1)}function tu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=xk(r)?r.map(av):av(r),s={done:!1,value:e[0]},o=kk(n&&n.length===e.length?n:Rk(e),t),a=Ck(o,e,{ease:Array.isArray(i)?i:Nk(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const bk=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ye.update(e,!0),stop:()=>pr(e),now:()=>Ke.isProcessing?Ke.timestamp:cn.now()}},Vk={decay:ov,inertia:ov,tween:tu,keyframes:tu,spring:OT},Dk=t=>t/100;class Vp extends DT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Np,a=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=wp(n)?n:Vk[n]||tu;let u,c;a!==tu&&typeof e[0]!="number"&&(u=ia(Dk,MT(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=nT(h));const{calculatedDuration:f}=h,m=f+i,_=m*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:m,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:y}=this.options;return{done:!0,value:y[y.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:c,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:m,repeat:_,repeatType:S,repeatDelay:I,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-m*(this.speed>=0?1:-1),v=this.speed>=0?E<0:E>h;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let w=this.currentTime,N=s;if(_){const y=Math.min(this.currentTime,h)/f;let A=Math.floor(y),C=y%1;!C&&y>=1&&(C=1),C===1&&A--,A=Math.min(A,_+1),!!(A%2)&&(S==="reverse"?(C=1-C,I&&(C-=I/f)):S==="mirror"&&(N=o)),w=Nn(0,1,C)*f}const V=v?{done:!1,value:u[0]}:N.next(w);a&&(V.value=a(V.value));let{done:j}=V;!v&&c!==null&&(j=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return x&&i!==void 0&&(V.value=ju(u,this.options,i)),P&&P(V.value),x&&this.finish(),V}get duration(){const{resolved:e}=this;return e?In(e.calculatedDuration):0}get time(){return In(this.currentTime)}set time(e){e=An(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=In(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=bk,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Lk=new Set(["opacity","clipPath","filter","transform"]);function Mk(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=sT(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const jk=sp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nu=10,Ok=2e4;function Fk(t){return wp(t.type)||t.type==="spring"||!iT(t.ease)}function Uk(t,e){const n=new Vp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Ok;)r=n.sample(s),i.push(r.value),s+=nu;return{times:void 0,keyframes:i,duration:s-nu,ease:"linear"}}const UT={anticipate:yT,backInOut:gT,circInOut:_T};function Bk(t){return t in UT}class lv extends DT{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new VT(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:u,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Zl()&&Bk(s)&&(s=UT[s]),Fk(this.options)){const{onComplete:f,onUpdate:m,motionValue:_,element:S,...I}=this.options,P=Uk(e,I);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,i=P.times,s=P.ease,o="keyframes"}const h=Mk(a.owner.current,u,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(qy(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;a.set(ju(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return In(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return In(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=An(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return kt;const{animation:r}=n;qy(r,e)}return kt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:f,element:m,..._}=this.options,S=new Vp({..._,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),I=An(this.time);c.setWithVelocity(S.sample(I-nu).value,S.sample(I).value,nu)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=n.owner.getProps();return jk()&&r&&Lk.has(r)&&!u&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const $k={type:"spring",stiffness:500,damping:25,restSpeed:10},zk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Wk={type:"keyframes",duration:.8},Hk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qk=(t,{keyframes:e})=>e.length>2?Wk:si.has(t)?t.startsWith("scale")?zk(e[1]):$k:Hk;function Kk({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const Dp=(t,e,n,r={},i,s)=>o=>{const a=_p(r,t)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-An(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Kk(a)||(h={...h,...qk(t,h)}),h.duration&&(h.duration=An(h.duration)),h.repeatDelay&&(h.repeatDelay=An(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const m=ju(h.keyframes,a);if(m!==void 0)return ye.update(()=>{h.onUpdate(m),h.onComplete()}),new dR([])}return!s&&lv.supports(h)?new lv(h):new Vp(h)};function Gk({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function BT(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in u){const m=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),_=u[f];if(_===void 0||h&&Gk(h,f))continue;const S={delay:n,..._p(o||{},f)};let I=!1;if(window.MotionHandoffAnimation){const E=hT(t);if(E){const v=window.MotionHandoffAnimation(E,f,ye);v!==null&&(S.startTime=v,I=!0)}}vd(t,f),m.start(Dp(f,m,_,t.shouldReduceMotion&&uT.has(f)?{type:!1}:S,t,I));const P=m.animation;P&&c.push(P)}return a&&Promise.all(c).then(()=>{ye.update(()=>{a&&IR(t,a)})}),c}function Ad(t,e,n={}){var r;const i=Mu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(BT(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=s;return Qk(t,e,h+c,f,m,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[c,h]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function Qk(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Yk).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Ad(c,e,{...s,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Yk(t,e){return t.sortNodePosition(e)}function Xk(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Ad(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Ad(t,e,n);else{const i=typeof e=="function"?Mu(t,e,n.custom):e;r=Promise.all(BT(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Jk=ap.length;function $T(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$T(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Jk;n++){const r=ap[n],i=t.props[r];(Fo(i)||i===!1)&&(e[r]=i)}return e}const Zk=[...op].reverse(),eN=op.length;function tN(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Xk(t,n,r)))}function nN(t){let e=tN(t),n=uv(),r=!0;const i=u=>(c,h)=>{var f;const m=Mu(t,h,u==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:_,transitionEnd:S,...I}=m;c={...c,...I,...S}}return c};function s(u){e=u(t)}function o(u){const{props:c}=t,h=$T(t.parent)||{},f=[],m=new Set;let _={},S=1/0;for(let P=0;P<eN;P++){const E=Zk[P],v=n[E],w=c[E]!==void 0?c[E]:h[E],N=Fo(w),V=E===u?v.isActive:null;V===!1&&(S=P);let j=w===h[E]&&w!==c[E]&&N;if(j&&r&&t.manuallyAnimateOnMount&&(j=!1),v.protectedKeys={..._},!v.isActive&&V===null||!w&&!v.prevProp||Du(w)||typeof w=="boolean")continue;const x=rN(v.prevProp,w);let y=x||E===u&&v.isActive&&!j&&N||P>S&&N,A=!1;const C=Array.isArray(w)?w:[w];let b=C.reduce(i(E),{});V===!1&&(b={});const{prevResolvedValues:D={}}=v,R={...D,...b},he=de=>{y=!0,m.has(de)&&(A=!0,m.delete(de)),v.needsAnimating[de]=!0;const $=t.getValue(de);$&&($.liveStyle=!1)};for(const de in R){const $=b[de],G=D[de];if(_.hasOwnProperty(de))continue;let Q=!1;md($)&&md(G)?Q=!tT($,G):Q=$!==G,Q?$!=null?he(de):m.add(de):$!==void 0&&m.has(de)?he(de):v.protectedKeys[de]=!0}v.prevProp=w,v.prevResolvedValues=b,v.isActive&&(_={..._,...b}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(j&&x)||A)&&f.push(...C.map(de=>({animation:de,options:{type:E}})))}if(m.size){const P={};m.forEach(E=>{const v=t.getBaseTarget(E),w=t.getValue(E);w&&(w.liveStyle=!0),P[E]=v??null}),f.push({animation:P})}let I=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(f):Promise.resolve()}function a(u,c){var h;if(n[u].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var _;return(_=m.animationState)===null||_===void 0?void 0:_.setActive(u,c)}),n[u].isActive=c;const f=o(u);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=uv(),r=!0}}}function rN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!tT(e,t):!1}function Nr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uv(){return{animate:Nr(!0),whileInView:Nr(),whileHover:Nr(),whileTap:Nr(),whileDrag:Nr(),whileFocus:Nr(),exit:Nr()}}class xr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class iN extends xr{constructor(e){super(e),e.animationState||(e.animationState=nN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Du(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let sN=0;class oN extends xr{constructor(){super(...arguments),this.id=sN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const aN={animation:{Feature:iN},exit:{Feature:oN}};function zo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function sa(t){return{point:{x:t.pageX,y:t.pageY}}}const lN=t=>e=>Tp(e)&&t(e,sa(e));function co(t,e,n,r){return zo(t,e,lN(n),r)}const cv=(t,e)=>Math.abs(t-e);function uN(t,e){const n=cv(t.x,e.x),r=cv(t.y,e.y);return Math.sqrt(n**2+r**2)}class zT{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Zc(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,_=uN(f.offset,{x:0,y:0})>=3;if(!m&&!_)return;const{point:S}=f,{timestamp:I}=Ke;this.history.push({...S,timestamp:I});const{onStart:P,onMove:E}=this.handlers;m||(P&&P(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Jc(m,this.transformPagePoint),ye.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:_,onSessionEnd:S,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Zc(f.type==="pointercancel"?this.lastMoveEventInfo:Jc(m,this.transformPagePoint),this.history);this.startEvent&&_&&_(f,P),S&&S(f,P)},!Tp(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=sa(e),a=Jc(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=Ke;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Zc(a,this.history)),this.removeListeners=ia(co(this.contextWindow,"pointermove",this.handlePointerMove),co(this.contextWindow,"pointerup",this.handlePointerUp),co(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pr(this.updatePoint)}}function Jc(t,e){return e?{point:e(t.point)}:t}function hv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Zc({point:t},e){return{point:t,delta:hv(t,WT(e)),offset:hv(t,cN(e)),velocity:hN(e,.1)}}function cN(t){return t[0]}function WT(t){return t[t.length-1]}function hN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=WT(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>An(e)));)n--;if(!r)return{x:0,y:0};const s=In(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const HT=1e-4,dN=1-HT,fN=1+HT,qT=.01,pN=0-qT,mN=0+qT;function bt(t){return t.max-t.min}function gN(t,e,n){return Math.abs(t-e)<=n}function dv(t,e,n,r=.5){t.origin=r,t.originPoint=Te(e.min,e.max,t.origin),t.scale=bt(n)/bt(e),t.translate=Te(n.min,n.max,t.origin)-t.originPoint,(t.scale>=dN&&t.scale<=fN||isNaN(t.scale))&&(t.scale=1),(t.translate>=pN&&t.translate<=mN||isNaN(t.translate))&&(t.translate=0)}function ho(t,e,n,r){dv(t.x,e.x,n.x,r?r.originX:void 0),dv(t.y,e.y,n.y,r?r.originY:void 0)}function fv(t,e,n){t.min=n.min+e.min,t.max=t.min+bt(e)}function yN(t,e,n){fv(t.x,e.x,n.x),fv(t.y,e.y,n.y)}function pv(t,e,n){t.min=e.min-n.min,t.max=t.min+bt(e)}function fo(t,e,n){pv(t.x,e.x,n.x),pv(t.y,e.y,n.y)}function vN(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Te(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Te(n,t,r.max):Math.min(t,n)),t}function mv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _N(t,{top:e,left:n,bottom:r,right:i}){return{x:mv(t.x,n,i),y:mv(t.y,e,r)}}function gv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function wN(t,e){return{x:gv(t.x,e.x),y:gv(t.y,e.y)}}function EN(t,e){let n=.5;const r=bt(t),i=bt(e);return i>r?n=Ji(e.min,e.max-r,t.min):r>i&&(n=Ji(t.min,t.max-i,e.min)),Nn(0,1,n)}function TN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Id=.35;function SN(t=Id){return t===!1?t=0:t===!0&&(t=Id),{x:yv(t,"left","right"),y:yv(t,"top","bottom")}}function yv(t,e,n){return{min:vv(t,e),max:vv(t,n)}}function vv(t,e){return typeof t=="number"?t:t[e]||0}const _v=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ni=()=>({x:_v(),y:_v()}),wv=()=>({min:0,max:0}),ke=()=>({x:wv(),y:wv()});function Mt(t){return[t("x"),t("y")]}function KT({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function AN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function eh(t){return t===void 0||t===1}function Cd({scale:t,scaleX:e,scaleY:n}){return!eh(t)||!eh(e)||!eh(n)}function Dr(t){return Cd(t)||GT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function GT(t){return Ev(t.x)||Ev(t.y)}function Ev(t){return t&&t!=="0%"}function ru(t,e,n){const r=t-n,i=e*r;return n+i}function Tv(t,e,n,r,i){return i!==void 0&&(t=ru(t,i,r)),ru(t,n,r)+e}function Pd(t,e=0,n=1,r,i){t.min=Tv(t.min,e,n,r,i),t.max=Tv(t.max,e,n,r,i)}function QT(t,{x:e,y:n}){Pd(t.x,e.translate,e.scale,e.originPoint),Pd(t.y,n.translate,n.scale,n.originPoint)}const Sv=.999999999999,xv=1.0000000000001;function IN(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Vi(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,QT(t,o)),r&&Dr(s.latestValues)&&Vi(t,s.latestValues))}e.x<xv&&e.x>Sv&&(e.x=1),e.y<xv&&e.y>Sv&&(e.y=1)}function bi(t,e){t.min=t.min+e,t.max=t.max+e}function Av(t,e,n,r,i=.5){const s=Te(t.min,t.max,i);Pd(t,e,n,s,r)}function Vi(t,e){Av(t.x,e.x,e.scaleX,e.scale,e.originX),Av(t.y,e.y,e.scaleY,e.scale,e.originY)}function YT(t,e){return KT(AN(t.getBoundingClientRect(),e))}function CN(t,e,n){const r=YT(t,n),{scroll:i}=e;return i&&(bi(r.x,i.offset.x),bi(r.y,i.offset.y)),r}const XT=({current:t})=>t?t.ownerDocument.defaultView:null,PN=new WeakMap;class RN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ke(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sa(h).point)},s=(h,f)=>{const{drag:m,dragPropagation:_,onDragStart:S}=this.getProps();if(m&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ER(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mt(P=>{let E=this.getAxisMotionValue(P).get()||0;if(un.test(E)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[P];w&&(E=bt(w)*(parseFloat(E)/100))}}this.originPoint[P]=E}),S&&ye.postRender(()=>S(h,f)),vd(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:S,onDrag:I}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:P}=f;if(_&&this.currentDirection===null){this.currentDirection=kN(P),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",f.point,P),this.updateAxis("y",f.point,P),this.visualElement.render(),I&&I(h,f)},a=(h,f)=>this.stop(h,f),u=()=>Mt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new zT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:XT(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ye.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Xa(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=vN(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ri(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=_N(i.layoutBox,n):this.constraints=!1,this.elastic=SN(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Mt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=TN(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ri(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=CN(r,i.root,this.visualElement.getTransformPagePoint());let o=wN(i.layout.layoutBox,s);if(n){const a=n(xN(o));this.hasMutatedConstraints=!!a,a&&(o=KT(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Mt(h=>{if(!Xa(h,n,this.currentDirection))return;let f=u&&u[h]||{};o&&(f={min:0,max:0});const m=i?200:1e6,_=i?40:1e7,S={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,S)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return vd(this.visualElement,e),r.start(Dp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Mt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Mt(n=>{const{drag:r}=this.getProps();if(!Xa(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Te(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ri(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=EN({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Mt(o=>{if(!Xa(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Te(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;PN.set(this.visualElement,this);const e=this.visualElement.current,n=co(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ri(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ye.read(r);const o=zo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Mt(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Id,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Xa(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function kN(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class NN extends xr{constructor(e){super(e),this.removeGroupControls=kt,this.removeListeners=kt,this.controls=new RN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iv=t=>(e,n)=>{t&&ye.postRender(()=>t(e,n))};class bN extends xr{constructor(){super(...arguments),this.removePointerDownListener=kt}onPointerDown(e){this.session=new zT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Iv(e),onStart:Iv(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ye.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=co(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _l={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(q.test(t))t=parseFloat(t);else return t;const n=Cv(t,e.target.x),r=Cv(t,e.target.y);return`${n}% ${r}%`}},VN={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=mr.parse(t);if(i.length>5)return r;const s=mr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const c=Te(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class DN extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;eR(LN),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),_l.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ye.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),up.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JT(t){const[e,n]=DE(),r=k.useContext(tp);return p.jsx(DN,{...t,layoutGroup:r,switchLayoutGroup:k.useContext($E),isPresent:e,safeToRemove:n})}const LN={borderRadius:{...Bs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bs,borderTopRightRadius:Bs,borderBottomLeftRadius:Bs,borderBottomRightRadius:Bs,boxShadow:VN};function MN(t,e,n){const r=ut(t)?t:Bo(t);return r.start(Dp("",r,e,n)),r.animation}function jN(t){return t instanceof SVGElement&&t.tagName!=="svg"}const ON=(t,e)=>t.depth-e.depth;class FN{constructor(){this.children=[],this.isDirty=!1}add(e){Sp(this.children,e),this.isDirty=!0}remove(e){xp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ON),this.isDirty=!1,this.children.forEach(e)}}function UN(t,e){const n=cn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(pr(r),t(s-e))};return ye.read(r,!0),()=>pr(r)}const ZT=["TopLeft","TopRight","BottomLeft","BottomRight"],BN=ZT.length,Pv=t=>typeof t=="string"?parseFloat(t):t,Rv=t=>typeof t=="number"||q.test(t);function $N(t,e,n,r,i,s){i?(t.opacity=Te(0,n.opacity!==void 0?n.opacity:1,zN(r)),t.opacityExit=Te(e.opacity!==void 0?e.opacity:1,0,WN(r))):s&&(t.opacity=Te(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<BN;o++){const a=`border${ZT[o]}Radius`;let u=kv(e,a),c=kv(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Rv(u)===Rv(c)?(t[a]=Math.max(Te(Pv(u),Pv(c),r),0),(un.test(c)||un.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Te(e.rotate||0,n.rotate||0,r))}function kv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const zN=eS(0,.5,vT),WN=eS(.5,.95,kt);function eS(t,e,n){return r=>r<t?0:r>e?1:n(Ji(t,e,r))}function Nv(t,e){t.min=e.min,t.max=e.max}function Lt(t,e){Nv(t.x,e.x),Nv(t.y,e.y)}function bv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Vv(t,e,n,r,i){return t-=e,t=ru(t,1/n,r),i!==void 0&&(t=ru(t,1/i,r)),t}function HN(t,e=0,n=1,r=.5,i,s=t,o=t){if(un.test(e)&&(e=parseFloat(e),e=Te(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Te(s.min,s.max,r);t===s&&(a-=e),t.min=Vv(t.min,e,n,a,i),t.max=Vv(t.max,e,n,a,i)}function Dv(t,e,[n,r,i],s,o){HN(t,e[n],e[r],e[i],e.scale,s,o)}const qN=["x","scaleX","originX"],KN=["y","scaleY","originY"];function Lv(t,e,n,r){Dv(t.x,e,qN,n?n.x:void 0,r?r.x:void 0),Dv(t.y,e,KN,n?n.y:void 0,r?r.y:void 0)}function Mv(t){return t.translate===0&&t.scale===1}function tS(t){return Mv(t.x)&&Mv(t.y)}function jv(t,e){return t.min===e.min&&t.max===e.max}function GN(t,e){return jv(t.x,e.x)&&jv(t.y,e.y)}function Ov(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function nS(t,e){return Ov(t.x,e.x)&&Ov(t.y,e.y)}function Fv(t){return bt(t.x)/bt(t.y)}function Uv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class QN{constructor(){this.members=[]}add(e){Sp(this.members,e),e.scheduleRender()}remove(e){if(xp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YN(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:m,skewX:_,skewY:S}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),_&&(r+=`skewX(${_}deg) `),S&&(r+=`skewY(${S}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const Lr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qs=typeof window<"u"&&window.MotionDebug!==void 0,th=["","X","Y","Z"],XN={visibility:"hidden"},Bv=1e3;let JN=0;function nh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function rS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ye,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&rS(r)}function iS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=JN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qs&&(Lr.totalNodes=Lr.resolvedTargetDeltas=Lr.recalculatedProjection=0),this.nodes.forEach(tb),this.nodes.forEach(ob),this.nodes.forEach(ab),this.nodes.forEach(nb),Qs&&window.MotionDebug.record(Lr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new FN)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ap),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jN(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=UN(m,250),_l.hasAnimatedSinceResize&&(_l.hasAnimatedSinceResize=!1,this.nodes.forEach(zv))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||h.getDefaultTransition()||db,{onLayoutAnimationStart:P,onLayoutAnimationComplete:E}=h.getProps(),v=!this.targetLayout||!nS(this.targetLayout,S)||_,w=!m&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const N={..._p(I,"layout"),onPlay:P,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else m||zv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lb),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($v);return}this.isUpdating||this.nodes.forEach(ib),this.isUpdating=!1,this.nodes.forEach(sb),this.nodes.forEach(ZN),this.nodes.forEach(eb),this.clearAllSnapshots();const a=cn.now();Ke.delta=Nn(0,1e3/60,a-Ke.timestamp),Ke.timestamp=a,Ke.isProcessing=!0,qc.update.process(Ke),qc.preRender.process(Ke),qc.render.process(Ke),Ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,up.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rb),this.sharedNodes.forEach(ub)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ke(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!tS(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Dr(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),fb(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ke();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(pb))){const{scroll:h}=this.root;h&&(bi(u.x,h.offset.x),bi(u.y,h.offset.y))}return u}removeElementScroll(o){var a;const u=ke();if(Lt(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Lt(u,o),bi(u.x,f.offset.x),bi(u.y,f.offset.y))}return u}applyTransform(o,a=!1){const u=ke();Lt(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Vi(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dr(h.latestValues)&&Vi(u,h.latestValues)}return Dr(this.latestValues)&&Vi(u,this.latestValues),u}removeTransform(o){const a=ke();Lt(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!Dr(c.latestValues))continue;Cd(c.latestValues)&&c.updateSnapshot();const h=ke(),f=c.measurePageBox();Lt(h,f),Lv(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Dr(this.latestValues)&&Lv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Ke.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ke(),this.relativeTargetOrigin=ke(),fo(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ke(),this.targetWithTransforms=ke()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lt(this.target,this.layout.layoutBox),QT(this.target,this.targetDelta)):Lt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ke(),this.relativeTargetOrigin=ke(),fo(this.relativeTargetOrigin,this.target,_.target),Lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qs&&Lr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Cd(this.parent.latestValues)||GT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ke.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Lt(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,_=this.treeScale.y;IN(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ke());const{target:S}=a;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bv(this.prevProjectionDelta.x,this.projectionDelta.x),bv(this.prevProjectionDelta.y,this.projectionDelta.y)),ho(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==_||!Uv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Uv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Qs&&Lr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ni(),this.projectionDelta=Ni(),this.projectionDeltaWithTransform=Ni()}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},f=Ni();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=ke(),_=u?u.source:void 0,S=this.layout?this.layout.source:void 0,I=_!==S,P=this.getStack(),E=!P||P.members.length<=1,v=!!(I&&!E&&this.options.crossfade===!0&&!this.path.some(hb));this.animationProgress=0;let w;this.mixTargetDelta=N=>{const V=N/1e3;Wv(f.x,o.x,V),Wv(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fo(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cb(this.relativeTarget,this.relativeTargetOrigin,m,V),w&&GN(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ke()),Lt(w,this.relativeTarget)),I&&(this.animationValues=h,$N(h,c,this.latestValues,V,v,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ye.update(()=>{_l.hasAnimatedSinceResize=!0,this.currentAnimation=MN(0,Bv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Bv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&sS(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||ke();const f=bt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const m=bt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Lt(a,u),Vi(a,h),ho(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new QN),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&nh("z",o,c,this.animationValues);for(let h=0;h<th.length;h++)nh(`rotate${th[h]}`,o,c,this.animationValues),nh(`skew${th[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return XN;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=yl(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=yl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Dr(this.latestValues)&&(I.transform=h?h({},""):"none",this.hasProjected=!1),I}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=YN(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:_,y:S}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const I in Jl){if(m[I]===void 0)continue;const{correct:P,applyTo:E}=Jl[I],v=c.transform==="none"?m[I]:P(m[I],f);if(E){const w=E.length;for(let N=0;N<w;N++)c[E[N]]=v}else c[I]=v}return this.options.layoutId&&(c.pointerEvents=f===this?yl(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach($v),this.root.sharedNodes.clear()}}}function ZN(t){t.updateLayout()}function eb(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Mt(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],_=bt(m);m.min=r[f].min,m.max=m.min+_}):sS(s,n.layoutBox,r)&&Mt(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],_=bt(r[f]);m.max=m.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+_)});const a=Ni();ho(a,r,n.layoutBox);const u=Ni();o?ho(u,t.applyTransform(i,!0),n.measuredBox):ho(u,r,n.layoutBox);const c=!tS(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:_}=f;if(m&&_){const S=ke();fo(S,n.layoutBox,m.layoutBox);const I=ke();fo(I,r,_.layoutBox),nS(S,I)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=S,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function tb(t){Qs&&Lr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function nb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rb(t){t.clearSnapshot()}function $v(t){t.clearMeasurements()}function ib(t){t.isLayoutDirty=!1}function sb(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ob(t){t.resolveTargetDelta()}function ab(t){t.calcProjection()}function lb(t){t.resetSkewAndRotation()}function ub(t){t.removeLeadSnapshot()}function Wv(t,e,n){t.translate=Te(e.translate,0,n),t.scale=Te(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Hv(t,e,n,r){t.min=Te(e.min,n.min,r),t.max=Te(e.max,n.max,r)}function cb(t,e,n,r){Hv(t.x,e.x,n.x,r),Hv(t.y,e.y,n.y,r)}function hb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const db={duration:.45,ease:[.4,0,.1,1]},qv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Kv=qv("applewebkit/")&&!qv("chrome/")?Math.round:kt;function Gv(t){t.min=Kv(t.min),t.max=Kv(t.max)}function fb(t){Gv(t.x),Gv(t.y)}function sS(t,e,n){return t==="position"||t==="preserve-aspect"&&!gN(Fv(e),Fv(n),.2)}function pb(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const mb=iS({attachResizeListener:(t,e)=>zo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rh={current:void 0},oS=iS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rh.current){const t=new mb({});t.mount(window),t.setOptions({layoutScroll:!0}),rh.current=t}return rh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),gb={pan:{Feature:bN},drag:{Feature:NN,ProjectionNode:oS,MeasureLayout:JT}};function Qv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ye.postRender(()=>s(e,sa(e)))}class yb extends xr{mount(){const{current:e}=this.node;e&&(this.unmount=gR(e,n=>(Qv(this.node,n,"Start"),r=>Qv(this.node,r,"End"))))}unmount(){}}class vb extends xr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ia(zo(this.node.current,"focus",()=>this.onFocus()),zo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yv(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ye.postRender(()=>s(e,sa(e)))}class _b extends xr{mount(){const{current:e}=this.node;e&&(this.unmount=wR(e,n=>(Yv(this.node,n,"Start"),(r,{success:i})=>Yv(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rd=new WeakMap,ih=new WeakMap,wb=t=>{const e=Rd.get(t.target);e&&e(t)},Eb=t=>{t.forEach(wb)};function Tb({root:t,...e}){const n=t||document;ih.has(n)||ih.set(n,{});const r=ih.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Eb,{root:t,...e})),r[i]}function Sb(t,e,n){const r=Tb(e);return Rd.set(t,n),r.observe(t),()=>{Rd.delete(t),r.unobserve(t)}}const xb={some:0,all:1};class Ab extends xr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:xb[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=c?h:f;m&&m(u)};return Sb(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Ib(e,n))&&this.startObserver()}unmount(){}}function Ib({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Cb={inView:{Feature:Ab},tap:{Feature:_b},focus:{Feature:vb},hover:{Feature:yb}},Pb={layout:{ProjectionNode:oS,MeasureLayout:JT}},kd={current:null},aS={current:!1};function Rb(){if(aS.current=!0,!!ip)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kd.current=t.matches;t.addListener(e),e()}else kd.current=!1}const kb=[...bT,st,mr],Nb=t=>kb.find(NT(t)),Xv=new WeakMap;function bb(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ut(i))t.addValue(r,i);else if(ut(s))t.addValue(r,Bo(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Bo(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Jv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Vb{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Np,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=cn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,ye.render(this.render,!1,!0))};const{latestValues:u,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Lu(n),this.isVariantNode=UE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in m){const S=m[_];u[_]!==void 0&&ut(S)&&S.set(u[_],!1)}}mount(e){this.current=e,Xv.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),aS.current||Rb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xv.delete(this.current),this.projection&&this.projection.unmount(),pr(this.notifyUpdate),pr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=si.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ye.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zi){const n=Zi[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ke()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Jv.length;r++){const i=Jv[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=bb(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bo(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(RT(i)||wT(i))?i=parseFloat(i):!Nb(i)&&mr.test(n)&&(i=IT(e,n)),this.setBaseTarget(e,ut(i)?i.get():i)),ut(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=hp(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ut(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ap),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class lS extends Vb{constructor(){super(...arguments),this.KeyframeResolver=VT}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ut(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Db(t){return window.getComputedStyle(t)}class Lb extends lS{constructor(){super(...arguments),this.type="html",this.renderInstance=QE}readValueFromInstance(e,n){if(si.has(n)){const r=kp(n);return r&&r.default||0}else{const r=Db(e),i=(qE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YT(e,n)}build(e,n,r){pp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return vp(e,n,r)}}class Mb extends lS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ke}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(si.has(n)){const r=kp(n);return r&&r.default||0}return n=YE.has(n)?n:lp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return ZE(e,n,r)}build(e,n,r){mp(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){XE(e,n,r,i)}mount(e){this.isSVGTag=yp(e.tagName),super.mount(e)}}const jb=(t,e)=>cp(t)?new Mb(e):new Lb(e,{allowProjection:t!==k.Fragment}),Ob=uR({...aN,...Cb,...gb,...Pb},jb),En=xP(Ob);function Fb({onToggle:t}){const[e,n]=k.useState(()=>document.documentElement.dataset.theme||localStorage.getItem("italy_theme")||"dark");return k.useEffect(()=>{document.documentElement.dataset.theme=e,localStorage.setItem("italy_theme",e)},[e]),p.jsxs("button",{className:"theme-toggle",onClick:()=>{const r=e==="dark"?"light":"dark";n(r),t==null||t(r)},"aria-label":"Toggle light/dark theme",title:"Toggle theme",children:[p.jsx("span",{className:"theme-dot","aria-hidden":"true"}),p.jsx("span",{className:"theme-label",children:e==="dark"?"Dark":"Light"})]})}const zt=[{id:1,slug:"rome",city:"Rome",region:"Lazio",badge:"Ancient Steps",fact:"Rome is a living timeline where ancient engineering, Renaissance ambition, and modern city life meet in one place. A standout example is the Colosseum, opened in 80 CE, where tens of thousands once gathered for massive public events and where Roman design still shapes stadium architecture today.",video:{type:"youtube",id:"WgP7b1Gz2Qk",title:"Rome in 2 minutes (quick vibe)"},game:{type:"quiz"},ethics:"Respect shared spaces: in historic places, small choices (trash, noise, touching) protect everyones experience."},{id:2,slug:"florence",city:"Florence",region:"Tuscany",badge:"Art Spotter",fact:"Florence is known for art, architecture, and workshopscraft traditions that still inspire makers today.",video:{type:"youtube",id:"Jp7fJwqQwWc",title:"Florence highlights (short)"},game:{type:"wordScramble",word:"FLORENCE"},ethics:"Give credit to creators: celebrate artists and makers by acknowledging their work and effort."},{id:3,slug:"venice",city:"Venice",region:"Veneto",badge:"Canal Navigator",fact:"Venice is built on water, with canals instead of roads in many areasnavigation is a daily art.",video:{type:"youtube",id:"xjV2n7k2p4U",title:"Venice in under 3 minutes"},game:{type:"pathTap"},ethics:"Move with awareness: crowded places work better when everyone takes turns and stays considerate."},{id:4,slug:"milan",city:"Milan",region:"Lombardy",badge:"Style Sense",fact:"Milan blends design, fashion, and innovationmany ideas start as sketches before they become real.",video:{type:"youtube",id:"w8Z2b9i9lE0",title:"Milan quick tour"},game:{type:"patternMemory"},ethics:"Respect differences: great teams make space for different styles, preferences, and strengths."},{id:5,slug:"naples",city:"Naples",region:"Campania",badge:"Pizza Origins",fact:"Naples is famous for classic Neapolitan pizzasimple ingredients, big flavor, and lots of tradition.",video:{type:"youtube",id:"7g1a0b3wXo8",title:"Neapolitan pizza basics (short)"},game:{type:"dragBuild"},ethics:"Share fairly: when resources are limited, taking turns and sharing keeps things fun for everyone."},{id:6,slug:"bologna",city:"Bologna",region:"Emilia-Romagna",badge:"Food Mapper",fact:"Bologna is known for rich food traditions and long portico walkwaysgreat for gathering and community.",video:{type:"youtube",id:"qC8b8n3dM6g",title:"Bologna food + city (short)"},game:{type:"ingredientMatch"},ethics:"Be inclusive: invite others ingood communities notice whos left out and make room."},{id:7,slug:"pisa",city:"Pisa",region:"Tuscany",badge:"Balance Master",fact:"The Leaning Tower of Pisa is famous worldwidean engineering story that became an icon.",video:{type:"youtube",id:"mW8oYjv7t9Q",title:"Pisa in 2 minutes"},game:{type:"tiltBalance"},ethics:"Do things safely: fun stunts are best when everyone stays aware of boundaries and safety."},{id:8,slug:"verona",city:"Verona",region:"Veneto",badge:"Language Light",fact:"Italian phrases can be simple and friendlysmall greetings go a long way in respectful culture.",video:{type:"youtube",id:"P6m6tB3cH5A",title:"Basic Italian greetings (short)"},game:{type:"phraseOrder"},ethics:"Speak with care: words can build trustchoose respectful language, especially under pressure."},{id:9,slug:"palermo",city:"Palermo",region:"Sicily",badge:"Market Rhythm",fact:"Sicily has lively markets and bold flavorsmusic and rhythm show up in daily life and celebrations.",video:{type:"youtube",id:"qX9fC2D2a1M",title:"Sicily vibes (short)"},game:{type:"rhythmTap"},ethics:"Cheer each other on: competition can still be kindsupport others while you play to win."},{id:10,slug:"amalfi",city:"Amalfi Coast",region:"Campania",badge:"Coastal Explorer",fact:"The Amalfi Coast is known for dramatic seaside towns and warm colorsclassic postcard Italy.",video:{type:"youtube",id:"5uY9xjz7c2w",title:"Amalfi Coast in under 3 min"},game:{type:"finalCode"},ethics:"Finish with integrity: winning feels best when you play fair and respect the rules."}];function Ub(t){return zt.find(e=>e.id===Number(t))}function Bb({state:t,setState:e,onToast:n}){const r=ii(),i=Object.keys(t.solved||{}).length,s=zt.length,o=Math.round(i/s*100);return p.jsx("header",{className:"topbar",children:p.jsxs("div",{className:"topbar-inner",children:[p.jsxs(Ue,{to:"/",className:"brand",children:[p.jsx("span",{className:"brand-mark","aria-hidden":"true",children:"IT"}),p.jsxs("div",{className:"brand-text",children:[p.jsx("div",{className:"brand-title",children:"Italy QR Quest"}),p.jsx("div",{className:"brand-sub",children:"Scan  Play  Learn  Respect"})]})]}),p.jsxs("div",{className:"topbar-actions",children:[p.jsxs("div",{className:"progress-pill",title:"Your progress",children:[p.jsxs("div",{className:"progress-pill-top",children:[p.jsxs("span",{className:"mono",children:[i,"/",s]}),p.jsx("span",{className:"muted",children:"found"})]}),p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-bar-fill",style:{width:`${o}%`}})})]}),p.jsx(Fb,{onToggle:a=>{e(u=>{const c={...u,theme:a};return localStorage.setItem("italy_theme",a),document.documentElement.dataset.theme=a,c}),r.pathname!=="/"&&(n==null||n("Theme updated.","ok"))}}),p.jsx(Ue,{to:"/leaderboard",className:"ghost-btn",children:"Leaderboard"})]})]})})}function $b({state:t}){const e=t.solved||{};return p.jsxs("section",{className:"card",children:[p.jsxs("div",{className:"card-head",children:[p.jsx("h2",{className:"card-title",children:"Your 110 Hunt Map"}),p.jsx("p",{className:"card-sub",children:"Scan a QR code to unlock the location page. Each location has one quick minigame."})]}),p.jsx("div",{className:"grid10",role:"list","aria-label":"Locations 1 through 10",children:zt.map(n=>{const r=!!e[n.id];return p.jsxs(Ue,{role:"listitem",to:`/loc/${n.id}`,className:`tile ${r?"done":""}`,"aria-label":`Location ${n.id}: ${n.city}. ${r?"Completed.":"Not completed."}`,children:[p.jsx("div",{className:"tile-num",children:n.id}),p.jsxs("div",{className:"tile-body",children:[p.jsx("div",{className:"tile-city",children:n.city}),p.jsx("div",{className:"tile-region",children:n.region})]}),p.jsx("div",{className:"tile-status",children:r?p.jsx("span",{className:"chip ok",children:"Found"}):p.jsx("span",{className:"chip",children:"Not found"})})]},n.id)})})]})}function wt({title:t,sub:e,children:n,right:r}){return p.jsxs("section",{className:"card",children:[p.jsxs("div",{className:"card-head",children:[p.jsxs("div",{children:[t&&p.jsx("h2",{className:"card-title",children:t}),e&&p.jsx("p",{className:"card-sub",children:e})]}),r?p.jsx("div",{className:"card-right",children:r}):null]}),p.jsx("div",{className:"card-body",children:n})]})}const zb=["Admin","Clinical","Day Services","Residential","Vanway","LARE"],Wb="/assets/rome-CisspKnt.jpg",Hb="/assets/florence-DlQYT3Cz.jpg",qb="/assets/venice-CtTbufwX.jpg",Kb="/assets/milian-BfjSg1WY.jpg",Gb="/assets/naples-B9ygHznp.jpg",Qb="/assets/amalficoast-DvW2VTTj.jpg",Ja=[{city:"Rome",image:Wb,mapQuery:"Rome Italy"},{city:"Florence",image:Hb,mapQuery:"Florence Italy"},{city:"Venice",image:qb,mapQuery:"Venice Italy"},{city:"Milan",image:Kb,mapQuery:"Milan Italy"},{city:"Naples",image:Gb,mapQuery:"Naples Italy"},{city:"Amalfi Coast",image:Qb,mapQuery:"Amalfi Coast Italy"}];function Yb({state:t,setState:e,onToast:n}){const r=Object.keys(t.solved||{}).length,i=zt.length,s=r===i,[o,a]=k.useState(0),u=k.useMemo(()=>{var m,_,S,I;return((_=(m=t.profile)==null?void 0:m.firstName)==null?void 0:_.trim())&&((I=(S=t.profile)==null?void 0:S.department)==null?void 0:I.trim())},[t.profile]),c=Ja[o],h=`https://www.google.com/maps?q=${encodeURIComponent(c.mapQuery)}&output=embed`;k.useEffect(()=>{const m=setInterval(()=>{a(_=>(_+1)%Ja.length)},7e3);return()=>clearInterval(m)},[]);function f(m,_){e(S=>({...S,profile:{...S.profile,[m]:_}}))}return p.jsxs("div",{className:"stack",children:[p.jsx("section",{className:"hero",children:p.jsxs(En.div,{className:"hero-card",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35,ease:[.2,.8,.2,1]},children:[p.jsx("div",{className:"flag-ribbon","aria-hidden":"true"}),p.jsx("div",{className:"hero-kicker",children:"Mobile scavenger hunt - 10 QR codes - Italy Edition"}),p.jsx("h1",{className:"hero-title",children:"Scan. Solve. Explore."}),p.jsxs("p",{className:"hero-lede",children:["Find all 10 Italy locations around the venue. Each QR unlocks a quick mini-game plus a fun fact. Complete all 10 to unlock the"," ",p.jsx("span",{className:"accent",children:"Italy Explorer"})," achievement."]}),p.jsxs("div",{className:"hero-row",children:[p.jsxs("div",{className:"hero-mini",children:[p.jsx("div",{className:"mini-label",children:"Your department"}),p.jsxs("select",{className:"input",value:t.profile.department||"",onChange:m=>f("department",m.target.value),"aria-label":"Select your department",children:[p.jsx("option",{value:"",disabled:!0,children:"Select..."}),zb.map(m=>p.jsx("option",{value:m,children:m},m))]})]}),p.jsxs("div",{className:"hero-mini",children:[p.jsx("div",{className:"mini-label",children:"First name"}),p.jsx("input",{className:"input",value:t.profile.firstName||"",onChange:m=>f("firstName",m.target.value.replace(/[^a-zA-Z\-\s]/g,"")),placeholder:"e.g., Geppetto",maxLength:18,"aria-label":"Enter your first name"})]})]}),p.jsxs("div",{className:"hero-actions",children:[p.jsx(Ue,{to:"/leaderboard",className:"btn",onClick:()=>{u||n==null||n("Add your name + department for the leaderboard.","warn")},children:"View Leaderboard"}),s?p.jsx(Ue,{to:"/certificate",className:"btn alt",children:"View Certificate"}):p.jsx("button",{className:"btn alt",onClick:()=>n==null?void 0:n("Scan a QR code to begin - or tap any location tile after your first scan.","ok"),children:"How to Start"}),p.jsxs("div",{className:"hero-progress",children:[p.jsxs("span",{className:"mono",children:[r,"/",i]})," ","completed"]})]}),p.jsxs("div",{className:"ethics-banner",role:"note","aria-label":"Ethics and respect note",children:[p.jsx("strong",{children:"Ethics & Respect:"})," Compete hard, stay kind. Take turns, encourage others, and keep shared spaces clean."]})]})}),p.jsxs("section",{className:"italy-spotlight card","aria-label":"Italy visual spotlight",children:[p.jsxs("div",{className:"card-head",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"card-title",children:"Feel Like You Are In Italy"}),p.jsx("p",{className:"card-sub",children:"Cinematic city moments and a live map spotlight to guide the adventure."})]}),p.jsx("div",{className:"chip strong",children:"Italian Flag Mode"})]}),p.jsxs("div",{className:"card-body italy-spotlight-body",children:[p.jsx("div",{className:"kenburns-stage",children:Ja.map((m,_)=>p.jsxs("figure",{className:`kenburns-slide ${_===o?"active":""}`,"aria-hidden":_!==o,children:[p.jsx("img",{src:m.image,alt:`${m.city}, Italy`,loading:"lazy"}),p.jsx("figcaption",{children:m.city})]},m.city))}),p.jsxs("div",{className:"map-panel",children:[p.jsxs("div",{className:"map-top",children:[p.jsxs("div",{className:"map-title",children:["City Spotlight: ",c.city]}),p.jsx("div",{className:"row wrap",children:Ja.map((m,_)=>p.jsx("button",{className:`chip-btn ${_===o?"active":""}`,onClick:()=>a(_),type:"button",children:m.city},m.city))})]}),p.jsx("iframe",{className:"map-embed",title:`${c.city} map`,src:h,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]})]})]}),p.jsx($b,{state:t}),p.jsxs(wt,{title:"How QR codes work",sub:"Each QR points to a location URL like /loc/3. When you finish the mini-game once, it stays unlocked (replay content anytime) but will not score again.",children:[p.jsxs("ul",{className:"bullets",children:[p.jsx("li",{children:"Scan a QR code with iPhone Camera or Android camera."}),p.jsx("li",{children:"Complete the mini-game to mark that location as Found."}),p.jsx("li",{children:"Complete all 10 to unlock Italy Explorer + submit to leaderboard."})]}),p.jsxs("div",{className:"row",children:[p.jsx(Ue,{to:"/admin/links",className:"ghost-btn",children:"Admin: Location Links"}),p.jsx(Ue,{to:"/leaderboard",className:"ghost-btn",children:"Leaderboard"})]})]})]})}function sh(t,e,n){return Math.max(e,Math.min(n,t))}function Xb({base:t=100,seconds:e=60,mistakes:n=0}){const r=sh(Math.round((60-e)*.7),0,40),i=sh(n*12,0,80);return sh(t+r-i,30,140)}function me(){return Date.now()}function Jb({videoId:t,title:e}){return p.jsx("div",{className:"video",children:p.jsx("iframe",{src:`https://www.youtube.com/embed/${t}?rel=0&modestbranding=1`,title:e||"YouTube video",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})})}function Zb({locked:t,onSolved:e}){const n=[{code:"FND-01",title:"Load Distribution",brief:"Cracks appear along the lower ellipse. Choose the best stabilization layer.",fact:"Roman engineers relied on travertine, tuff, and concrete systems to spread vertical and lateral load.",correct:"Reinforce with a travertine perimeter ring",options:["Suspend the structure from bronze cables","Reinforce with a travertine perimeter ring","Replace lower walls with timber braces","Use glass panels to reduce mass"]},{code:"ARC-02",title:"Crowd Throughput",brief:"You need faster ingress for a full event. Which design scales circulation safely?",fact:"Stacked arcades and vomitoria moved spectators efficiently through the amphitheater.",correct:"Expand radial corridors and vaulted arches",options:["Expand radial corridors and vaulted arches","Reduce entrances to improve control","Convert access points into ramps only","Close upper tiers during entry"]},{code:"ARE-03",title:"Arena Operations",brief:"Set transitions are too slow below stage level. Choose the authentic systems upgrade.",fact:"The hypogeum used chambers, trapdoors, and lift mechanisms for rapid scene changes.",correct:"Integrate hypogeum lift shafts and trapdoor routes",options:["Flood the arena to move scenery by raft","Integrate hypogeum lift shafts and trapdoor routes","Move all prep space to rooftop platforms","Remove underfloor compartments entirely"]},{code:"SEA-04",title:"Spectator Zoning",brief:"Sightlines are uneven. Pick the seating geometry that best fits the venue.",fact:"Tiered cavea seating optimized viewing angles while managing social and traffic zones.",correct:"Use tiered cavea sectors with dedicated access bands",options:["Use flat concentric benches with no aisles","Use tiered cavea sectors with dedicated access bands","Place premium seating only at arena floor","Randomize rows to avoid crowd clustering"]},{code:"ENV-05",title:"Heat Control",brief:"Afternoon heat is reducing comfort. Select the historically accurate mitigation.",fact:"The velarium was a retractable awning system stretched over the seating bowl.",correct:"Deploy a retractable velarium canopy",options:["Install a fixed marble dome roof","Deploy a retractable velarium canopy","Cover spectators with mirrored panels","Use oil torches for updraft cooling"]}];function r(x){const y=[...x];for(let A=y.length-1;A>0;A--){const C=Math.floor(Math.random()*(A+1));[y[A],y[C]]=[y[C],y[A]]}return y}const[i,s]=k.useState(0),[o,a]=k.useState(0),[u,c]=k.useState(100),[h,f]=k.useState(0),[m,_]=k.useState(""),[S,I]=k.useState(()=>n.map(x=>r(x.options))),P=k.useRef(me()),E=k.useRef(!1),v=Math.min(i,n.length),w=i<n.length?n[i]:null,N=Math.round(v/n.length*100);k.useEffect(()=>{if(!(t||E.current)&&i>=n.length){E.current=!0;const x=Math.round((me()-P.current)/1e3);e({seconds:x,mistakes:o})}},[i,t,o]);function V(x){if(!(t||!w)){if(x===w.correct){f(y=>y+1),_("Correct decision. Arena subsystem stabilized."),s(y=>y+1);return}a(y=>y+1),f(0),c(y=>Math.max(0,y-14)),_("Rejected. Structural model mismatch.")}}function j(){t||(P.current=me(),E.current=!1,s(0),a(0),c(100),f(0),_(""),I(n.map(x=>r(x.options))))}return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Colosseum Command: Structural Audit"}),p.jsx("p",{className:"game-q",children:"Complete 5 real engineering calls to commission Rome's arena. Choices are randomized each round."}),p.jsxs("div",{className:"rome-hud",children:[p.jsxs("div",{className:"rome-hud-chip",children:["Round ",Math.min(i+1,n.length),"/",n.length]}),p.jsxs("div",{className:"rome-hud-chip",children:["Integrity ",u,"%"]}),p.jsxs("div",{className:"rome-hud-chip",children:["Misses ",o]}),p.jsxs("div",{className:"rome-hud-chip",children:["Streak ",h]})]}),p.jsxs("div",{className:"rome-arena",children:[p.jsx("div",{className:"rome-ring",style:{"--rome-progress":`${N}%`},"aria-label":`Arena completion ${N}%`}),p.jsxs("div",{className:"rome-core",children:[p.jsx("div",{className:"rome-core-top",children:"Audit Progress"}),p.jsxs("div",{className:"rome-core-main",children:[v,"/5"]})]})]}),w?p.jsxs("div",{className:"rome-stage-card",children:[p.jsx("div",{className:"rome-stage-code",children:w.code}),p.jsx("div",{className:"rome-stage-title",children:w.title}),p.jsx("p",{className:"game-q",children:w.brief}),p.jsx("p",{className:"hint muted",children:w.fact}),p.jsx("div",{className:"rome-options",children:S[i].map(x=>p.jsx("button",{className:"rome-opt",onClick:()=>V(x),disabled:t,children:x},x))})]}):p.jsx("div",{className:"hint muted",children:"Audit complete. Rome unlocked."}),!!m&&!t&&p.jsx("div",{className:`hint ${m.startsWith("Rejected")?"warn":"muted"}`,children:m}),!t&&p.jsx("button",{className:"ghost-btn",onClick:j,children:"Restart Audit"})]})}function e2({word:t,locked:e,onSolved:n}){const r=[{title:"Stone Street Base",prompt:"Pick the surface that defines old Tuscan lanes.",fact:"Historic centers were built around durable stone paving and stepped streets.",correct:"Cobblestone terrace",options:["Cobblestone terrace","Plastic deck","Asphalt parking lot"]},{title:"Masonry Homes",prompt:"Choose the wall system common in 17th-century Italian hill towns.",fact:"Thick masonry walls kept homes cool in summer and stable over centuries.",correct:"Stone-and-plaster walls",options:["Stone-and-plaster walls","Mirror glass facade","Steel warehouse shell"]},{title:"Terracotta Roofline",prompt:"Select the roof material that gives villages their warm silhouette.",fact:"Terracotta tiles became a hallmark of central Italian architecture.",correct:"Terracotta tile roofs",options:["Terracotta tile roofs","Transparent acrylic roof","Flat aluminum canopy"]},{title:"Street Character",prompt:"Pick details that make the facade feel authentically Italian.",fact:"Shutters, arched openings, and small balconies define many historic streets.",correct:"Shutters and arched loggia",options:["Shutters and arched loggia","Neon sign wall","LED billboard strip"]},{title:"Village Landmark",prompt:"Choose the final element often seen above old town roofs.",fact:"A campanile (bell tower) and greenery complete the classic skyline.",correct:"Campanile tower and cypress",options:["Campanile tower and cypress","Satellite dish array","Airport radar mast"]}],[i,s]=k.useState(0),[o,a]=k.useState(0),[u,c]=k.useState(""),[h,f]=k.useState(!1),m=k.useRef(me()),_=k.useRef(!1),S=e?r.length:i,I=r[Math.min(i,r.length-1)];k.useEffect(()=>{if(!(e||_.current)&&i>=r.length){_.current=!0;const v=Math.round((me()-m.current)/1e3);n({seconds:v,mistakes:o})}},[i,o,e]);function P(v){if(!(e||h||i>=r.length)){if(v!==I.correct){a(w=>w+1),c("Not this one. Re-check the architectural clue.");return}if(i===r.length-1){c("Village complete."),s(w=>w+1);return}c("Correct. Historic layer added."),f(!0),setTimeout(()=>{s(w=>w+1),f(!1),c("")},420)}}function E(){e||(m.current=me(),_.current=!1,s(0),a(0),c(""),f(!1))}return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Build A Tuscan Village"}),p.jsx("p",{className:"game-q",children:"Create a 17th-century Italian streetscape in 5 stages. Choose the correct element each round."}),p.jsxs("div",{className:"hint muted",children:["Stage ",Math.min(i+1,r.length),"/",r.length," | Built: ",S,"/5 | Misses: ",o]}),p.jsxs("div",{className:"duomo-card","aria-label":"Tuscan village construction visual",children:[p.jsxs("svg",{className:"duomo-svg",viewBox:"0 0 360 240",role:"img","aria-label":"Tuscan village build progress",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"villaSky",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"0%",stopColor:"#7999bf"}),p.jsx("stop",{offset:"58%",stopColor:"#d7e6ef"}),p.jsx("stop",{offset:"100%",stopColor:"#f5d7ad"})]}),p.jsxs("linearGradient",{id:"villaWall",x1:"0",y1:"0",x2:"1",y2:"1",children:[p.jsx("stop",{offset:"0%",stopColor:"#efd9bc"}),p.jsx("stop",{offset:"100%",stopColor:"#caa27c"})]}),p.jsxs("linearGradient",{id:"villaRoof",x1:"0",y1:"0",x2:"1",y2:"1",children:[p.jsx("stop",{offset:"0%",stopColor:"#c66a45"}),p.jsx("stop",{offset:"100%",stopColor:"#8e452f"})]})]}),p.jsx("rect",{x:"0",y:"0",width:"360",height:"240",fill:"url(#villaSky)"}),p.jsx("path",{d:"M0 108 L42 86 L94 104 L138 80 L188 101 L244 74 L300 102 L360 82 L360 136 L0 136 Z",fill:"rgba(70,82,93,0.22)"}),p.jsx("circle",{cx:"290",cy:"44",r:"18",fill:"rgba(255,245,214,0.72)"}),p.jsx("path",{d:"M0 188 C62 170, 124 173, 194 188 C242 198, 298 194, 360 178 L360 240 L0 240 Z",fill:"#c8a07a"}),p.jsx("ellipse",{cx:"176",cy:"206",rx:"140",ry:"16",fill:"rgba(74,47,31,0.24)"}),p.jsx("path",{className:`duomo-piece foundation ${S>=1?"on":""}`,d:"M34 196 L332 196 L316 222 L18 222 Z"}),p.jsx("path",{className:`duomo-piece foundation ${S>=1?"on":""}`,d:"M24 190 L334 190 L326 196 L32 196 Z"}),p.jsx("rect",{className:`duomo-piece house ${S>=2?"on":""}`,x:"56",y:"128",width:"72",height:"62",rx:"2"}),p.jsx("rect",{className:`duomo-piece house ${S>=2?"on":""}`,x:"128",y:"118",width:"96",height:"72",rx:"2"}),p.jsx("rect",{className:`duomo-piece house ${S>=2?"on":""}`,x:"224",y:"132",width:"70",height:"58",rx:"2"}),p.jsx("path",{className:`duomo-piece roof ${S>=3?"on":""}`,d:"M52 128 L92 102 L132 128 Z"}),p.jsx("path",{className:`duomo-piece roof ${S>=3?"on":""}`,d:"M122 118 L176 86 L230 118 Z"}),p.jsx("path",{className:`duomo-piece roof ${S>=3?"on":""}`,d:"M220 132 L258 108 L296 132 Z"}),p.jsx("rect",{className:`duomo-piece chimney ${S>=3?"on":""}`,x:"196",y:"92",width:"10",height:"20",rx:"2"}),p.jsx("rect",{className:`duomo-piece shutter ${S>=4?"on":""}`,x:"72",y:"148",width:"10",height:"24",rx:"1"}),p.jsx("rect",{className:`duomo-piece shutter ${S>=4?"on":""}`,x:"100",y:"148",width:"10",height:"24",rx:"1"}),p.jsx("rect",{className:`duomo-piece shutter ${S>=4?"on":""}`,x:"146",y:"140",width:"12",height:"28",rx:"1"}),p.jsx("rect",{className:`duomo-piece shutter ${S>=4?"on":""}`,x:"194",y:"140",width:"12",height:"28",rx:"1"}),p.jsx("path",{className:`duomo-piece loggia ${S>=4?"on":""}`,d:"M154 190 L154 166 Q164 150 174 166 L174 190 Z"}),p.jsx("path",{className:`duomo-piece loggia ${S>=4?"on":""}`,d:"M178 190 L178 166 Q188 150 198 166 L198 190 Z"}),p.jsx("rect",{className:`duomo-piece tower ${S>=5?"on":""}`,x:"304",y:"92",width:"22",height:"98",rx:"2"}),p.jsx("rect",{className:`duomo-piece tower ${S>=5?"on":""}`,x:"308",y:"82",width:"14",height:"12",rx:"1"}),p.jsx("circle",{className:`duomo-piece tower ${S>=5?"on":""}`,cx:"315",cy:"104",r:"3"}),p.jsx("path",{className:`duomo-piece cypress ${S>=5?"on":""}`,d:"M38 190 C42 160, 42 136, 50 116 C58 136, 58 160, 62 190 Z"}),p.jsx("path",{className:`duomo-piece cypress ${S>=5?"on":""}`,d:"M288 190 C292 166, 292 146, 300 126 C308 146, 308 166, 312 190 Z"})]}),p.jsxs("div",{className:"duomo-overlay",children:[p.jsx("div",{className:"duomo-stage-title",children:i<r.length?I.title:"Village Completed"}),p.jsx("div",{className:"duomo-stage-fact",children:I.fact})]})]}),i<r.length?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"game-q",children:I.prompt}),p.jsx("div",{className:"duomo-options",children:I.options.map(v=>p.jsx("button",{className:"duomo-opt",onClick:()=>P(v),disabled:e||h,children:v},v))})]}):p.jsx("div",{className:"hint muted",children:"Florence complete. Location unlocked."}),!!u&&!e&&p.jsx("div",{className:`hint ${u.startsWith("Not")?"warn":"muted"}`,children:u}),!e&&p.jsx("button",{className:"ghost-btn",onClick:E,children:"Restart Build"}),p.jsxs("div",{className:"hint muted",children:["Reference token: ",t]})]})}function t2({locked:t,onSolved:e}){const n=[0,1,4,7,8],r={0:{x:18,y:18},1:{x:50,y:18},2:{x:82,y:18},3:{x:18,y:50},4:{x:50,y:50},5:{x:82,y:50},6:{x:18,y:82},7:{x:50,y:82},8:{x:82,y:82}},i=[[0,1],[1,2],[0,3],[1,4],[2,5],[3,4],[4,5],[3,6],[4,7],[5,8],[6,7],[7,8]],[s,o]=k.useState([]),[a,u]=k.useState(0),[c,h]=k.useState("Tap START, then follow the highlighted canal route to FINISH."),[f,m]=k.useState(!1),[_,S]=k.useState(!0),I=k.useRef(me()),P=k.useRef(null),E=Math.round(s.length/n.length*100),v=s.length<n.length?n[s.length]:null,w=s.length?s[s.length-1]:n[0],N=n.map(x=>`${r[x].x},${r[x].y}`).join(" ");function V(x){if(t)return;const y=s.length;if(x===n[y]){const A=[...s,x];if(o(A),A.length===n.length){h("Perfect route. You made it through the canals.");const C=Math.round((me()-I.current)/1e3);e({seconds:C,mistakes:a})}else{const C=n[A.length];h(`Nice move. Next canal stop: Tile ${C+1}.`)}}else u(A=>A+1),o([]),h("Wrong turn. Route reset to START."),m(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>m(!1),260)}function j(){o([]),h("Route reset. Tap START to begin again.")}return k.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]),p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Canal Navigation"}),p.jsx("p",{className:"game-q",children:"Venice uses canals like streets. Follow the highlighted water route from START to FINISH."}),p.jsxs("div",{className:"venice-route-card","aria-label":"Canal route map",children:[p.jsxs("div",{className:"venice-route-head",children:[p.jsx("div",{className:"venice-route-title",children:"Canal Route Map"}),p.jsx("button",{className:"ghost-btn venice-route-toggle",type:"button",disabled:t,onClick:()=>S(x=>!x),children:_?"Hide Route":"Show Route"})]}),p.jsx("p",{className:"venice-route-copy",children:"Water streets are highlighted in blue. Stay on the bright route to reach FINISH."}),p.jsx("div",{className:"venice-map-stage",children:p.jsxs("svg",{className:"venice-map",viewBox:"0 0 100 100",role:"img","aria-label":"Venice canal map and route",children:[i.map(([x,y])=>p.jsx("line",{className:"venice-map-canal",x1:r[x].x,y1:r[x].y,x2:r[y].x,y2:r[y].y},`${x}-${y}`)),_&&p.jsx("polyline",{className:"venice-map-route",points:N}),n.map((x,y)=>p.jsxs("g",{children:[p.jsx("circle",{className:"venice-map-stop",cx:r[x].x,cy:r[x].y,r:"4.2"}),p.jsx("text",{className:"venice-map-step",x:r[x].x,y:r[x].y+1.1,children:y+1})]},x))]})})]}),p.jsxs("div",{className:"venice-instructions","aria-label":"Canal navigation instructions",children:[p.jsx("div",{className:"venice-instructions-title",children:"How to play"}),p.jsxs("div",{className:"venice-instructions-list",children:[p.jsx("span",{children:"1. Tap the START tile first."}),p.jsx("span",{children:"2. Follow tiles in route order: 1, 2, 5, 8, 9."}),p.jsx("span",{children:"3. Wrong tile resets to START."})]})]}),p.jsxs("div",{className:`venice-grid-wrap ${f?"shake":""}`,children:[p.jsx("div",{className:"venice-grid-water","aria-hidden":"true"}),_&&p.jsxs("svg",{className:"venice-grid-route",viewBox:"0 0 100 100","aria-hidden":"true",children:[i.map(([x,y])=>p.jsx("line",{className:"venice-grid-canal",x1:r[x].x,y1:r[x].y,x2:r[y].x,y2:r[y].y},`grid-${x}-${y}`)),p.jsx("polyline",{className:"venice-grid-main-route",points:N})]}),p.jsx("div",{className:"venice-grid",children:Array.from({length:9}).map((x,y)=>{const A=s.includes(y),C=s.indexOf(y)+1,b=y===n[0],D=y===n[n.length-1],R=!t&&v===y,he=w===y,Wt=n.includes(y);return p.jsxs("button",{className:`venice-cell ${A?"on":""} ${b?"start":""} ${D?"end":""} ${R?"next":""} ${Wt?"route":""}`,onClick:()=>V(y),disabled:t,"aria-label":`Tile ${y+1}`,children:[p.jsx("span",{className:"venice-cell-id",children:y+1}),b&&p.jsx("span",{className:"venice-flag",children:"START"}),D&&p.jsx("span",{className:"venice-flag",children:"FINISH"}),A&&p.jsx("span",{className:"venice-step",children:C}),_&&Wt&&!A&&p.jsx("span",{className:"venice-route-dot","aria-hidden":"true"}),he&&p.jsx("span",{className:"venice-boat","aria-hidden":"true"})]},y)})})]}),p.jsxs("div",{className:"venice-progress","aria-label":"Route progress",children:[p.jsx("div",{className:"venice-progress-track",children:p.jsx("div",{className:"venice-progress-fill",style:{width:`${E}%`}})}),p.jsxs("div",{className:"venice-progress-meta",children:[p.jsxs("span",{className:"hint muted",children:["Progress: ",s.length,"/",n.length]}),!t&&v!==null&&p.jsxs("span",{className:"hint muted",children:["Next: Tile ",v+1]})]})]}),!t&&p.jsx("div",{className:`hint ${c.startsWith("Wrong")?"warn":"muted"}`,children:c}),!t&&a>0&&p.jsxs("div",{className:"hint warn",children:["Resets: ",a]}),p.jsx("button",{className:"btn",disabled:t,onClick:j,children:"Reset Route"})]})}function n2({locked:t,onSolved:e}){const n=[4,5,6,7,8],[r,i]=k.useState(1),[s,o]=k.useState(0),[a,u]=k.useState(()=>Math.floor(Math.random()*9)),[c,h]=k.useState(0),[f,m]=k.useState(!1),_=k.useRef(me()),S=k.useRef(null);function I(w){let N=Math.floor(Math.random()*9);for(;N===w;)N=Math.floor(Math.random()*9);return N}k.useEffect(()=>{if(t||f)return;const w=Math.max(320,900-r*90),N=setInterval(()=>{u(V=>I(V))},w);return()=>clearInterval(N)},[t,f,r]),k.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]);function P(){if(r>=n.length){const w=Math.round((me()-_.current)/1e3);e({seconds:w,mistakes:c});return}m(!0),S.current=setTimeout(()=>{i(w=>w+1),o(0),u(w=>I(w)),m(!1)},700)}function E(w){if(!(t||f)){if(w===a){o(N=>{const V=N+1;return V>=n[r-1]?(P(),n[r-1]):V}),u(N=>I(N));return}h(N=>N+1)}}const v=["linear-gradient(145deg, #6b7280, #4b5563)","linear-gradient(145deg, #0ea5e9, #0369a1)","linear-gradient(145deg, #22c55e, #15803d)","linear-gradient(145deg, #f97316, #c2410c)","linear-gradient(145deg, #eab308, #a16207)","linear-gradient(145deg, #a855f7, #7e22ce)","linear-gradient(145deg, #ef4444, #b91c1c)","linear-gradient(145deg, #14b8a6, #0f766e)","linear-gradient(145deg, #64748b, #334155)"];return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Duomo Light Sprint"}),p.jsx("p",{className:"game-q",children:"Tap the glowing window as it moves. Clear 5 rounds to unlock Milan."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(64px, 1fr))",gap:"10px",maxWidth:"320px",margin:"0 auto 12px"},children:Array.from({length:9}).map((w,N)=>{const V=N===a&&!f;return p.jsx("button",{onClick:()=>E(N),disabled:t||f,style:{aspectRatio:"1 / 1",borderRadius:"14px",border:V?"2px solid #f8fafc":"1px solid rgba(248,250,252,0.28)",background:V?v[N]:"linear-gradient(145deg, #111827, #1f2937)",boxShadow:V?"0 0 0 2px rgba(248,250,252,0.25), 0 0 20px rgba(56,189,248,0.35)":"inset 0 1px 0 rgba(248,250,252,0.04)",transform:V?"scale(1.03)":"scale(1)",transition:"all 120ms ease",cursor:t||f?"default":"pointer"},"aria-label":`Window ${N+1}`},N)})}),p.jsx("div",{style:{maxWidth:"320px",margin:"0 auto 10px"},children:p.jsx("div",{style:{height:"8px",borderRadius:"999px",background:"rgba(255,255,255,0.16)",overflow:"hidden"},children:p.jsx("div",{style:{height:"100%",width:`${Math.round(s/n[r-1]*100)}%`,background:"linear-gradient(90deg, #38bdf8, #22c55e)",transition:"width 120ms ease"}})})}),p.jsx("div",{className:"hint muted",children:t?"Completed":f?`Round ${r} complete. Next round...`:`Round ${r}/5  Hits: ${s}/${n[r-1]}`}),!t&&c>0&&p.jsxs("div",{className:"hint warn",children:["Misses: ",c]})]})}function r2({locked:t,onSolved:e}){const n=[{key:"List",label:"Create ingredient list",stage:"plan"},{key:"Budget",label:"Set budget",stage:"plan"},{key:"Shop",label:"Shop for ingredients",stage:"plan"},{key:"Prep",label:"Prep station",stage:"prep"},{key:"Dough",label:"Stretch dough",stage:"pizza"},{key:"Tomato",label:"Spread tomato sauce",stage:"pizza"},{key:"Mozzarella",label:"Add mozzarella",stage:"pizza"},{key:"Basil",label:"Finish with basil",stage:"pizza"},{key:"Preheat",label:"Preheat oven",stage:"oven"},{key:"Bake",label:"Cook pizza",stage:"oven"},{key:"Serve",label:"Ready to serve",stage:"finish"}],[r,i]=k.useState(()=>h(n.map(v=>v.key))),[s,o]=k.useState([]),[a,u]=k.useState(0),c=k.useRef(me());function h(v){const w=[...v];for(let N=w.length-1;N>0;N--){const V=Math.floor(Math.random()*(N+1));[w[N],w[V]]=[w[V],w[N]]}return w}function f(v){var N;if(t)return;const w=(N=n[s.length])==null?void 0:N.key;if(v===w){if(o(V=>[...V,v]),i(V=>V.filter(j=>j!==v)),s.length+1===n.length){const V=Math.round((me()-c.current)/1e3);e({seconds:V,mistakes:a})}return}u(V=>V+1)}function m(){t||(i(h(n.map(v=>v.key))),o([]),u(0))}function _(v){return s.includes(v)}const S=n[s.length],I=Math.round(s.length/n.length*100),P=[{top:"21%",left:"33%",w:"18%",h:"14%",rot:"8deg"},{top:"33%",left:"18%",w:"19%",h:"14%",rot:"-10deg"},{top:"30%",left:"54%",w:"17%",h:"12%",rot:"15deg"},{top:"49%",left:"29%",w:"19%",h:"14%",rot:"-14deg"},{top:"54%",left:"50%",w:"18%",h:"13%",rot:"10deg"},{top:"43%",left:"42%",w:"16%",h:"12%",rot:"4deg"}],E=[{top:"21%",left:"46%",rot:"8deg"},{top:"39%",left:"29%",rot:"-14deg"},{top:"39%",left:"58%",rot:"16deg"},{top:"58%",left:"40%",rot:"-4deg"},{top:"63%",left:"54%",rot:"18deg"}];return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Neapolitan Pizza Studio"}),p.jsx("p",{className:"game-q",children:"Complete each production step in order to deliver a perfect Margherita."}),p.jsxs("div",{style:{margin:"0 auto 14px",maxWidth:"390px",padding:"12px",borderRadius:"18px",border:"1px solid rgba(248,250,252,0.18)",background:"linear-gradient(170deg, rgba(12,20,30,0.62), rgba(28,14,10,0.58))"},children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:"8px",marginBottom:"10px"},children:[p.jsx("div",{className:"hint muted",style:{textAlign:"left"},children:t?"Order complete":`Current step: ${(S==null?void 0:S.label)||"Complete"}`}),p.jsxs("div",{className:"hint muted",children:[s.length,"/",n.length]})]}),p.jsx("div",{style:{height:"8px",borderRadius:"999px",background:"rgba(248,250,252,0.14)",overflow:"hidden",marginBottom:"12px"},children:p.jsx("div",{style:{width:`${I}%`,height:"100%",background:"linear-gradient(90deg, #f59e0b, #22c55e)",transition:"width 220ms ease"}})}),p.jsxs("div",{style:{position:"relative",margin:"0 auto",width:"100%",maxWidth:"320px",aspectRatio:"1 / 1"},children:[p.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"22px",background:_("Prep")?"linear-gradient(160deg, #9a6a3b 0%, #6d4624 65%, #4f3219 100%)":"linear-gradient(160deg, #283445 0%, #1a2230 100%)",boxShadow:"inset 0 14px 28px rgba(255,255,255,0.06), 0 8px 20px rgba(0,0,0,0.35)"}}),_("Prep")&&p.jsx("div",{style:{position:"absolute",inset:"6%",borderRadius:"18px",background:"radial-gradient(circle at 25% 30%, rgba(255,255,255,0.24), rgba(255,255,255,0) 45%), radial-gradient(circle at 70% 65%, rgba(255,255,255,0.15), rgba(255,255,255,0) 42%)"}}),p.jsxs("div",{style:{position:"absolute",inset:"9%",borderRadius:"999px",background:"radial-gradient(circle at 50% 46%, #2b3445 0%, #111827 72%)",boxShadow:"inset 0 10px 22px rgba(255,255,255,0.05), 0 8px 22px rgba(0,0,0,0.42)",overflow:"hidden"},children:[_("Dough")&&p.jsx("div",{style:{position:"absolute",inset:"8%",borderRadius:"999px",background:"radial-gradient(circle at 35% 28%, #ffe3a7 0%, #f4b76d 58%, #b65c1f 100%)",boxShadow:"inset 0 8px 18px rgba(255,250,220,0.35), inset 0 -16px 20px rgba(117,54,18,0.35)"}}),_("Tomato")&&p.jsx("div",{style:{position:"absolute",inset:"15%",borderRadius:"999px",background:"radial-gradient(circle at 30% 32%, #ff846a 0%, #df3f2c 46%, #a61f13 100%)",boxShadow:"inset 0 10px 16px rgba(255,180,160,0.24)"}}),_("Mozzarella")&&P.map((v,w)=>p.jsx("div",{style:{position:"absolute",top:v.top,left:v.left,width:v.w,height:v.h,transform:`rotate(${v.rot})`,borderRadius:"999px",background:"radial-gradient(circle at 35% 30%, #fffdfa 0%, #f4f1eb 70%, #ded7ca 100%)",boxShadow:"0 3px 8px rgba(0,0,0,0.2), inset 0 2px 4px rgba(255,255,255,0.7)"}},`moz-${w}`)),_("Basil")&&E.map((v,w)=>p.jsx("div",{style:{position:"absolute",top:v.top,left:v.left,width:"11%",height:"8%",transform:`rotate(${v.rot})`,borderRadius:"60% 40% 60% 40%",background:"linear-gradient(155deg, #2dd36f 0%, #157f3d 100%)",boxShadow:"0 2px 6px rgba(0,0,0,0.25)"}},`basil-${w}`)),_("Bake")&&p.jsx("div",{style:{position:"absolute",inset:"8%",borderRadius:"999px",background:"radial-gradient(circle at 50% 50%, rgba(255,210,120,0.1) 0%, rgba(60,25,10,0.22) 70%), radial-gradient(circle at 70% 35%, rgba(40,20,10,0.28) 0%, rgba(0,0,0,0) 34%)",mixBlendMode:"multiply"}})]}),p.jsxs("div",{style:{position:"absolute",right:"-4px",top:"10px",width:"102px",padding:"8px",borderRadius:"12px",border:"1px solid rgba(248,250,252,0.14)",background:"rgba(2,6,23,0.58)"},children:[p.jsx("div",{className:"hint muted",style:{fontSize:"11px"},children:"Oven"}),p.jsx("div",{style:{marginTop:"4px",height:"8px",borderRadius:"999px",background:"rgba(248,250,252,0.16)",overflow:"hidden"},children:p.jsx("div",{style:{width:_("Bake")?"100%":_("Preheat")?"58%":"8%",height:"100%",background:_("Bake")?"linear-gradient(90deg, #fb923c, #ef4444)":"linear-gradient(90deg, #60a5fa, #f59e0b)",transition:"width 250ms ease"}})}),p.jsx("div",{className:"hint muted",style:{fontSize:"11px",marginTop:"4px"},children:_("Bake")?"Cooked":_("Preheat")?"Preheated":"Cold"})]})]})]}),p.jsxs("div",{style:{marginBottom:"10px",display:"grid",gap:"8px"},children:[s.length===0&&p.jsx("div",{className:"hint muted",children:"Completed steps will appear here."}),s.map((v,w)=>{const N=n.find(V=>V.key===v);return p.jsxs("div",{style:{padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(34,197,94,0.35)",background:"linear-gradient(180deg, rgba(34,197,94,0.14), rgba(22,101,52,0.16))",textAlign:"left",fontSize:"13px"},children:["Step ",w+1,": ",(N==null?void 0:N.label)||v]},`${v}-${w}`)})]}),p.jsx("div",{className:"ingredients",style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"10px",marginBottom:"10px"},children:r.map(v=>{const w=n.find(V=>V.key===v),N=v===(S==null?void 0:S.key);return p.jsx("button",{className:"chipbtn",disabled:t,onClick:()=>f(v),style:{minHeight:"44px",border:N?"1px solid rgba(250,204,21,0.95)":void 0,boxShadow:N?"0 0 0 2px rgba(250,204,21,0.25)":void 0},children:(w==null?void 0:w.label)||v},v)})}),p.jsxs("div",{className:"row",style:{alignItems:"center",gap:"10px"},children:[p.jsx("button",{className:"ghost-btn",onClick:m,disabled:t,children:"Reset"}),!t&&a>0&&p.jsxs("div",{className:"hint warn",children:["Mistakes: ",a]})]})]})}function i2({locked:t,onSolved:e}){const n=[["Pesto","Basil"],["Risotto","Rice"],["Gelato","Frozen dessert"],["Espresso","Coffee shot"]],r=n.map(E=>E[0]),i=n.map(E=>E[1]),[s]=k.useState(()=>P(r)),[o]=k.useState(()=>P(i)),[a,u]=k.useState(null),[c,h]=k.useState(null),[f,m]=k.useState([]),[_,S]=k.useState(0),I=k.useRef(me());function P(E){const v=[...E];for(let w=v.length-1;w>0;w--){const N=Math.floor(Math.random()*(w+1));[v[w],v[N]]=[v[N],v[w]]}return v}return k.useEffect(()=>{a&&c&&(n.some(([v,w])=>v===a&&w===c)?(m(v=>[...v,a]),u(null),h(null)):(S(v=>v+1),setTimeout(()=>{u(null),h(null)},450)))},[a,c]),k.useEffect(()=>{if(f.length===n.length&&!t){const E=Math.round((me()-I.current)/1e3);e({seconds:E,mistakes:_})}},[f,t]),p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Food Match"}),p.jsx("p",{className:"game-q",children:"Match each item with its description."}),p.jsxs("div",{className:"match",children:[p.jsx("div",{className:"match-col",children:s.map(E=>{const v=f.includes(E);return p.jsx("button",{className:`matchbtn ${a===E?"active":""}`,disabled:t||v,onClick:()=>u(E),children:E},E)})}),p.jsx("div",{className:"match-col",children:o.map(E=>p.jsx("button",{className:`matchbtn ${c===E?"active":""}`,disabled:t,onClick:()=>h(E),children:E},E))})]}),!t&&_>0&&p.jsxs("div",{className:"hint warn",children:["Misses: ",_]})]})}function s2({locked:t,onSolved:e}){const[n,r]=k.useState(()=>Array(9).fill(null)),[i,s]=k.useState("player"),[o,a]=k.useState(""),[u,c]=k.useState([]),[h,f]=k.useState(0),[m,_]=k.useState(0),[S,I]=k.useState(0),P=k.useRef(me()),E=k.useRef(!1);function v(y){const A=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const C of A){const[b,D,R]=C;if(y[b]&&y[b]===y[D]&&y[b]===y[R])return{winner:y[b],line:C}}return null}function w(y){var b,D;const A=y.map((R,he)=>R?-1:he).filter(R=>R>=0);if(!A.length)return-1;for(const R of A){const he=[...y];if(he[R]="B",((b=v(he))==null?void 0:b.winner)==="B")return R}for(const R of A){const he=[...y];if(he[R]="P",((D=v(he))==null?void 0:D.winner)==="P")return R}if(A.includes(4))return 4;const C=A.filter(R=>[0,2,6,8].includes(R));return C.length?C[Math.floor(Math.random()*C.length)]:A[Math.floor(Math.random()*A.length)]}function N(y,A=[]){a(y),c(A),s("player"),y==="player"?f(C=>C+1):y==="bot"?_(C=>C+1):I(C=>C+1)}function V(y){if(t||i!=="player"||o||n[y])return;const A=[...n];A[y]="P",r(A),s("bot")}k.useEffect(()=>{if(t||o)return;const y=v(n);if(y){N(y.winner==="P"?"player":"bot",y.line);return}if(n.every(Boolean)){N("draw");return}if(i==="bot"){const A=setTimeout(()=>{r(C=>{const b=w(C);if(b<0)return C;const D=[...C];return D[b]="B",D}),s("player")},360);return()=>clearTimeout(A)}},[n,i,t,o]),k.useEffect(()=>{t||E.current||h>=3&&(E.current=!0,e({seconds:Math.round((me()-P.current)/1e3),mistakes:m}))},[h,m,t]);function j(){t||h>=3||(r(Array(9).fill(null)),a(""),c([]),s("player"))}function x(y){return y==="P"?"Tower block":y==="B"?"Bot X":"Empty"}return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Build the Pisa Tower"}),p.jsx("p",{className:"game-q",children:"Beat the bot in Tic-Tac-Toe. Win 3 rounds to complete Pisa and unlock this location."}),p.jsxs("div",{className:"ttt-meta",children:[p.jsxs("div",{className:"hint muted",children:["Tower built: ",Math.min(h,3),"/3"]}),p.jsxs("div",{className:"hint muted",children:["Bot wins: ",m," | Draws: ",S]})]}),p.jsx("div",{className:"ttt-grid",role:"grid","aria-label":"Tic-Tac-Toe board",children:n.map((y,A)=>{const C=o==="bot"&&u.includes(A);return p.jsxs("button",{role:"gridcell",className:`ttt-cell ${C?"bot-win":""}`,onClick:()=>V(A),disabled:t||!!o||i!=="player"||!!y||h>=3,"aria-label":`Cell ${A+1}: ${x(y)}`,children:[y==="P"&&p.jsx("span",{className:"ttt-mark ttt-player",children:"[]"}),y==="B"&&p.jsx("span",{className:"ttt-mark ttt-bot",children:"X"})]},A)})}),p.jsx("div",{className:"hint muted",children:t||h>=3?"Tower complete. Location unlocked.":o?o==="player"?"Round win. Start the next layer of the tower.":o==="bot"?"Bot took this round. Blacked-out red X marks its line.":"Draw round. Try again.":i==="player"?"Your move.":"Bot is thinking..."}),!t&&!!o&&h<3&&p.jsx("button",{className:"btn",onClick:j,children:"Next Round"})]})}function o2({locked:t,onSolved:e}){const n=["Buongiorno","!","Come","stai","?"],[r,i]=k.useState(()=>h(n)),[s,o]=k.useState([]),[a,u]=k.useState(0),c=k.useRef(me());function h(_){const S=[..._];for(let I=S.length-1;I>0;I--){const P=Math.floor(Math.random()*(I+1));[S[I],S[P]]=[S[P],S[I]]}return S}function f(_){if(t)return;const S=n[s.length];if(_===S){if(o(I=>[...I,_]),i(I=>I.filter(P=>P!==_)),s.length+1===n.length){const I=Math.round((me()-c.current)/1e3);e({seconds:I,mistakes:a})}}else u(I=>I+1)}function m(){t||(i(h(n)),o([]),u(0))}return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Italian Phrase Builder"}),p.jsx("p",{className:"game-q",children:"Tap tokens to build the phrase in the correct order."}),p.jsx("div",{className:"phraseBuilt mono",children:s.join(" ")||""}),p.jsx("div",{className:"tokens",children:r.map(_=>p.jsx("button",{className:"chipbtn",disabled:t,onClick:()=>f(_),children:_},_))}),p.jsxs("div",{className:"row",children:[p.jsx("button",{className:"ghost-btn",disabled:t,onClick:m,children:"Reset"}),!t&&a>0&&p.jsxs("div",{className:"hint warn",children:["Mistakes: ",a]})]}),p.jsx("div",{className:"hint muted",children:"Meaning: Good morning! How are you?"})]})}function a2({locked:t,onSolved:e}){const[r,i]=k.useState(0),[s,o]=k.useState(0),[a,u]=k.useState(0),c=k.useRef(me()),h=k.useRef(me());k.useEffect(()=>{if(t)return;const m=setInterval(()=>{i(_=>_+1)},600);return()=>clearInterval(m)},[t]);function f(){if(t)return;const m=me(),_=Math.abs((m-h.current)%600),I=Math.min(_,600-_)<=120;if(I?o(P=>P+1):u(P=>P+1),I&&s+1>=8){const P=Math.round((me()-c.current)/1e3);e({seconds:P,mistakes:a})}}return k.useEffect(()=>{h.current=me()},[r]),p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Market Rhythm"}),p.jsx("p",{className:"game-q",children:"Tap on the beat. Score 8 good taps to win."}),p.jsxs("div",{className:"rhythm",children:[p.jsx("div",{className:`pulse ${r%2===0?"on":""}`,"aria-hidden":"true"}),p.jsx("button",{className:"btn big",onClick:f,disabled:t,children:t?"Completed":"TAP"}),p.jsxs("div",{className:"hint muted",children:["Good taps: ",s,"/8"]}),!t&&a>0&&p.jsxs("div",{className:"hint warn",children:["Offbeat: ",a]})]})]})}function l2({locked:t,onSolved:e,totalSolved:n}){const[r,i]=k.useState(""),[s,o]=k.useState(0),a=k.useRef(me());function u(){if(t)return;if(n<9){o(f=>f+1);return}const c=r.toLowerCase().replace(/&/g," and ").replace(/[^a-z\s]/g," ").replace(/\s+/g," ").trim();if(new Set(["ethics and respect","ethics respect","respect and ethics","respect ethics"]).has(c)){const f=Math.round((me()-a.current)/1e3);e({seconds:f,mistakes:s})}else o(f=>f+1)}return p.jsxs("div",{className:"game",children:[p.jsx("div",{className:"game-title",children:"Final Checkpoint"}),p.jsxs("p",{className:"game-q",children:['Riddle: "Two words guide this quest: one keeps us fair, one keeps us kind."',p.jsx("br",{}),"If youve completed the other locations, enter the answer from the poster:"]}),p.jsxs("div",{className:"row",children:[p.jsx("input",{className:"input",value:r,onChange:c=>i(c.target.value),placeholder:"Enter riddle answer",disabled:t,"aria-label":"Final code input"}),p.jsx("button",{className:"btn",onClick:u,disabled:t,children:t?"Completed":"Submit"})]}),n<9&&!t&&p.jsxs("div",{className:"hint warn",children:["You need the other 9 locations first. Current: ",n,"/10"]}),!t&&s>0&&p.jsxs("div",{className:"hint warn",children:["Attempts: ",s]}),p.jsx("div",{className:"hint muted",children:"Tip: This last step keeps things fair for the live event."})]})}function u2({loc:t,locked:e,onSolved:n,totalSolved:r}){var s;const i=(s=t.game)==null?void 0:s.type;return i==="quiz"?p.jsx(Zb,{locked:e,onSolved:n}):i==="wordScramble"?p.jsx(e2,{locked:e,onSolved:n,word:t.game.word}):i==="pathTap"?p.jsx(t2,{locked:e,onSolved:n}):i==="patternMemory"?p.jsx(n2,{locked:e,onSolved:n}):i==="dragBuild"?p.jsx(r2,{locked:e,onSolved:n}):i==="ingredientMatch"?p.jsx(i2,{locked:e,onSolved:n}):i==="tiltBalance"?p.jsx(s2,{locked:e,onSolved:n}):i==="phraseOrder"?p.jsx(o2,{locked:e,onSolved:n}):i==="rhythmTap"?p.jsx(a2,{locked:e,onSolved:n}):i==="finalCode"?p.jsx(l2,{locked:e,onSolved:n,totalSolved:r}):p.jsx("div",{className:"hint",children:"Game missing."})}function c2({state:t,setState:e,onToast:n}){const{id:r}=FC(),i=ep(),s=Ub(r),o=t.solved||{},a=!!(o!=null&&o[Number(r)]),u=Object.keys(o).length,c=s?`${s.city}  #${s.id}`:"Unknown location",h="Completed! You can revisit this page anytime, but scoring is locked.";function f({seconds:m,mistakes:_}){if(!s)return;if(a){n==null||n("Already completed  scoring is locked.","warn");return}const S=Xb({base:100,seconds:m,mistakes:_});e(I=>{const P={...I.solved||{}};P[s.id]={solvedAt:Date.now(),points:S};const E=Object.values(P).reduce((w,N)=>w+((N==null?void 0:N.points)||0),0),v=Object.keys(P).length===zt.length;return{...I,solved:P,totalPoints:E,achievementUnlocked:v}}),n==null||n(`Location #${s.id} completed (+${S} pts).`,"ok"),setTimeout(()=>{Object.keys(t.solved||{}).length+1===zt.length&&i("/certificate")},600)}return s?p.jsxs("div",{className:"stack",children:[p.jsxs("section",{className:"page-head",children:[p.jsxs("div",{className:"crumbs",children:[p.jsx(Ue,{to:"/",className:"crumb",children:"Home"}),p.jsx("span",{className:"crumb-sep",children:"/"}),p.jsx("span",{className:"crumb",children:c})]}),p.jsxs("div",{className:"head-row",children:[p.jsx("h1",{className:"h1",children:s.city}),p.jsxs("div",{className:"head-badges",children:[p.jsxs("span",{className:"chip strong",children:["#",s.id]}),p.jsx("span",{className:"chip",children:s.region}),a?p.jsx("span",{className:"chip ok",children:"Found"}):p.jsx("span",{className:"chip",children:"Not found"})]})]})]}),p.jsx(wt,{title:"Italy Fact",sub:s.fact,right:a?p.jsx("span",{className:"chip ok",children:"Unlocked"}):p.jsx("span",{className:"chip strong",children:"Play to unlock"}),children:p.jsxs("div",{className:"ethics-note",children:[p.jsx("strong",{children:"Ethics & Respect:"})," ",s.ethics]})}),p.jsx(wt,{title:"MiniGame",sub:a?h:"Finish once to score points and mark this location as found.",children:p.jsx(u2,{loc:s,locked:a,onSolved:f,totalSolved:u})}),p.jsxs(wt,{title:"Quick Watch",sub:"Optional: short video (under ~3 minutes).",children:[p.jsx(Jb,{videoId:s.video.id,title:s.video.title}),p.jsx("div",{className:"hint muted",children:"If your venue WiFi is limited, you can replace these with offline facts only."})]}),p.jsxs("div",{className:"row spread",children:[p.jsx(Ue,{to:"/",className:"ghost-btn",children:"Back"}),p.jsx(Ue,{to:"/leaderboard",className:"ghost-btn",children:"Leaderboard"})]}),p.jsx(En.div,{className:"next-strip",initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{duration:.35},children:p.jsxs("div",{className:"next-strip-inner",children:[p.jsx("div",{className:"muted",children:"Tip:"}),p.jsx("div",{children:"Place QR codes beside props or signs to pull people across the space."})]})})]}):p.jsx("div",{className:"stack",children:p.jsx(wt,{title:"Location not found",sub:"This QR code may be incorrect.",children:p.jsx(Ue,{to:"/",className:"btn",children:"Back Home"})})})}function h2(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const d2=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function ur(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let di=null;function uS(t={}){return di||(t.includeStyleProperties?(di=t.includeStyleProperties,di):(di=ur(window.getComputedStyle(document.documentElement)),di))}function iu(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function f2(t){const e=iu(t,"border-left-width"),n=iu(t,"border-right-width");return t.clientWidth+e+n}function p2(t){const e=iu(t,"border-top-width"),n=iu(t,"border-bottom-width");return t.clientHeight+e+n}function cS(t,e={}){const n=e.width||f2(t),r=e.height||p2(t);return{width:n,height:r}}function m2(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const It=16384;function g2(t){(t.width>It||t.height>It)&&(t.width>It&&t.height>It?t.width>t.height?(t.height*=It/t.width,t.width=It):(t.width*=It/t.height,t.height=It):t.width>It?(t.height*=It/t.width,t.width=It):(t.width*=It/t.height,t.height=It))}function su(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function y2(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function v2(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),y2(i)}const xt=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||xt(n,e)};function _2(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function w2(t,e){return uS(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function E2(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?_2(n):w2(n,r);return document.createTextNode(`${i}{${s}}`)}function Zv(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=d2();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(E2(o,n,i,r)),e.appendChild(a)}function T2(t,e,n){Zv(t,e,":before",n),Zv(t,e,":after",n)}const e0="application/font-woff",t0="image/jpeg",S2={woff:e0,woff2:e0,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t0,jpeg:t0,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function x2(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Lp(t){const e=x2(t).toLowerCase();return S2[e]||""}function A2(t){return t.split(/,/)[1]}function Nd(t){return t.search(/^(data:)/)!==-1}function I2(t,e){return`data:${e};base64,${t}`}async function hS(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(u){o(u)}},a.readAsDataURL(i)})}const oh={};function C2(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Mp(t,e,n){const r=C2(t,e,n.includeQueryParams);if(oh[r]!=null)return oh[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await hS(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),A2(a)));i=I2(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return oh[r]=i,i}async function P2(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):su(e)}async function R2(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return su(a)}const n=t.poster,r=Lp(n),i=await Mp(n,r,e);return su(i)}async function k2(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Ou(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function N2(t,e){return xt(t,HTMLCanvasElement)?P2(t):xt(t,HTMLVideoElement)?R2(t,e):xt(t,HTMLIFrameElement)?k2(t,e):t.cloneNode(dS(t))}const b2=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",dS=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function V2(t,e,n){var r,i;if(dS(e))return e;let s=[];return b2(t)&&t.assignedNodes?s=ur(t.assignedNodes()):xt(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=ur(t.contentDocument.body.childNodes):s=ur(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||xt(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>Ou(a,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function D2(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):uS(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),xt(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function L2(t,e){xt(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),xt(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function M2(t,e){if(xt(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function j2(t,e,n){return xt(e,Element)&&(D2(t,e,n),T2(t,e,n),L2(t,e),M2(t,e)),e}async function O2(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const u=t.querySelector(a),c=document.querySelector(a);!u&&c&&!r[a]&&(r[a]=await Ou(c,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let u=0;u<i.length;u++)a.appendChild(i[u]);t.appendChild(o)}return t}async function Ou(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>N2(r,e)).then(r=>V2(t,r,e)).then(r=>j2(t,r,e)).then(r=>O2(r,e))}const fS=/url\((['"]?)([^'"]+?)\1\)/g,F2=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,U2=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function B2(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function $2(t){const e=[];return t.replace(fS,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Nd(n))}async function z2(t,e,n,r,i){try{const s=n?h2(e,n):e,o=Lp(e);let a;return i||(a=await Mp(s,o,r)),t.replace(B2(e),`$1${a}$3`)}catch{}return t}function W2(t,{preferredFontFormat:e}){return e?t.replace(U2,n=>{for(;;){const[r,,i]=F2.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function pS(t){return t.search(fS)!==-1}async function mS(t,e,n){if(!pS(t))return t;const r=W2(t,n);return $2(r).reduce((s,o)=>s.then(a=>z2(a,o,e,n)),Promise.resolve(r))}async function fi(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await mS(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function H2(t,e){await fi("background",t,e)||await fi("background-image",t,e),await fi("mask",t,e)||await fi("-webkit-mask",t,e)||await fi("mask-image",t,e)||await fi("-webkit-mask-image",t,e)}async function q2(t,e){const n=xt(t,HTMLImageElement);if(!(n&&!Nd(t.src))&&!(xt(t,SVGImageElement)&&!Nd(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Mp(r,Lp(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...u)=>{try{s(e.onImageErrorHandler(...u))}catch(c){o(c)}}:o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function K2(t,e){const r=ur(t.childNodes).map(i=>gS(i,e));await Promise.all(r).then(()=>t)}async function gS(t,e){xt(t,Element)&&(await H2(t,e),await q2(t,e),await K2(t,e))}function G2(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const n0={};async function r0(t){let e=n0[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},n0[t]=e,e}async function i0(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),hS(a,e.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function s0(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=a.exec(r),u===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(u[0])}return e}async function Q2(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{ur(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const u=s.href,c=r0(u).then(h=>i0(h,e)).then(h=>s0(h).forEach(f=>{try{i.insertRule(f,f.startsWith("@import")?a+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:f,error:m})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(c)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(r0(i.href).then(a=>i0(a,e)).then(a=>s0(a).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{ur(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function Y2(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>pS(e.style.getPropertyValue("src")))}async function X2(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=ur(t.ownerDocument.styleSheets),r=await Q2(n,e);return Y2(r)}function yS(t){return t.trim().replace(/["']/g,"")}function J2(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(yS(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function Z2(t,e){const n=await X2(t,e),r=J2(t);return(await Promise.all(n.filter(s=>r.has(yS(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return mS(s.cssText,o,e)}))).join(`
`)}async function eV(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Z2(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function tV(t,e={}){const{width:n,height:r}=cS(t,e),i=await Ou(t,e,!0);return await eV(i,e),await gS(i,e),G2(i,e),await v2(i,n,r)}async function nV(t,e={}){const{width:n,height:r}=cS(t,e),i=await tV(t,e),s=await su(i),o=document.createElement("canvas"),a=o.getContext("2d"),u=e.pixelRatio||m2(),c=e.canvasWidth||n,h=e.canvasHeight||r;return o.width=c*u,o.height=h*u,e.skipAutoScale||g2(o),o.style.width=`${c}`,o.style.height=`${h}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function rV(t,e={}){return(await nV(t,e)).toDataURL()}var o0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,_=c&63;u||(_=64,o||(m=64)),r.push(n[h],n[f],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new sV;const m=s<<2|a>>4;if(r.push(m),c!==64){const _=a<<4&240|c>>2;if(r.push(_),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oV=function(t){const e=vS(t);return _S.encodeByteArray(e,!0)},wS=function(t){return oV(t).replace(/\./g,"")},ES=function(t){try{return _S.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=()=>aV().__FIREBASE_DEFAULTS__,uV=()=>{if(typeof process>"u"||typeof o0>"u")return;const t=o0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ES(t[1]);return e&&JSON.parse(e)},TS=()=>{try{return lV()||uV()||cV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hV=t=>{var e;return(e=TS())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function fV(){var t;const e=(t=TS())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yV(){return!fV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vV(){try{return typeof indexedDB=="object"}catch{return!1}}function _V(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wV,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?EV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ar(i,a,r)}}function EV(t,e){return t.replace(TV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function SV(t,e){const n=new xV(t,e);return n.subscribe.bind(n)}class xV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ah),i.error===void 0&&(i.error=ah),i.complete===void 0&&(i.complete=ah);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ah(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const IV={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},CV=Z.INFO,PV={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},RV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=CV,this._logHandler=RV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const kV=(t,e)=>e.some(n=>t instanceof n);let a0,l0;function NV(){return a0||(a0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bV(){return l0||(l0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xS=new WeakMap,bd=new WeakMap,AS=new WeakMap,lh=new WeakMap,Op=new WeakMap;function VV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xS.set(n,t)}).catch(()=>{}),Op.set(e,t),e}function DV(t){if(bd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bd.set(t,e)}let Vd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LV(t){Vd=t(Vd)}function MV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(uh(this),e,...n);return AS.set(r,e.sort?e.sort():[e]),cr(r)}:bV().includes(t)?function(...e){return t.apply(uh(this),e),cr(xS.get(this))}:function(...e){return cr(t.apply(uh(this),e))}}function jV(t){return typeof t=="function"?MV(t):(t instanceof IDBTransaction&&DV(t),kV(t,NV())?new Proxy(t,Vd):t)}function cr(t){if(t instanceof IDBRequest)return VV(t);if(lh.has(t))return lh.get(t);const e=jV(t);return e!==t&&(lh.set(t,e),Op.set(e,t)),e}const uh=t=>Op.get(t);function OV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=cr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cr(o.result),u.oldVersion,u.newVersion,cr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const FV=["get","getKey","getAll","getAllKeys","count"],UV=["put","add","delete","clear"],ch=new Map;function u0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=UV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FV.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return ch.set(e,s),s}LV(t=>({...t,get:(e,n,r)=>u0(e,n)||t.get(e,n,r),has:(e,n)=>!!u0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($V(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $V(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dd="@firebase/app",c0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new jp("@firebase/app"),zV="@firebase/app-compat",WV="@firebase/analytics-compat",HV="@firebase/analytics",qV="@firebase/app-check-compat",KV="@firebase/app-check",GV="@firebase/auth",QV="@firebase/auth-compat",YV="@firebase/database",XV="@firebase/data-connect",JV="@firebase/database-compat",ZV="@firebase/functions",eD="@firebase/functions-compat",tD="@firebase/installations",nD="@firebase/installations-compat",rD="@firebase/messaging",iD="@firebase/messaging-compat",sD="@firebase/performance",oD="@firebase/performance-compat",aD="@firebase/remote-config",lD="@firebase/remote-config-compat",uD="@firebase/storage",cD="@firebase/storage-compat",hD="@firebase/firestore",dD="@firebase/vertexai-preview",fD="@firebase/firestore-compat",pD="firebase",mD="10.14.1",gD={[Dd]:"fire-core",[zV]:"fire-core-compat",[HV]:"fire-analytics",[WV]:"fire-analytics-compat",[KV]:"fire-app-check",[qV]:"fire-app-check-compat",[GV]:"fire-auth",[QV]:"fire-auth-compat",[YV]:"fire-rtdb",[XV]:"fire-data-connect",[JV]:"fire-rtdb-compat",[ZV]:"fire-fn",[eD]:"fire-fn-compat",[tD]:"fire-iid",[nD]:"fire-iid-compat",[rD]:"fire-fcm",[iD]:"fire-fcm-compat",[sD]:"fire-perf",[oD]:"fire-perf-compat",[aD]:"fire-rc",[lD]:"fire-rc-compat",[uD]:"fire-gcs",[cD]:"fire-gcs-compat",[hD]:"fire-fst",[fD]:"fire-fst-compat",[dD]:"fire-vertex","fire-js":"fire-js",[pD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Map,vD=new Map,h0=new Map;function d0(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ns(t){const e=t.name;if(h0.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;h0.set(e,t);for(const n of yD.values())d0(n,t);for(const n of vD.values())d0(n,t);return!0}function Ys(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fp=new oa("app","Firebase",_D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=mD;function hr(t,e,n){var r;let i=(r=gD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(a.join(" "));return}ns(new ts(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="firebase-heartbeat-database",ED=1,Wo="firebase-heartbeat-store";let hh=null;function IS(){return hh||(hh=OV(wD,ED,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fp.create("idb-open",{originalErrorMessage:t.message})})),hh}async function TD(t){try{const n=(await IS()).transaction(Wo),r=await n.objectStore(Wo).get(CS(t));return await n.done,r}catch(e){if(e instanceof Ar)bn.warn(e.message);else{const n=Fp.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bn.warn(n.message)}}}async function f0(t,e){try{const r=(await IS()).transaction(Wo,"readwrite");await r.objectStore(Wo).put(e,CS(t)),await r.done}catch(n){if(n instanceof Ar)bn.warn(n.message);else{const r=Fp.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bn.warn(r.message)}}}function CS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=1024,xD=30*24*60*60*1e3;class AD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=xD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p0(),{heartbeatsToSend:r,unsentEntries:i}=ID(this._heartbeatsCache.heartbeats),s=wS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bn.warn(n),""}}}function p0(){return new Date().toISOString().substring(0,10)}function ID(t,e=SD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),m0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),m0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vV()?_V().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function m0(t){return wS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){ns(new ts("platform-logger",e=>new BV(e),"PRIVATE")),ns(new ts("heartbeat",e=>new AD(e),"PRIVATE")),hr(Dd,c0,t),hr(Dd,c0,"esm2017"),hr("fire-js","")}PD("");var RD="firebase",kD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(RD,kD,"app");function PS(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ND=RS,kS=new oa("auth","Firebase",RS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new jp("@firebase/auth");function bD(t,...e){ou.logLevel<=Z.WARN&&ou.warn(`Auth (${Fu}): ${t}`,...e)}function wl(t,...e){ou.logLevel<=Z.ERROR&&ou.error(`Auth (${Fu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t,...e){throw Up(t,...e)}function NS(t,...e){return Up(t,...e)}function bS(t,e,n){const r=Object.assign(Object.assign({},ND()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function El(t){return bS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Up(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kS.create(t,...e)}function oe(t,e,...n){if(!t)throw Up(e,...n)}function po(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wl(e),new Error(e)}function au(t,e){t||po(e)}function VD(){return y0()==="http:"||y0()==="https:"}function y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VD()||mV()||"connection"in navigator)?navigator.onLine:!0}function LD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,au(n>e,"Short delay should be less than long delay!"),this.isMobile=dV()||gV()}get(){return DD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){au(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new aa(3e4,6e4);function DS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Uu(t,e,n,r,i={}){return LS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=SS(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return pV()||(c.referrerPolicy="no-referrer"),VS.fetch()(MS(t,t.config.apiHost,n,a),c)})}async function LS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jD),e);try{const i=new FD(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Za(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Za(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Za(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Za(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bS(t,h,c);g0(t,h)}}catch(i){if(i instanceof Ar)throw i;g0(t,"network-request-failed",{message:String(i)})}}function MS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?MD(t.config,i):`${t.config.apiScheme}://${i}`}class FD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(NS(this.auth,"network-request-failed")),OD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=NS(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e){return Uu(t,"POST","/v1/accounts:delete",e)}async function jS(t,e){return Uu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BD(t,e=!1){const n=gr(t),r=await n.getIdToken(e),i=OS(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mo(dh(i.auth_time)),issuedAtTime:mo(dh(i.iat)),expirationTime:mo(dh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dh(t){return Number(t)*1e3}function OS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wl("JWT malformed, contained fewer than 3 sections"),null;try{const i=ES(n);return i?JSON.parse(i):(wl("Failed to decode base64 JWT payload"),null)}catch(i){return wl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function v0(t){const e=OS(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&$D(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $D({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ld(t,jS(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?FS(s.providerUserInfo):[],a=HD(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function WD(t){const e=gr(t);await lu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FS(t){return t.map(e=>{var{providerId:n}=e,r=PS(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e){const n=await LS(t,{},async()=>{const r=SS({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=MS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",VS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KD(t,e){return Uu(t,"POST","/v2/accounts:revokeToken",DS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=v0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ui;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ui,this.toJSON())}_performRefresh(){return po("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=PS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Md(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ld(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BD(this,e)}reload(){return WD(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(El(this.auth));const e=await this.getIdToken();return await Ld(this,UD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:N,isAnonymous:V,providerData:j,stsTokenManager:x}=n;oe(w&&x,e,"internal-error");const y=Ui.fromJSON(this.name,x);oe(typeof w=="string",e,"internal-error"),Bn(f,e.name),Bn(m,e.name),oe(typeof N=="boolean",e,"internal-error"),oe(typeof V=="boolean",e,"internal-error"),Bn(_,e.name),Bn(S,e.name),Bn(I,e.name),Bn(P,e.name),Bn(E,e.name),Bn(v,e.name);const A=new Xn({uid:w,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:V,photoURL:S,phoneNumber:_,tenantId:I,stsTokenManager:y,createdAt:E,lastLoginAt:v});return j&&Array.isArray(j)&&(A.providerData=j.map(C=>Object.assign({},C))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ui;i.updateFromServerResponse(n);const s=new Xn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?FS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ui;a.updateFromIdToken(r);const u=new Xn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Md(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map;function Ur(t){au(t instanceof Function,"Expected a class definition");let e=_0.get(t);return e?(au(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}US.type="NONE";const w0=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e,n){return`firebase:${t}:${e}:${n}`}class Bi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=fh(this.userKey,i.apiKey,s),this.fullPersistenceKey=fh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bi(Ur(w0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ur(w0);const o=fh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Xn._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Bi(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Bi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZD(e))return"Blackberry";if(eL(e))return"Webos";if(QD(e))return"Safari";if((e.includes("chrome/")||YD(e))&&!e.includes("edge/"))return"Chrome";if(JD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GD(t=en()){return/firefox\//i.test(t)}function QD(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YD(t=en()){return/crios\//i.test(t)}function XD(t=en()){return/iemobile/i.test(t)}function JD(t=en()){return/android/i.test(t)}function ZD(t=en()){return/blackberry/i.test(t)}function eL(t=en()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e=[]){let n;switch(t){case"Browser":n=E0(en());break;case"Worker":n=`${E0(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e={}){return Uu(t,"GET","/v2/passwordPolicy",DS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=6;class iL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T0(this),this.idTokenSubscription=new T0(this),this.beforeStateQueue=new tL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jS(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(El(this));const n=e?gr(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(El(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(El(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nL(this),n=new iL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Bi.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oL(t){return gr(t)}class T0{constructor(e){this.auth=e,this.observer=null,this.addObserver=SV(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function aL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}new aa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new aa(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new aa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new aa(5e3,15e3);var S0="@firebase/auth",x0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cL(t){ns(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BS(t)},c=new sL(r,i,s,u);return aL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ns(new ts("auth-internal",e=>{const n=oL(e.getProvider("auth").getImmediate());return(r=>new lL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(S0,x0,uL(t)),hr(S0,x0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=5*60;hV("authIdTokenMaxAge");cL("Browser");var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,$S;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function A(){}A.prototype=y.prototype,x.D=y.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(C,b,D){for(var R=Array(arguments.length-2),he=2;he<arguments.length;he++)R[he-2]=arguments[he];return y.prototype[b].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,y,A){A||(A=0);var C=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)C[b]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(b=0;16>b;++b)C[b]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=x.g[0],A=x.g[1],b=x.g[2];var D=x.g[3],R=y+(D^A&(b^D))+C[0]+3614090360&4294967295;y=A+(R<<7&4294967295|R>>>25),R=D+(b^y&(A^b))+C[1]+3905402710&4294967295,D=y+(R<<12&4294967295|R>>>20),R=b+(A^D&(y^A))+C[2]+606105819&4294967295,b=D+(R<<17&4294967295|R>>>15),R=A+(y^b&(D^y))+C[3]+3250441966&4294967295,A=b+(R<<22&4294967295|R>>>10),R=y+(D^A&(b^D))+C[4]+4118548399&4294967295,y=A+(R<<7&4294967295|R>>>25),R=D+(b^y&(A^b))+C[5]+1200080426&4294967295,D=y+(R<<12&4294967295|R>>>20),R=b+(A^D&(y^A))+C[6]+2821735955&4294967295,b=D+(R<<17&4294967295|R>>>15),R=A+(y^b&(D^y))+C[7]+4249261313&4294967295,A=b+(R<<22&4294967295|R>>>10),R=y+(D^A&(b^D))+C[8]+1770035416&4294967295,y=A+(R<<7&4294967295|R>>>25),R=D+(b^y&(A^b))+C[9]+2336552879&4294967295,D=y+(R<<12&4294967295|R>>>20),R=b+(A^D&(y^A))+C[10]+4294925233&4294967295,b=D+(R<<17&4294967295|R>>>15),R=A+(y^b&(D^y))+C[11]+2304563134&4294967295,A=b+(R<<22&4294967295|R>>>10),R=y+(D^A&(b^D))+C[12]+1804603682&4294967295,y=A+(R<<7&4294967295|R>>>25),R=D+(b^y&(A^b))+C[13]+4254626195&4294967295,D=y+(R<<12&4294967295|R>>>20),R=b+(A^D&(y^A))+C[14]+2792965006&4294967295,b=D+(R<<17&4294967295|R>>>15),R=A+(y^b&(D^y))+C[15]+1236535329&4294967295,A=b+(R<<22&4294967295|R>>>10),R=y+(b^D&(A^b))+C[1]+4129170786&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^b&(y^A))+C[6]+3225465664&4294967295,D=y+(R<<9&4294967295|R>>>23),R=b+(y^A&(D^y))+C[11]+643717713&4294967295,b=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(b^D))+C[0]+3921069994&4294967295,A=b+(R<<20&4294967295|R>>>12),R=y+(b^D&(A^b))+C[5]+3593408605&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^b&(y^A))+C[10]+38016083&4294967295,D=y+(R<<9&4294967295|R>>>23),R=b+(y^A&(D^y))+C[15]+3634488961&4294967295,b=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(b^D))+C[4]+3889429448&4294967295,A=b+(R<<20&4294967295|R>>>12),R=y+(b^D&(A^b))+C[9]+568446438&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^b&(y^A))+C[14]+3275163606&4294967295,D=y+(R<<9&4294967295|R>>>23),R=b+(y^A&(D^y))+C[3]+4107603335&4294967295,b=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(b^D))+C[8]+1163531501&4294967295,A=b+(R<<20&4294967295|R>>>12),R=y+(b^D&(A^b))+C[13]+2850285829&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^b&(y^A))+C[2]+4243563512&4294967295,D=y+(R<<9&4294967295|R>>>23),R=b+(y^A&(D^y))+C[7]+1735328473&4294967295,b=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(b^D))+C[12]+2368359562&4294967295,A=b+(R<<20&4294967295|R>>>12),R=y+(A^b^D)+C[5]+4294588738&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^b)+C[8]+2272392833&4294967295,D=y+(R<<11&4294967295|R>>>21),R=b+(D^y^A)+C[11]+1839030562&4294967295,b=D+(R<<16&4294967295|R>>>16),R=A+(b^D^y)+C[14]+4259657740&4294967295,A=b+(R<<23&4294967295|R>>>9),R=y+(A^b^D)+C[1]+2763975236&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^b)+C[4]+1272893353&4294967295,D=y+(R<<11&4294967295|R>>>21),R=b+(D^y^A)+C[7]+4139469664&4294967295,b=D+(R<<16&4294967295|R>>>16),R=A+(b^D^y)+C[10]+3200236656&4294967295,A=b+(R<<23&4294967295|R>>>9),R=y+(A^b^D)+C[13]+681279174&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^b)+C[0]+3936430074&4294967295,D=y+(R<<11&4294967295|R>>>21),R=b+(D^y^A)+C[3]+3572445317&4294967295,b=D+(R<<16&4294967295|R>>>16),R=A+(b^D^y)+C[6]+76029189&4294967295,A=b+(R<<23&4294967295|R>>>9),R=y+(A^b^D)+C[9]+3654602809&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^b)+C[12]+3873151461&4294967295,D=y+(R<<11&4294967295|R>>>21),R=b+(D^y^A)+C[15]+530742520&4294967295,b=D+(R<<16&4294967295|R>>>16),R=A+(b^D^y)+C[2]+3299628645&4294967295,A=b+(R<<23&4294967295|R>>>9),R=y+(b^(A|~D))+C[0]+4096336452&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~b))+C[7]+1126891415&4294967295,D=y+(R<<10&4294967295|R>>>22),R=b+(y^(D|~A))+C[14]+2878612391&4294967295,b=D+(R<<15&4294967295|R>>>17),R=A+(D^(b|~y))+C[5]+4237533241&4294967295,A=b+(R<<21&4294967295|R>>>11),R=y+(b^(A|~D))+C[12]+1700485571&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~b))+C[3]+2399980690&4294967295,D=y+(R<<10&4294967295|R>>>22),R=b+(y^(D|~A))+C[10]+4293915773&4294967295,b=D+(R<<15&4294967295|R>>>17),R=A+(D^(b|~y))+C[1]+2240044497&4294967295,A=b+(R<<21&4294967295|R>>>11),R=y+(b^(A|~D))+C[8]+1873313359&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~b))+C[15]+4264355552&4294967295,D=y+(R<<10&4294967295|R>>>22),R=b+(y^(D|~A))+C[6]+2734768916&4294967295,b=D+(R<<15&4294967295|R>>>17),R=A+(D^(b|~y))+C[13]+1309151649&4294967295,A=b+(R<<21&4294967295|R>>>11),R=y+(b^(A|~D))+C[4]+4149444226&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~b))+C[11]+3174756917&4294967295,D=y+(R<<10&4294967295|R>>>22),R=b+(y^(D|~A))+C[2]+718787259&4294967295,b=D+(R<<15&4294967295|R>>>17),R=A+(D^(b|~y))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+D&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var A=y-this.blockSize,C=this.B,b=this.h,D=0;D<y;){if(b==0)for(;D<=A;)i(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<y;)if(C[b++]=x.charCodeAt(D++),b==this.blockSize){i(this,C),b=0;break}}else for(;D<y;)if(C[b++]=x[D++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var A=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=A&255,A/=256;for(this.u(x),x=Array(16),y=A=0;4>y;++y)for(var C=0;32>C;C+=8)x[A++]=this.g[y]>>>C&255;return x};function s(x,y){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=y(x)}function o(x,y){this.h=y;for(var A=[],C=!0,b=x.length-1;0<=b;b--){var D=x[b]|0;C&&D==y||(A[b]=D,C=!1)}this.g=A}var a={};function u(x){return-128<=x&&128>x?s(x,function(y){return new o([y|0],0>y?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return P(c(-x));for(var y=[],A=1,C=0;x>=A;C++)y[C]=x/A|0,A*=4294967296;return new o(y,0)}function h(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return P(h(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(y,8)),C=f,b=0;b<x.length;b+=8){var D=Math.min(8,x.length-b),R=parseInt(x.substring(b,b+D),y);8>D?(D=c(Math.pow(y,D)),C=C.j(D).add(c(R))):(C=C.j(A),C=C.add(c(R)))}return C}var f=u(0),m=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();for(var x=0,y=1,A=0;A<this.g.length;A++){var C=this.i(A);x+=(0<=C?C:4294967296+C)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S(this))return"0";if(I(this))return"-"+P(this).toString(x);for(var y=c(Math.pow(x,6)),A=this,C="";;){var b=N(A,y).g;A=E(A,b.j(y));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=b,S(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function S(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function I(x){return x.h==-1}t.l=function(x){return x=E(this,x),I(x)?-1:S(x)?0:1};function P(x){for(var y=x.g.length,A=[],C=0;C<y;C++)A[C]=~x.g[C];return new o(A,~x.h).add(m)}t.abs=function(){return I(this)?P(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),A=[],C=0,b=0;b<=y;b++){var D=C+(this.i(b)&65535)+(x.i(b)&65535),R=(D>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);C=R>>>16,D&=65535,R&=65535,A[b]=R<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(x,y){return x.add(P(y))}t.j=function(x){if(S(this)||S(x))return f;if(I(this))return I(x)?P(this).j(P(x)):P(P(this).j(x));if(I(x))return P(this.j(P(x)));if(0>this.l(_)&&0>x.l(_))return c(this.m()*x.m());for(var y=this.g.length+x.g.length,A=[],C=0;C<2*y;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<x.g.length;b++){var D=this.i(C)>>>16,R=this.i(C)&65535,he=x.i(b)>>>16,Wt=x.i(b)&65535;A[2*C+2*b]+=R*Wt,v(A,2*C+2*b),A[2*C+2*b+1]+=D*Wt,v(A,2*C+2*b+1),A[2*C+2*b+1]+=R*he,v(A,2*C+2*b+1),A[2*C+2*b+2]+=D*he,v(A,2*C+2*b+2)}for(C=0;C<y;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=y;C<2*y;C++)A[C]=0;return new o(A,0)};function v(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function w(x,y){this.g=x,this.h=y}function N(x,y){if(S(y))throw Error("division by zero");if(S(x))return new w(f,f);if(I(x))return y=N(P(x),y),new w(P(y.g),P(y.h));if(I(y))return y=N(x,P(y)),new w(P(y.g),y.h);if(30<x.g.length){if(I(x)||I(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,C=y;0>=C.l(x);)A=V(A),C=V(C);var b=j(A,1),D=j(C,1);for(C=j(C,2),A=j(A,2);!S(C);){var R=D.add(C);0>=R.l(x)&&(b=b.add(A),D=R),C=j(C,1),A=j(A,1)}return y=E(x,b.j(y)),new w(b,y)}for(b=f;0<=x.l(y);){for(A=Math.max(1,Math.floor(x.m()/y.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=c(A),R=D.j(y);I(R)||0<R.l(x);)A-=C,D=c(A),R=D.j(y);S(D)&&(D=m),b=b.add(D),x=E(x,R)}return new w(b,x)}t.A=function(x){return N(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),A=[],C=0;C<y;C++)A[C]=this.i(C)&x.i(C);return new o(A,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),A=[],C=0;C<y;C++)A[C]=this.i(C)|x.i(C);return new o(A,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),A=[],C=0;C<y;C++)A[C]=this.i(C)^x.i(C);return new o(A,this.h^x.h)};function V(x){for(var y=x.g.length+1,A=[],C=0;C<y;C++)A[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(A,x.h)}function j(x,y){var A=y>>5;y%=32;for(var C=x.g.length-A,b=[],D=0;D<C;D++)b[D]=0<y?x.i(D+A)>>>y|x.i(D+A+1)<<32-y:x.i(D+A);return new o(b,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$S=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Hr=o}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zS,Xs,WS,Tl,jd,HS,qS,KS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof el=="object"&&el];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var g=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in g))break e;g=g[L]}l=l[l.length-1],T=g[l],d=d(T),d!=T&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var g=0,T=!1,L={next:function(){if(!T&&g<l.length){var M=g++;return{value:d(M,l[M]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return s(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,g){return l.call.apply(l.bind,arguments)}function f(l,d,g){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function m(l,d,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function _(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function S(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(T,L,M){for(var B=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)B[ue-2]=arguments[ue];return d.prototype[L].apply(T,B)}}function I(l){const d=l.length;if(0<d){const g=Array(d);for(let T=0;T<d;T++)g[T]=l[T];return g}return[]}function P(l,d){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(u(T)){const L=l.length||0,M=T.length||0;l.length=L+M;for(let B=0;B<M;B++)l[L+B]=T[B]}else l.push(T)}}class E{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function N(l){return N[" "](l),l}N[" "]=function(){};var V=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function j(l,d,g){for(const T in l)d.call(g,l[T],T,l)}function x(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function y(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,d){let g,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(g in T)l[g]=T[g];for(let M=0;M<A.length;M++)g=A[M],Object.prototype.hasOwnProperty.call(T,g)&&(l[g]=T[g])}}function b(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){a.setTimeout(()=>{throw l},0)}function R(){var l=G;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class he{constructor(){this.h=this.g=null}add(d,g){const T=Wt.get();T.set(d,g),this.h?this.h.next=T:this.g=T,this.h=T}}var Wt=new E(()=>new oi,l=>l.reset());class oi{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let de,$=!1,G=new he,Q=()=>{const l=a.Promise.resolve(void 0);de=()=>{l.then(_e)}};var _e=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(g){D(g)}var d=Wt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}$=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,d),a.removeEventListener("test",g,d)}catch{}return l}();function pn(l,d){if(Re.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(V){e:{try{N(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:mn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&pn.aa.h.call(this)}}S(pn,Re);var mn={2:"touch",3:"pen",4:"mouse"};pn.prototype.h=function(){pn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),r1=0;function i1(l,d,g,T,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!T,this.ha=L,this.key=++r1,this.da=this.fa=!1}function fa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function pa(l){this.src=l,this.g={},this.h=0}pa.prototype.add=function(l,d,g,T,L){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var B=Xu(l,d,T,L);return-1<B?(d=l[B],g||(d.fa=!1)):(d=new i1(d,this.src,M,!!T,L),d.fa=g,l.push(d)),d};function Yu(l,d){var g=d.type;if(g in l.g){var T=l.g[g],L=Array.prototype.indexOf.call(T,d,void 0),M;(M=0<=L)&&Array.prototype.splice.call(T,L,1),M&&(fa(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Xu(l,d,g,T){for(var L=0;L<l.length;++L){var M=l[L];if(!M.da&&M.listener==d&&M.capture==!!g&&M.ha==T)return L}return-1}var Ju="closure_lm_"+(1e6*Math.random()|0),Zu={};function wm(l,d,g,T,L){if(Array.isArray(d)){for(var M=0;M<d.length;M++)wm(l,d[M],g,T,L);return null}return g=Sm(g),l&&l[gn]?l.K(d,g,c(T)?!!T.capture:!1,L):s1(l,d,g,!1,T,L)}function s1(l,d,g,T,L,M){if(!d)throw Error("Invalid event type");var B=c(L)?!!L.capture:!!L,ue=tc(l);if(ue||(l[Ju]=ue=new pa(l)),g=ue.add(d,g,T,B,M),g.proxy)return g;if(T=o1(),g.proxy=T,T.src=l,T.listener=g,l.addEventListener)fn||(L=B),L===void 0&&(L=!1),l.addEventListener(d.toString(),T,L);else if(l.attachEvent)l.attachEvent(Tm(d.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function o1(){function l(g){return d.call(l.src,l.listener,g)}const d=a1;return l}function Em(l,d,g,T,L){if(Array.isArray(d))for(var M=0;M<d.length;M++)Em(l,d[M],g,T,L);else T=c(T)?!!T.capture:!!T,g=Sm(g),l&&l[gn]?(l=l.i,d=String(d).toString(),d in l.g&&(M=l.g[d],g=Xu(M,g,T,L),-1<g&&(fa(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete l.g[d],l.h--)))):l&&(l=tc(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Xu(d,g,T,L)),(g=-1<l?d[l]:null)&&ec(g))}function ec(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[gn])Yu(d.i,l);else{var g=l.type,T=l.proxy;d.removeEventListener?d.removeEventListener(g,T,l.capture):d.detachEvent?d.detachEvent(Tm(g),T):d.addListener&&d.removeListener&&d.removeListener(T),(g=tc(d))?(Yu(g,l),g.h==0&&(g.src=null,d[Ju]=null)):fa(l)}}}function Tm(l){return l in Zu?Zu[l]:Zu[l]="on"+l}function a1(l,d){if(l.da)l=!0;else{d=new pn(d,this);var g=l.listener,T=l.ha||l.src;l.fa&&ec(l),l=g.call(T,d)}return l}function tc(l){return l=l[Ju],l instanceof pa?l:null}var nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sm(l){return typeof l=="function"?l:(l[nc]||(l[nc]=function(d){return l.handleEvent(d)}),l[nc])}function Ze(){le.call(this),this.i=new pa(this),this.M=this,this.F=null}S(Ze,le),Ze.prototype[gn]=!0,Ze.prototype.removeEventListener=function(l,d,g,T){Em(this,l,d,g,T)};function ht(l,d){var g,T=l.F;if(T)for(g=[];T;T=T.F)g.push(T);if(l=l.M,T=d.type||d,typeof d=="string")d=new Re(d,l);else if(d instanceof Re)d.target=d.target||l;else{var L=d;d=new Re(T,l),C(d,L)}if(L=!0,g)for(var M=g.length-1;0<=M;M--){var B=d.g=g[M];L=ma(B,T,!0,d)&&L}if(B=d.g=l,L=ma(B,T,!0,d)&&L,L=ma(B,T,!1,d)&&L,g)for(M=0;M<g.length;M++)B=d.g=g[M],L=ma(B,T,!1,d)&&L}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],T=0;T<g.length;T++)fa(g[T]);delete l.g[d],l.h--}}this.F=null},Ze.prototype.K=function(l,d,g,T){return this.i.add(String(l),d,!1,g,T)},Ze.prototype.L=function(l,d,g,T){return this.i.add(String(l),d,!0,g,T)};function ma(l,d,g,T){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,M=0;M<d.length;++M){var B=d[M];if(B&&!B.da&&B.capture==g){var ue=B.listener,He=B.ha||B.src;B.fa&&Yu(l.i,B),L=ue.call(He,T)!==!1&&L}}return L&&!T.defaultPrevented}function xm(l,d,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Am(l){l.g=xm(()=>{l.g=null,l.i&&(l.i=!1,Am(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class l1 extends le{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Am(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(l){le.call(this),this.h=l,this.g={}}S(ws,le);var Im=[];function Cm(l){j(l.g,function(d,g){this.g.hasOwnProperty(g)&&ec(d)},l),l.g={}}ws.prototype.N=function(){ws.aa.N.call(this),Cm(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rc=a.JSON.stringify,u1=a.JSON.parse,c1=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ic(){}ic.prototype.h=null;function Pm(l){return l.h||(l.h=l.i())}function Rm(){}var Es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sc(){Re.call(this,"d")}S(sc,Re);function oc(){Re.call(this,"c")}S(oc,Re);var Cr={},km=null;function ga(){return km=km||new Ze}Cr.La="serverreachability";function Nm(l){Re.call(this,Cr.La,l)}S(Nm,Re);function Ts(l){const d=ga();ht(d,new Nm(d))}Cr.STAT_EVENT="statevent";function bm(l,d){Re.call(this,Cr.STAT_EVENT,l),this.stat=d}S(bm,Re);function dt(l){const d=ga();ht(d,new bm(d,l))}Cr.Ma="timingevent";function Vm(l,d){Re.call(this,Cr.Ma,l),this.size=d}S(Vm,Re);function Ss(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function xs(){this.g=!0}xs.prototype.xa=function(){this.g=!1};function h1(l,d,g,T,L,M){l.info(function(){if(l.g)if(M)for(var B="",ue=M.split("&"),He=0;He<ue.length;He++){var ie=ue[He].split("=");if(1<ie.length){var et=ie[0];ie=ie[1];var tt=et.split("_");B=2<=tt.length&&tt[1]=="type"?B+(et+"="+ie+"&"):B+(et+"=redacted&")}}else B=null;else B=M;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+d+`
`+g+`
`+B})}function d1(l,d,g,T,L,M,B){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+d+`
`+g+`
`+M+" "+B})}function ai(l,d,g,T){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+p1(l,g)+(T?" "+T:"")})}function f1(l,d){l.info(function(){return"TIMEOUT: "+d})}xs.prototype.info=function(){};function p1(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var T=g[l];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return rc(g)}catch{return d}}var ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ac;function va(){}S(va,ic),va.prototype.g=function(){return new XMLHttpRequest},va.prototype.i=function(){return{}},ac=new va;function jn(l,d,g,T){this.j=l,this.i=d,this.l=g,this.R=T||1,this.U=new ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}var Mm={},lc={};function uc(l,d,g){l.L=1,l.v=Ta(yn(d)),l.m=g,l.P=!0,jm(l,null)}function jm(l,d){l.F=Date.now(),_a(l),l.A=yn(l.v);var g=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Xm(g.i,"t",T),l.C=0,g=l.j.J,l.h=new Lm,l.g=mg(l.j,g?d:null,!l.m),0<l.O&&(l.M=new l1(m(l.Y,l,l.g),l.O)),d=l.U,g=l.g,T=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Im[0]=L.toString()),L=Im);for(var M=0;M<L.length;M++){var B=wm(g,L[M],T||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Ts(),h1(l.i,l.u,l.A,l.l,l.R,l.m)}jn.prototype.ca=function(l){l=l.target;const d=this.M;d&&vn(l)==3?d.j():this.Y(l)},jn.prototype.Y=function(l){try{if(l==this.g)e:{const tt=vn(this.g);var d=this.g.Ba();const ci=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||ig(this.g)))){this.J||tt!=4||d==7||(d==8||0>=ci?Ts(3):Ts(2)),cc(this);var g=this.g.Z();this.X=g;t:if(Om(this)){var T=ig(this.g);l="";var L=T.length,M=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),As(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(T[d],{stream:!(M&&d==L-1)});T.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,d1(this.i,this.u,this.A,this.l,this.R,tt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,He=this.g;if((ue=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ue)){var ie=ue;break t}}ie=null}if(g=ie)ai(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hc(this,g);else{this.o=!1,this.s=3,dt(12),Pr(this),As(this);break e}}if(this.P){g=!0;let Ht;for(;!this.J&&this.C<B.length;)if(Ht=m1(this,B),Ht==lc){tt==4&&(this.s=4,dt(14),g=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Mm){this.s=4,dt(15),ai(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else ai(this.i,this.l,Ht,null),hc(this,Ht);if(Om(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||B.length!=0||this.h.h||(this.s=1,dt(16),g=!1),this.o=this.o&&g,!g)ai(this.i,this.l,B,"[Invalid Chunked Response]"),Pr(this),As(this);else if(0<B.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),yc(et),et.M=!0,dt(11))}}else ai(this.i,this.l,B,null),hc(this,B);tt==4&&Pr(this),this.o&&!this.J&&(tt==4?hg(this.j,this):(this.o=!1,_a(this)))}else b1(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Pr(this),As(this)}}}catch{}finally{}};function Om(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function m1(l,d){var g=l.C,T=d.indexOf(`
`,g);return T==-1?lc:(g=Number(d.substring(g,T)),isNaN(g)?Mm:(T+=1,T+g>d.length?lc:(d=d.slice(T,T+g),l.C=T+g,d)))}jn.prototype.cancel=function(){this.J=!0,Pr(this)};function _a(l){l.S=Date.now()+l.I,Fm(l,l.I)}function Fm(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ss(m(l.ba,l),d)}function cc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}jn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(f1(this.i,this.A),this.L!=2&&(Ts(),dt(17)),Pr(this),this.s=2,As(this)):Fm(this,this.S-l)};function As(l){l.j.G==0||l.J||hg(l.j,l)}function Pr(l){cc(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Cm(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function hc(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||dc(g.h,l))){if(!l.K&&dc(g.h,l)&&g.G==3){try{var T=g.Da.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Pa(g),Ia(g);else break e;gc(g),dt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ss(m(g.Za,g),6e3));if(1>=$m(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else kr(g,11)}else if((l.K||g.g==l)&&Pa(g),!v(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let ie=L[d];if(g.T=ie[0],ie=ie[1],g.G==2)if(ie[0]=="c"){g.K=ie[1],g.ia=ie[2];const et=ie[3];et!=null&&(g.la=et,g.j.info("VER="+g.la));const tt=ie[4];tt!=null&&(g.Aa=tt,g.j.info("SVER="+g.Aa));const ci=ie[5];ci!=null&&typeof ci=="number"&&0<ci&&(T=1.5*ci,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const Ht=l.g;if(Ht){const ka=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var M=T.h;M.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(fc(M,M.h),M.h=null))}if(T.D){const vc=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;vc&&(T.ya=vc,fe(T.I,T.D,vc))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var B=l;if(T.qa=pg(T,T.J?T.ia:null,T.W),B.K){zm(T.h,B);var ue=B,He=T.L;He&&(ue.I=He),ue.B&&(cc(ue),_a(ue)),T.g=B}else ug(T);0<g.i.length&&Ca(g)}else ie[0]!="stop"&&ie[0]!="close"||kr(g,7);else g.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?kr(g,7):mc(g):ie[0]!="noop"&&g.l&&g.l.ta(ie),g.v=0)}}Ts(4)}catch{}}var g1=class{constructor(l,d){this.g=l,this.map=d}};function Um(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function $m(l){return l.h?1:l.g?l.g.size:0}function dc(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function fc(l,d){l.g?l.g.add(d):l.h=d}function zm(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Um.prototype.cancel=function(){if(this.i=Wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Wm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return I(l.i)}function y1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],g=l.length,T=0;T<g;T++)d.push(l[T]);return d}d=[],g=0;for(T in l)d[g++]=l[T];return d}function v1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const T in l)d[g++]=T;return d}}}function Hm(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=v1(l),T=y1(l),L=T.length,M=0;M<L;M++)d.call(void 0,T[M],g&&g[M],l)}var qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _1(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var T=l[g].indexOf("="),L=null;if(0<=T){var M=l[g].substring(0,T);L=l[g].substring(T+1)}else M=l[g];d(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Rr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Rr){this.h=l.h,wa(this,l.j),this.o=l.o,this.g=l.g,Ea(this,l.s),this.l=l.l;var d=l.i,g=new Ps;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Km(this,g),this.m=l.m}else l&&(d=String(l).match(qm))?(this.h=!1,wa(this,d[1]||"",!0),this.o=Is(d[2]||""),this.g=Is(d[3]||"",!0),Ea(this,d[4]),this.l=Is(d[5]||"",!0),Km(this,d[6]||"",!0),this.m=Is(d[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}Rr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Cs(d,Gm,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Cs(d,Gm,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Cs(g,g.charAt(0)=="/"?T1:E1,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Cs(g,x1)),l.join("")};function yn(l){return new Rr(l)}function wa(l,d,g){l.j=g?Is(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Ea(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Km(l,d,g){d instanceof Ps?(l.i=d,A1(l.i,l.h)):(g||(d=Cs(d,S1)),l.i=new Ps(d,l.h))}function fe(l,d,g){l.i.set(d,g)}function Ta(l){return fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Is(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Cs(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,w1),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function w1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Gm=/[#\/\?@]/g,E1=/[#\?:]/g,T1=/[#\?]/g,S1=/[#\?@]/g,x1=/#/g;function Ps(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function On(l){l.g||(l.g=new Map,l.h=0,l.i&&_1(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=Ps.prototype,t.add=function(l,d){On(this),this.i=null,l=li(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function Qm(l,d){On(l),d=li(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Ym(l,d){return On(l),d=li(l,d),l.g.has(d)}t.forEach=function(l,d){On(this),this.g.forEach(function(g,T){g.forEach(function(L){l.call(d,L,T,this)},this)},this)},t.na=function(){On(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let T=0;T<d.length;T++){const L=l[T];for(let M=0;M<L.length;M++)g.push(d[T])}return g},t.V=function(l){On(this);let d=[];if(typeof l=="string")Ym(this,l)&&(d=d.concat(this.g.get(li(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},t.set=function(l,d){return On(this),this.i=null,l=li(this,l),Ym(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Xm(l,d,g){Qm(l,d),0<g.length&&(l.i=null,l.g.set(li(l,d),I(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var T=d[g];const M=encodeURIComponent(String(T)),B=this.V(T);for(T=0;T<B.length;T++){var L=M;B[T]!==""&&(L+="="+encodeURIComponent(String(B[T]))),l.push(L)}}return this.i=l.join("&")};function li(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function A1(l,d){d&&!l.j&&(On(l),l.i=null,l.g.forEach(function(g,T){var L=T.toLowerCase();T!=L&&(Qm(this,T),Xm(this,L,g))},l)),l.j=d}function I1(l,d){const g=new xs;if(a.Image){const T=new Image;T.onload=_(Fn,g,"TestLoadImage: loaded",!0,d,T),T.onerror=_(Fn,g,"TestLoadImage: error",!1,d,T),T.onabort=_(Fn,g,"TestLoadImage: abort",!1,d,T),T.ontimeout=_(Fn,g,"TestLoadImage: timeout",!1,d,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else d(!1)}function C1(l,d){const g=new xs,T=new AbortController,L=setTimeout(()=>{T.abort(),Fn(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:T.signal}).then(M=>{clearTimeout(L),M.ok?Fn(g,"TestPingServer: ok",!0,d):Fn(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Fn(g,"TestPingServer: error",!1,d)})}function Fn(l,d,g,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(g)}catch{}}function P1(){this.g=new c1}function R1(l,d,g){const T=g||"";try{Hm(l,function(L,M){let B=L;c(L)&&(B=rc(L)),d.push(T+M+"="+encodeURIComponent(B))})}catch(L){throw d.push(T+"type="+encodeURIComponent("_badmap")),L}}function Sa(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Sa,ic),Sa.prototype.g=function(){return new xa(this.l,this.j)},Sa.prototype.i=function(l){return function(){return l}}({});function xa(l,d){Ze.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(xa,Ze),t=xa.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,ks(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Rs(this):ks(this),this.readyState==3&&Jm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Rs(this))},t.Qa=function(l){this.g&&(this.response=l,Rs(this))},t.ga=function(){this.g&&Rs(this)};function Rs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ks(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function ks(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zm(l){let d="";return j(l,function(g,T){d+=T,d+=":",d+=g,d+=`\r
`}),d}function pc(l,d,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Zm(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):fe(l,d,g))}function Ae(l){Ze.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ae,Ze);var k1=/^https?$/i,N1=["POST","PUT"];t=Ae.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ac.g(),this.v=this.o?Pm(this.o):Pm(ac),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(M){eg(this,M);return}if(l=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)g.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())g.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(N1,d,void 0))||T||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of g)this.g.setRequestHeader(M,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rg(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){eg(this,M)}};function eg(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,tg(l),Aa(l)}function tg(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ht(this,"complete"),ht(this,"abort"),Aa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Aa(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ng(this):this.bb())},t.bb=function(){ng(this)};function ng(l){if(l.h&&typeof o<"u"&&(!l.v[1]||vn(l)!=4||l.Z()!=2)){if(l.u&&vn(l)==4)xm(l.Ea,0,l);else if(ht(l,"readystatechange"),vn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var T;if(T=B===0){var L=String(l.D).match(qm)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),T=!k1.test(L?L.toLowerCase():"")}g=T}if(g)ht(l,"complete"),ht(l,"success");else{l.m=6;try{var M=2<vn(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",tg(l)}}finally{Aa(l)}}}}function Aa(l,d){if(l.g){rg(l);const g=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ht(l,"ready");try{g.onreadystatechange=T}catch{}}}function rg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function vn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),u1(d)}};function ig(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function b1(l){const d={};l=(l.g&&2<=vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(v(l[T]))continue;var g=b(l[T]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=d[L]||[];d[L]=M,M.push(g)}x(d,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function sg(l){this.Aa=0,this.i=[],this.j=new xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ns("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ns("baseRetryDelayMs",5e3,l),this.cb=Ns("retryDelaySeedMs",1e4,l),this.Wa=Ns("forwardChannelMaxRetries",2,l),this.wa=Ns("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Um(l&&l.concurrentRequestLimit),this.Da=new P1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sg.prototype,t.la=8,t.G=1,t.connect=function(l,d,g,T){dt(0),this.W=l,this.H=d||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=pg(this,null,this.W),Ca(this)};function mc(l){if(og(l),l.G==3){var d=l.U++,g=yn(l.I);if(fe(g,"SID",l.K),fe(g,"RID",d),fe(g,"TYPE","terminate"),bs(l,g),d=new jn(l,l.j,d),d.L=2,d.v=Ta(yn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=d.v,g=!0),g||(d.g=mg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_a(d)}fg(l)}function Ia(l){l.g&&(yc(l),l.g.cancel(),l.g=null)}function og(l){Ia(l),l.u&&(a.clearTimeout(l.u),l.u=null),Pa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ca(l){if(!Bm(l.h)&&!l.s){l.s=!0;var d=l.Ga;de||Q(),$||(de(),$=!0),G.add(d,l),l.B=0}}function V1(l,d){return $m(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ss(m(l.Ga,l,d),dg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new jn(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=lg(this,L,d),g=yn(this.I),fe(g,"RID",l),fe(g,"CVER",22),this.D&&fe(g,"X-HTTP-Session-Id",this.D),bs(this,g),M&&(this.O?d="headers="+encodeURIComponent(String(Zm(M)))+"&"+d:this.m&&pc(g,this.m,M)),fc(this.h,L),this.Ua&&fe(g,"TYPE","init"),this.P?(fe(g,"$req",d),fe(g,"SID","null"),L.T=!0,uc(L,g,null)):uc(L,g,d),this.G=2}}else this.G==3&&(l?ag(this,l):this.i.length==0||Bm(this.h)||ag(this))};function ag(l,d){var g;d?g=d.l:g=l.U++;const T=yn(l.I);fe(T,"SID",l.K),fe(T,"RID",g),fe(T,"AID",l.T),bs(l,T),l.m&&l.o&&pc(T,l.m,l.o),g=new jn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=lg(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),fc(l.h,g),uc(g,T,d)}function bs(l,d){l.H&&j(l.H,function(g,T){fe(d,T,g)}),l.l&&Hm({},function(g,T){fe(d,T,g)})}function lg(l,d,g){g=Math.min(l.i.length,g);var T=l.l?m(l.l.Na,l.l,l):null;e:{var L=l.i;let M=-1;for(;;){const B=["count="+g];M==-1?0<g?(M=L[0].g,B.push("ofs="+M)):M=0:B.push("ofs="+M);let ue=!0;for(let He=0;He<g;He++){let ie=L[He].g;const et=L[He].map;if(ie-=M,0>ie)M=Math.max(0,L[He].g-100),ue=!1;else try{R1(et,B,"req"+ie+"_")}catch{T&&T(et)}}if(ue){T=B.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,T}function ug(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;de||Q(),$||(de(),$=!0),G.add(d,l),l.v=0}}function gc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ss(m(l.Fa,l),dg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ss(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ia(this),cg(this))};function yc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function cg(l){l.g=new jn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=yn(l.qa);fe(d,"RID","rpc"),fe(d,"SID",l.K),fe(d,"AID",l.T),fe(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&fe(d,"TO",l.ja),fe(d,"TYPE","xmlhttp"),bs(l,d),l.m&&l.o&&pc(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Ta(yn(d)),g.m=null,g.P=!0,jm(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Ia(this),gc(this),dt(19))};function Pa(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function hg(l,d){var g=null;if(l.g==d){Pa(l),yc(l),l.g=null;var T=2}else if(dc(l.h,d))g=d.D,zm(l.h,d),T=1;else return;if(l.G!=0){if(d.o)if(T==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;T=ga(),ht(T,new Vm(T,g)),Ca(l)}else ug(l);else if(L=d.s,L==3||L==0&&0<d.X||!(T==1&&V1(l,d)||T==2&&gc(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:kr(l,5);break;case 4:kr(l,10);break;case 3:kr(l,6);break;default:kr(l,2)}}}function dg(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function kr(l,d){if(l.j.info("Error code "+d),d==2){var g=m(l.fb,l),T=l.Xa;const L=!T;T=new Rr(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wa(T,"https"),Ta(T),L?I1(T.toString(),g):C1(T.toString(),g)}else dt(2);l.G=0,l.l&&l.l.sa(d),fg(l),og(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function fg(l){if(l.G=0,l.ka=[],l.l){const d=Wm(l.h);(d.length!=0||l.i.length!=0)&&(P(l.ka,d),P(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function pg(l,d,g){var T=g instanceof Rr?yn(g):new Rr(g);if(T.g!="")d&&(T.g=d+"."+T.g),Ea(T,T.s);else{var L=a.location;T=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var M=new Rr(null);T&&wa(M,T),d&&(M.g=d),L&&Ea(M,L),g&&(M.l=g),T=M}return g=l.D,d=l.ya,g&&d&&fe(T,g,d),fe(T,"VER",l.la),bs(l,T),T}function mg(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ae(new Sa({eb:g})):new Ae(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gg(){}t=gg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ra(){}Ra.prototype.g=function(l,d){return new At(l,d)};function At(l,d){Ze.call(this),this.g=new sg(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!v(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new ui(this)}S(At,Ze),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){mc(this.g)},At.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=rc(l),l=g);d.i.push(new g1(d.Ya++,l)),d.G==3&&Ca(d)},At.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,At.aa.N.call(this)};function yg(l){sc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}S(yg,sc);function vg(){oc.call(this),this.status=1}S(vg,oc);function ui(l){this.g=l}S(ui,gg),ui.prototype.ua=function(){ht(this.g,"a")},ui.prototype.ta=function(l){ht(this.g,new yg(l))},ui.prototype.sa=function(l){ht(this.g,new vg)},ui.prototype.ra=function(){ht(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,KS=function(){return new Ra},qS=function(){return ga()},HS=Cr,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,Tl=ya,Dm.COMPLETE="complete",WS=Dm,Rm.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Xs=Rm,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,zS=Ae}).apply(typeof el<"u"?el:typeof self<"u"?self:typeof window<"u"?window:{});const I0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new jp("@firebase/firestore");function $s(){return Zr.logLevel}function W(t,...e){if(Zr.logLevel<=Z.DEBUG){const n=e.map(Bp);Zr.debug(`Firestore (${gs}): ${t}`,...n)}}function Vn(t,...e){if(Zr.logLevel<=Z.ERROR){const n=e.map(Bp);Zr.error(`Firestore (${gs}): ${t}`,...n)}}function Ho(t,...e){if(Zr.logLevel<=Z.WARN){const n=e.map(Bp);Zr.warn(`Firestore (${gs}): ${t}`,...n)}}function Bp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${gs}) INTERNAL ASSERTION FAILED: `+t;throw Vn(e),new Error(e)}function Pe(t,e){t||X()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class pL{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new dL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new yt(e)}}class mL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new mL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new yL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_L(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new We(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new We(0,0))}static max(){return new Y(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends qo{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const EL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends qo{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return EL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Ee.fromString(e))}static fromName(e){return new K(Ee.fromString(e).popFirst(5))}static empty(){return new K(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Ee(e.slice()))}}function TL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new yr(i,K.empty(),e)}function SL(t){return new yr(t.readTime,t.key,-1)}class yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yr(Y.min(),K.empty(),-1)}static max(){return new yr(Y.max(),K.empty(),-1)}}function xL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $p(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==AL)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function CL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function la(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zp.oe=-1;function Bu(t){return t==null}function uu(t){return t===0&&1/t==-1/0}function PL(t){return typeof t=="number"&&Number.isInteger(t)&&!uu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ua(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||Ge.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ge{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ge.RED,this.left=i??Ge.EMPTY,this.right=s??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ge(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ge.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ge(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new Ye(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QS("Invalid base64 string: "+s):s}}(e);return new Je(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const RL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=RL.exec(t);if(Pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ei(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hp(t){const e=t.mapValue.fields.__previous_value__;return Wp(e)?Hp(e):e}function Ko(t){const e=vr(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl={mapValue:{}};function ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wp(t)?4:bL(t)?9007199254740991:NL(t)?10:11:X()}function dn(t,e){if(t===e)return!0;const n=ti(t);if(n!==ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ko(t).isEqual(Ko(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vr(i.timestampValue),a=vr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ei(i.bytesValue).isEqual(ei(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?uu(o)===uu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return rs(t.arrayValue.values||[],e.arrayValue.values||[],dn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(C0(o)!==C0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!dn(o[u],a[u])))return!1;return!0}(t,e);default:return X()}}function Qo(t,e){return(t.values||[]).find(n=>dn(n,e))!==void 0}function is(t,e){if(t===e)return 0;const n=ti(t),r=ti(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ne(s.integerValue||s.doubleValue),u=Ne(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return R0(t.timestampValue,e.timestampValue);case 4:return R0(Ko(t),Ko(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ei(s),u=ei(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=se(a[c],u[c]);if(h!==0)return h}return se(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=se(Ne(s.latitude),Ne(o.latitude));return a!==0?a:se(Ne(s.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const f=s.fields||{},m=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,I=se(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:k0(_,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===nl.mapValue&&o===nl.mapValue)return 0;if(s===nl.mapValue)return 1;if(o===nl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=se(u[f],h[f]);if(m!==0)return m;const _=is(a[u[f]],c[h[f]]);if(_!==0)return _}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function R0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=vr(t),r=vr(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function k0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=is(n[i],r[i]);if(s)return s}return se(n.length,r.length)}function ss(t){return Od(t)}function Od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Od(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Od(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function N0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fd(t){return!!t&&"integerValue"in t}function qp(t){return!!t&&"arrayValue"in t}function b0(t){return!!t&&"nullValue"in t}function V0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ph(t){return!!t&&"mapValue"in t}function NL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ua(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=go(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=go(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ph(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=go(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=go(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ph(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ph(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ua(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(go(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new at(e,0,Y.min(),Y.min(),Y.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new at(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new at(e,2,n,Y.min(),Y.min(),on.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,Y.min(),Y.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.position=e,this.inclusive=n}}function D0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=is(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function L0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function VL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{}class je extends YS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LL(e,n,r):n==="array-contains"?new OL(e,r):n==="in"?new FL(e,r):n==="not-in"?new UL(e,r):n==="array-contains-any"?new BL(e,r):new je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ML(e,r):new jL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(is(n,this.value)):n!==null&&ti(this.value)===ti(n)&&this.matchesComparison(is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tn extends YS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new tn(e,n)}matches(e){return XS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function XS(t){return t.op==="and"}function JS(t){return DL(t)&&XS(t)}function DL(t){for(const e of t.filters)if(e instanceof tn)return!1;return!0}function Ud(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+ss(t.value);if(JS(t))return t.filters.map(e=>Ud(e)).join(",");{const e=t.filters.map(n=>Ud(n)).join(",");return`${t.op}(${e})`}}function ZS(t,e){return t instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&dn(r.value,i.value)}(t,e):t instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ZS(o,i.filters[a]),!0):!1}(t,e):void X()}function ex(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${ss(n.value)}`}(t):t instanceof tn?function(n){return n.op.toString()+" {"+n.getFilters().map(ex).join(" ,")+"}"}(t):"Filter"}class LL extends je{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class ML extends je{constructor(e,n){super(e,"in",n),this.keys=tx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jL extends je{constructor(e,n){super(e,"not-in",n),this.keys=tx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class OL extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qp(n)&&Qo(n.arrayValue,this.value)}}class FL extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qo(this.value.arrayValue,n)}}class UL extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qo(this.value.arrayValue,n)}}class BL extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function M0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $L(t,e,n,r,i,s,o)}function Kp(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ss(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ss(r)).join(",")),e.ue=n}return e.ue}function Gp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L0(t.startAt,e.startAt)&&L0(t.endAt,e.endAt)}function Bd(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zL(t,e,n,r,i,s,o,a){return new ys(t,e,n,r,i,s,o,a)}function nx(t){return new ys(t)}function j0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rx(t){return t.collectionGroup!==null}function yo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Yo(s,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new Yo(lt.keyField(),r))}return e.ce}function hn(t){const e=te(t);return e.le||(e.le=WL(e,yo(t))),e.le}function WL(t,e){if(t.limitType==="F")return M0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Yo(i.field,s)});const n=t.endAt?new cu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cu(t.startAt.position,t.startAt.inclusive):null;return M0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $d(t,e){const n=t.filters.concat([e]);return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hu(t,e,n){return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $u(t,e){return Gp(hn(t),hn(e))&&t.limitType===e.limitType}function ix(t){return`${Kp(hn(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ex(i)).join(", ")}]`),Bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ss(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ss(i)).join(",")),`Target(${r})`}(hn(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of yo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=D0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,yo(r),i)||r.endAt&&!function(o,a,u){const c=D0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,yo(r),i))}(t,e)}function HL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sx(t){return(e,n)=>{let r=!1;for(const i of yo(t)){const s=qL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qL(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?is(u,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new De(K.comparator);function _r(){return KL}const ox=new De(K.comparator);function Js(...t){let e=ox;for(const n of t)e=e.insert(n.key,n);return e}function GL(t){let e=ox;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Br(){return vo()}function ax(){return vo()}function vo(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const QL=new Ye(K.comparator);function ne(...t){let e=QL;for(const n of t)e=e.add(n);return e}const YL=new Ye(se);function XL(){return YL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function lx(t){return{integerValue:""+t}}function JL(t,e){return PL(e)?lx(e):Qp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this._=void 0}}function ZL(t,e,n){return t instanceof zd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wp(s)&&(s=Hp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof du?ux(t,e):t instanceof fu?cx(t,e):function(i,s){const o=tM(i,s),a=O0(o)+O0(i.Pe);return Fd(o)&&Fd(i.Pe)?lx(a):Qp(i.serializer,a)}(t,e)}function eM(t,e,n){return t instanceof du?ux(t,e):t instanceof fu?cx(t,e):n}function tM(t,e){return t instanceof Wd?function(r){return Fd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zd extends Wu{}class du extends Wu{constructor(e){super(),this.elements=e}}function ux(t,e){const n=hx(e);for(const r of t.elements)n.some(i=>dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class fu extends Wu{constructor(e){super(),this.elements=e}}function cx(t,e){let n=hx(e);for(const r of t.elements)n=n.filter(i=>!dn(i,r));return{arrayValue:{values:n}}}class Wd extends Wu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function O0(t){return Ne(t.integerValue||t.doubleValue)}function hx(t){return qp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof du&&i instanceof du||r instanceof fu&&i instanceof fu?rs(r.elements,i.elements,dn):r instanceof Wd&&i instanceof Wd?dn(r.Pe,i.Pe):r instanceof zd&&i instanceof zd}(t.transform,e.transform)}class Kr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kr}static exists(e){return new Kr(void 0,e)}static updateTime(e){return new Kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yp{}function dx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iM(t.key,Kr.none()):new Xp(t.key,t.data,Kr.none());{const n=t.data,r=on.empty();let i=new Ye(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hu(t.key,r,new Jn(i.toArray()),Kr.none())}}function rM(t,e,n){t instanceof Xp?function(i,s,o){const a=i.value.clone(),u=U0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hu?function(i,s,o){if(!Sl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=U0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(fx(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _o(t,e,n,r){return t instanceof Xp?function(s,o,a,u){if(!Sl(s.precondition,o))return a;const c=s.value.clone(),h=B0(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hu?function(s,o,a,u){if(!Sl(s.precondition,o))return a;const c=B0(s.fieldTransforms,u,o),h=o.data;return h.setAll(fx(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Sl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function F0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rs(r,i,(s,o)=>nM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xp extends Yp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hu extends Yp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U0(t,e,n){const r=new Map;Pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,eM(o,a,n[i]))}return r}function B0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ZL(s,o,e))}return r}class iM extends Yp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&rM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_o(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_o(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ax();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=dx(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,(n,r)=>F0(n,r))&&rs(this.baseMutations,e.baseMutations,(n,r)=>F0(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ee;function px(t){if(t===void 0)return Vn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Le.OK:return U.OK;case Le.CANCELLED:return U.CANCELLED;case Le.UNKNOWN:return U.UNKNOWN;case Le.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Le.INTERNAL:return U.INTERNAL;case Le.UNAVAILABLE:return U.UNAVAILABLE;case Le.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Le.NOT_FOUND:return U.NOT_FOUND;case Le.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Le.ABORTED:return U.ABORTED;case Le.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Le.DATA_LOSS:return U.DATA_LOSS;default:return X()}}(ee=Le||(Le={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new Hr([4294967295,4294967295],0);function $0(t){const e=lM().encode(t),n=new $S;return n.update(e),new Uint8Array(n.digest())}function z0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([i,s],0)]}class Jp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zs(`Invalid padding: ${n}`);if(r<0)throw new Zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Hr.fromNumber(r)));return i.compare(uM)===1&&(i=new Hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$0(e),[r,i]=z0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Jp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=$0(e),[r,i]=z0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qu(Y.min(),i,new De(se),_r(),ne())}}class ca{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ca(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class mx{constructor(e,n){this.targetId=e,this.me=n}}class gx{constructor(e,n,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W0{constructor(){this.fe=0,this.ge=q0(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new ca(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cM{constructor(e){this.Le=e,this.Be=new Map,this.ke=_r(),this.qe=H0(),this.Qe=new De(se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Bd(s))if(r===0){const o=new K(s.path);this.Ue(n,o,at.newNoDocument(o,Y.min()))}else Pe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ei(r).toUint8Array()}catch(u){if(u instanceof QS)return Ho("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Jp(o,i,s)}catch(u){return Ho(u instanceof Zs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Bd(a.target)){const u=new K(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,at.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new qu(e,n,this.Qe,this.ke,r);return this.ke=_r(),this.qe=H0(),this.Qe=new De(se),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new W0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function H0(){return new De(K.comparator)}function q0(){return new De(K.comparator)}const hM={asc:"ASCENDING",desc:"DESCENDING"},dM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fM={and:"AND",or:"OR"};class pM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hd(t,e){return t.useProto3Json||Bu(e)?e:{value:e}}function qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $i(t){return Pe(!!t),Y.fromTimestamp(function(n){const r=vr(n);return new We(r.seconds,r.nanos)}(t))}function vx(t,e){return Kd(t,e).canonicalString()}function Kd(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _x(t){const e=Ee.fromString(t);return Pe(xx(e)),e}function mh(t,e){const n=_x(e);if(n.get(1)!==t.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Ex(n))}function wx(t,e){return vx(t.databaseId,e)}function mM(t){const e=_x(t);return e.length===4?Ee.emptyPath():Ex(e)}function K0(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ex(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Pe(h===void 0||typeof h=="string"),Je.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Je.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:px(c.code);return new H(h,c.message||"")}(o);n=new gx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=mh(t,r.document.name),s=$i(r.document.updateTime),o=r.document.createTime?$i(r.document.createTime):Y.min(),a=new on({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new xl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=mh(t,r.document),s=r.readTime?$i(r.readTime):Y.min(),o=at.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=mh(t,r.document),s=r.removedTargetIds||[];n=new xl([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new aM(i,s),a=r.targetId;n=new mx(a,o)}}return n}function yM(t,e){return{documents:[wx(t,e.path)]}}function vM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wx(t,i);const s=function(c){if(c.length!==0)return Sx(tn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:mi(m.field),direction:EM(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _M(t){let e=mM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=Tx(f);return m instanceof tn&&JS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(S){return new Yo(gi(S.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Bu(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,_=f.values||[];return new cu(_,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,_=f.values||[];return new cu(_,m)}(n.endAt)),zL(e,i,o,s,a,"F",u,c)}function wM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Tx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gi(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gi(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gi(n.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gi(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return je.create(gi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tn.create(n.compositeFilter.filters.map(r=>Tx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function EM(t){return hM[t]}function TM(t){return dM[t]}function SM(t){return fM[t]}function mi(t){return{fieldPath:t.canonicalString()}}function gi(t){return lt.fromServerFormat(t.fieldPath)}function Sx(t){return t instanceof je?function(n){if(n.op==="=="){if(V0(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NAN"}};if(b0(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V0(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NAN"}};if(b0(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mi(n.field),op:TM(n.op),value:n.value}}}(t):t instanceof tn?function(n){const r=n.getFilters().map(i=>Sx(i));return r.length===1?r[0]:{compositeFilter:{op:SM(n.op),filters:r}}}(t):X()}function xx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.ct=e}}function AM(t){const e=_M({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.un=new CM}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(yr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class CM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new os(0)}static kn(){return new os(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_o(r.mutation,i,Jn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=Br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Js();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_r();const o=vo(),a=function(){return vo()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Hu)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),_o(h.mutation,c,h.mutation.getFieldMask(),We.now())):o.set(c.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new RM(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vo();let i=new De((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Jn.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(i.get(a.batchId)||ne()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=ax();h.forEach(m=>{if(!s.has(m)){const _=dx(n.get(m),r.get(m));_!==null&&f.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Br());let a=-1,u=s;return o.next(c=>O.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ne())).next(h=>({batchId:a,changes:GL(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Js();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Js();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const c=function(f,m){return new ys(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,at.newInvalidDocument(h)))});let a=Js();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&_o(h.mutation,c,Jn.empty(),We.now()),zu(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$i(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:AM(i.bundledQuery),readTime:$i(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.overlays=new De(K.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Br();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Br(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Br(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Br(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oM(n,r));let s=this.Ir.get(n);s===void 0&&(s=ne(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.Tr=new Ye(Be.Er),this.dr=new Ye(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new Ee([])),r=new Be(n,e),i=new Be(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new Ee([])),r=new Be(n,e),i=new Be(n,e+1);let s=ne();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||se(e.wr,n.wr)}static Ar(e,n){return se(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Be.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Be(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(se);return n.forEach(i=>{const s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Be(new K(s),0);let a=new Ye(se);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{const s=new Be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.Mr=e,this.docs=function(){return new De(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=_r();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():at.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_r();const o=n.path,a=new K(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||xL(SL(h),r)<=0||(i.has(h.key)||zu(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MM(this)}getSize(e){return O.resolve(this.size)}}class MM extends PM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.persistence=e,this.Nr=new vs(n=>Kp(n),Gp),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zp,this.targetCount=0,this.kr=os.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new os(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zp(0),this.Kr=!1,this.Kr=!0,this.$r=new VM,this.referenceDelegate=e(this),this.Ur=new jM(this),this.indexManager=new IM,this.remoteDocumentCache=function(i){return new LM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xM(n),this.Gr=new NM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new FM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FM extends IL{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.Jr=new Zp,this.Yr=null}static Zr(e){return new em(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yV()?8:CL(en())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UM;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?($s()<=Z.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):($s()<=Z.DEBUG&&W("QueryEngine","Query:",pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?($s()<=Z.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):O.resolve())}Yi(e,n){if(j0(n))return O.resolve(null);let r=hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hu(n,null,"F"),r=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,hu(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return j0(n)||i.isEqual(Y.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?O.resolve(null):($s()<=Z.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pi(n)),this.rs(e,o,n,TL(i,-1)).next(a=>a))})}ts(e,n){let r=new Ye(sx(e));return n.forEach((i,s)=>{zu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return $s()<=Z.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",pi(n)),this.Ji.getDocumentsMatchingQuery(e,n,yr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new De(se),this._s=new vs(s=>Kp(s),Gp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function zM(t,e,n,r){return new $M(t,e,n,r)}async function Ax(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ne();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Ix(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function WM(t,e){const n=te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Je.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(f,_),function(I,P,E){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,_,h)&&a.push(n.Ur.updateTargetData(s,_))});let u=_r(),c=ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(HM(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(Y.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function HM(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_r();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function qM(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Gd(t,e,n){const r=te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!la(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function G0(t,e,n){const r=te(t);let i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=te(u),m=f._s.get(h);return m!==void 0?O.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,hn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(a=>(KM(r,HL(e),a),{documents:a,Ts:s})))}function KM(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Q0{constructor(){this.activeTargetIds=XL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GM{constructor(){this.so=new Q0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Q0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=null;function gh(){return rl===null?rl=function(){return 268435456+Math.round(2147483648*Math.random())}():rl++,"0x"+rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class JM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=gh(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ho("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=YM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=gh();return new Promise((o,a)=>{const u=new zS;u.setWithCredentials(!0),u.listenOnce(WS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tl.NO_ERROR:const h=u.getResponseJson();W(it,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Tl.TIMEOUT:W(it,`RPC '${e}' ${s} timed out`),a(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:const f=u.getStatus();if(W(it,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const S=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(_.status);a(new H(S,_.message))}else a(new H(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(U.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{W(it,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(it,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=gh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KS(),a=qS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");W(it,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let m=!1,_=!1;const S=new XM({Io:P=>{_?W(it,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(W(it,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),W(it,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},To:()=>f.close()}),I=(P,E,v)=>{P.listen(E,w=>{try{v(w)}catch(N){setTimeout(()=>{throw N},0)}})};return I(f,Xs.EventType.OPEN,()=>{_||(W(it,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),I(f,Xs.EventType.CLOSE,()=>{_||(_=!0,W(it,`RPC '${e}' stream ${i} transport closed`),S.So())}),I(f,Xs.EventType.ERROR,P=>{_||(_=!0,Ho(it,`RPC '${e}' stream ${i} transport errored:`,P),S.So(new H(U.UNAVAILABLE,"The operation could not be completed")))}),I(f,Xs.EventType.MESSAGE,P=>{var E;if(!_){const v=P.data[0];Pe(!!v);const w=v,N=w.error||((E=w[0])===null||E===void 0?void 0:E.error);if(N){W(it,`RPC '${e}' stream ${i} received error:`,N);const V=N.status;let j=function(A){const C=Le[A];if(C!==void 0)return px(C)}(V),x=N.message;j===void 0&&(j=U.INTERNAL,x="Unknown error status: "+V+" with message "+N.message),_=!0,S.So(new H(j,x)),f.close()}else W(it,`RPC '${e}' stream ${i} received:`,v),S.bo(v)}}),I(a,HS.STAT_EVENT,P=>{P.stat===jd.PROXY?W(it,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===jd.NOPROXY&&W(it,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){return new pM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Cx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ej extends ZM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gM(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?$i(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=K0(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Bd(u)?{documents:yM(s,u)}:{query:vM(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yx(s,o.resumeToken);const c=Hd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=qd(s,o.snapshotVersion.toTimestamp());const c=Hd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=wM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=K0(this.serializer),n.removeTarget=e,this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Kd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Kd(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{da(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=te(u);c.L_.add(4),await ha(c),c.q_.set("Unknown"),c.L_.delete(4),await Gu(c)}(this))})}),this.q_=new nj(r,i)}}async function Gu(t){if(da(t))for(const e of t.B_)await e(!0)}async function ha(t){for(const e of t.B_)await e(!1)}function Px(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),sm(n)?im(n):_s(n).r_()&&rm(n,e))}function nm(t,e){const n=te(t),r=_s(n);n.N_.delete(e),r.r_()&&Rx(n,e),n.N_.size===0&&(r.r_()?r.o_():da(n)&&n.q_.set("Unknown"))}function rm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_s(t).A_(e)}function Rx(t,e){t.Q_.xe(e),_s(t).R_(e)}function im(t){t.Q_=new cM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_s(t).start(),t.q_.v_()}function sm(t){return da(t)&&!_s(t).n_()&&t.N_.size>0}function da(t){return te(t).L_.size===0}function kx(t){t.Q_=void 0}async function ij(t){t.q_.set("Online")}async function sj(t){t.N_.forEach((e,n)=>{rm(t,e)})}async function oj(t,e){kx(t),sm(t)?(t.q_.M_(e),im(t)):t.q_.set("Unknown")}async function aj(t,e,n){if(t.q_.set("Online"),e instanceof gx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await X0(t,r)}else if(e instanceof xl?t.Q_.Ke(e):e instanceof mx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await Ix(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Je.EMPTY_BYTE_STRING,h.snapshotVersion)),Rx(s,u);const f=new Zn(h.target,u,c,h.sequenceNumber);rm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await X0(t,r)}}async function X0(t,e,n){if(!la(e))throw e;t.L_.add(1),await ha(t),t.q_.set("Offline"),n||(n=()=>Ix(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gu(t)})}async function J0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=da(n);n.L_.add(3),await ha(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gu(n)}async function lj(t,e){const n=te(t);e?(n.L_.delete(2),await Gu(n)):e||(n.L_.add(2),await ha(n),n.q_.set("Unknown"))}function _s(t){return t.K_||(t.K_=function(n,r,i){const s=te(n);return s.w_(),new ej(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ij.bind(null,t),Ro:sj.bind(null,t),mo:oj.bind(null,t),d_:aj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),sm(t)?im(t):t.q_.set("Unknown")):(await t.K_.stop(),kx(t))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new om(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nx(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),la(t))return new H(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Js(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new zi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.W_=new De(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class as{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new as(e,n,zi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cj{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=e_(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function e_(){return new vs(t=>ix(t),$u)}async function hj(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new uj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Nx(o,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&am(n)}async function dj(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fj(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&am(n)}function pj(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function am(t){t.Y_.forEach(e=>{e.next()})}var Qd,t_;(t_=Qd||(Qd={})).ea="default",t_.Cache="cache";class mj{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new as(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=as.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.key=e}}class Vx{constructor(e){this.key=e}}class gj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=sx(e),this.Ra=new zi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Z0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),_=zu(this.query,f)?f:null,S=!!m&&this.mutatedKeys.has(m.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;m&&_?m.data.isEqual(_.data)?S!==I&&(r.track({type:3,doc:_}),P=!0):this.ga(m,_)||(r.track({type:2,doc:_}),P=!0,(u&&this.Aa(_,u)>0||c&&this.Aa(_,c)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),P=!0):m&&!_&&(r.track({type:1,doc:m}),P=!0,(u||c)&&(a=!0)),P&&(_?(o=o.add(_),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(_,S){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return I(_)-I(S)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new as(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Z0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Vx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return as.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class yj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vj{constructor(e){this.key=e,this.va=!1}}class _j{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vs(a=>ix(a),$u),this.Ma=new Map,this.xa=new Set,this.Oa=new De(K.comparator),this.Na=new Map,this.La=new Zp,this.Ba={},this.ka=new Map,this.qa=os.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function wj(t,e,n=!0){const r=Ox(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Dx(r,e,n,!0),i}async function Ej(t,e){const n=Ox(t);await Dx(n,e,!0,!1)}async function Dx(t,e,n,r){const i=await qM(t.localStore,hn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Tj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Px(t.remoteStore,i),a}async function Tj(t,e,n,r,i){t.Ka=(f,m,_)=>async function(I,P,E,v){let w=P.view.ma(E);w.ns&&(w=await G0(I.localStore,P.query,!1).then(({documents:x})=>P.view.ma(x,w)));const N=v&&v.targetChanges.get(P.targetId),V=v&&v.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(w,I.isPrimaryClient,N,V);return r_(I,P.targetId,j.wa),j.snapshot}(t,f,m,_);const s=await G0(t.localStore,e,!0),o=new gj(e,s.Ts),a=o.ma(s.documents),u=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);r_(t,n,c.wa);const h=new yj(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Sj(t,e,n){const r=te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nm(r.remoteStore,i.targetId),Yd(r,i.targetId)}).catch($p)):(Yd(r,i.targetId),await Gd(r.localStore,i.targetId,!0))}async function xj(t,e){const n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nm(n.remoteStore,r.targetId))}async function Lx(t,e){const n=te(t);try{const r=await WM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Pe(o.va):i.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await jx(n,r,e)}catch(r){await $p(r)}}function n_(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=te(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&am(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Aj(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new De(K.comparator);o=o.insert(s,at.newNoDocument(s,Y.min()));const a=ne().add(s),u=new qu(Y.min(),new Map,new De(se),o,a);await Lx(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),lm(r)}else await Gd(r.localStore,e,!1).then(()=>Yd(r,e,n)).catch($p)}function Yd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Mx(t,r)})}function Mx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(nm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),lm(t))}function r_(t,e,n){for(const r of n)r instanceof bx?(t.La.addReference(r.key,e),Ij(t,r)):r instanceof Vx?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Mx(t,r.key)):X()}function Ij(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),lm(t))}function lm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new vj(n)),t.Oa=t.Oa.insert(n,r),Px(t.remoteStore,new Zn(hn(nx(n.path)),r,"TargetPurposeLimboResolution",zp.oe))}}async function jx(t,e,n){const r=te(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=tm.Wi(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=te(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(c,m=>O.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>O.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!la(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const _=h.os.get(m),S=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,I)}}}(r.localStore,s))}async function Cj(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Ax(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new H(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jx(n,r.hs)}}function Pj(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Ox(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Aj.bind(null,e),e.Ca.d_=fj.bind(null,e.eventManager),e.Ca.$a=pj.bind(null,e.eventManager),e}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return zM(this.persistence,new BM,e.initialUser,this.serializer)}Ga(e){return new OM(em.Zr,this.serializer)}Wa(e){return new GM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class Xd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cj.bind(null,this.syncEngine),await lj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cj}()}createDatastore(e){const n=Ku(e.databaseInfo.databaseId),r=function(s){return new JM(s)}(e.databaseInfo);return function(s,o,a,u){return new tj(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new rj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>n_(this.syncEngine,n,0),function(){return Y0.D()?new Y0:new QM}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const f=new _j(i,s,o,a,u,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ha(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=wL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ax(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function i_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Nj(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>J0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>J0(e.remoteStore,i)),t._onlineComponents=e}async function Nj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await vh(t,new pu)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await vh(t,new pu);return t._offlineComponents}async function bj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await i_(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await i_(t,new Xd))),t._onlineComponents}async function Vj(t){const e=await bj(t),n=e.eventManager;return n.onListen=wj.bind(null,e.syncEngine),n.onUnlisten=Sj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ej.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xj.bind(null,e.syncEngine),n}function Dj(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new Rj({next:m=>{h.Za(),o.enqueueAndForget(()=>dj(s,f)),m.fromCache&&u.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new mj(a,h,{includeMetadataChanges:!0,_a:!0});return hj(s,f)}(await Vj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;function Lj(t,e,n,r){if(e===!0&&r===!0)throw new H(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o_(t){if(K.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function a_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qu(t);throw new H(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Mj(t,e){if(e<=0)throw new H(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ux{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fL;switch(r.type){case"firstParty":return new gL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=s_.get(n);r&&(W("ComponentProvider","Removing Datastore"),s_.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ir(this.firestore,e,this._query)}}class Mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Wi extends Ir{constructor(e,n,r){super(e,n,nx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new K(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function Bx(t,e,...n){if(t=gr(t),t instanceof Ux){const r=Ee.fromString(e,...n);return o_(r),new Wi(t,null,r)}{if(!(t instanceof Mn||t instanceof Wi))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return o_(r),new Wi(t.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Cx(this,"async_queue_retry"),this.Vu=()=>{const r=yh();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=yh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=yh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!la(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=om.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class $x extends Ux{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new u_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,await e}}}function jj(t){if(t._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Oj(t),t._firestoreClient}function Oj(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new kL(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Fx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new kj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ls(Je.fromBase64String(e))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ls(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=/^__.*__$/;function Hx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class hm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Hx(this.Cu)&&Fj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ku(e)}Qu(e,n,r,i=!1){return new hm({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bj(t){const e=t._freezeSettings(),n=Ku(t._databaseId);return new Uj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $j(t,e,n,r=!1){return dm(n,t.Qu(r?4:3,e))}function dm(t,e){if(qx(t=gr(t)))return Wj("Unsupported field value:",e,t),zj(t,e);if(t instanceof Wx)return function(r,i){if(!Hx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=dm(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=gr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:qd(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qd(i.serializer,s)}}if(r instanceof um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ls)return{bytesValue:yx(i.serializer,r._byteString)};if(r instanceof Mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Qp(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qu(r)}`)}(t,e)}function zj(t,e){const n={};return GS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(t,(r,i)=>{const s=dm(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof um||t instanceof ls||t instanceof Mn||t instanceof Wx||t instanceof cm)}function Wj(t,e,n){if(!qx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}const Hj=new RegExp("[~\\*/\\[\\]]");function qj(t,e,n){if(e.search(Hj)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zx(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(U.INVALID_ARGUMENT,a+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Kj extends Kx{data(){return super.data()}}function fm(t,e){return typeof e=="string"?qj(t,e):e instanceof zx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class mm extends pm{}function Gx(t,e,...n){let r=[];e instanceof pm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof ym).length,a=s.filter(u=>u instanceof gm).length;if(o>1||o>0&&a>0)throw new H(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class gm extends mm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gm(e,n,r)}_apply(e){const n=this._parse(e);return Xx(e._query,n),new Ir(e.firestore,e.converter,$d(e._query,n))}_parse(e){const n=Bj(e.firestore);return function(s,o,a,u,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){h_(f,h);const _=[];for(const S of f)_.push(c_(u,s,S));m={arrayValue:{values:_}}}else m=c_(u,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||h_(f,h),m=$j(a,o,f,h==="in"||h==="not-in");return je.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ym extends pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ym(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Xx(o,u),o=$d(o,u)}(e._query,n),new Ir(e.firestore,e.converter,$d(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vm extends mm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yo(s,o)}(e._query,this._field,this._direction);return new Ir(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ys(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Qx(t,e="asc"){const n=e,r=fm("orderBy",t);return vm._create(r,n)}class _m extends mm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _m(e,n,r)}_apply(e){return new Ir(e.firestore,e.converter,hu(e._query,this._limit,this._limitType))}}function Yx(t){return Mj("limit",t),_m._create("limit",t,"F")}function c_(t,e,n){if(typeof(n=gr(n))=="string"){if(n==="")throw new H(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rx(e)&&n.indexOf("/")!==-1)throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!K.isDocumentKey(r))throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N0(t,new K(r))}if(n instanceof Mn)return N0(t,n._key);throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qu(n)}.`)}function h_(t,e){if(!Array.isArray(t)||t.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xx(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Qj{convertValue(e,n="none"){switch(ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ua(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ne(o.doubleValue));return new cm(s)}convertGeoPoint(e){return new um(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ko(e));default:return null}}convertTimestamp(e){const n=vr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);Pe(xx(r));const i=new Go(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Vn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yj extends Kx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Al(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Al extends Yj{data(e={}){return super.data(e)}}class Xj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new il(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Al(this._firestore,this._userDataWriter,r.key,r,new il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Al(i._firestore,i._userDataWriter,a.doc.key,a.doc,new il(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Al(i._firestore,i._userDataWriter,a.doc.key,a.doc,new il(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Jj(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Jj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class Zj extends Qj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ls(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function Jx(t){t=a_(t,Ir);const e=a_(t.firestore,$x),n=jj(e),r=new Zj(e);return Gj(t._query),Dj(n,t._query).then(i=>new Xj(e,r,t,i))}(function(e,n=!0){(function(i){gs=i})(Fu),ns(new ts("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $x(new pL(r.getProvider("auth-internal")),new vL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),hr(I0,"4.7.3",e),hr(I0,"4.7.3","esm2017")})();const Zd=!1;function Zx(){return{app:null,auth:null,db:null}}async function e1(){return{uid:null}}async function eO(t,e){return!(Object.keys(t.solved||{}).length===zt.length)||t.submittedAchievement,!1}function tO({state:t,onToast:e}){var h,f;const[n,r]=k.useState([]),[i,s]=k.useState(!1),o=Object.keys(t.solved||{}).length,a=o===zt.length,u=(((h=t.profile)==null?void 0:h.firstName)||"").trim()&&(((f=t.profile)==null?void 0:f.department)||"").trim();k.useEffect(()=>{let m=!0;async function _(){s(!0);try{if(!Zd){r([]);return}await e1();const{db:S}=Zx(),I=Gx(Bx(S,"italyQuestLeaderboard"),Qx("totalPoints","desc"),Yx(50)),P=await Jx(I),E=[];P.forEach(v=>E.push({id:v.id,...v.data()})),m&&r(E)}catch{m&&r([])}finally{m&&s(!1)}}return _(),()=>{m=!1}},[]);const c=k.useMemo(()=>n.slice(0,3),[n]);return p.jsxs("div",{className:"stack",children:[p.jsxs("section",{className:"page-head",children:[p.jsxs("div",{className:"crumbs",children:[p.jsx(Ue,{to:"/",className:"crumb",children:"Home"}),p.jsx("span",{className:"crumb-sep",children:"/"}),p.jsx("span",{className:"crumb",children:"Leaderboard"})]}),p.jsx("h1",{className:"h1",children:"Italy Explorer Leaderboard"}),p.jsx("p",{className:"muted",children:"Shared live board for departments. Submit after completing all 10 locations."})]}),p.jsx(wt,{title:"Leaderboard Unavailable",sub:"shared leaderboard -  Firebase. ",children:p.jsx("div",{className:"hint warn",children:"Under development..."})}),p.jsxs(wt,{title:"Your Status",sub:"Finish all 10 to unlock and submit your achievement.",children:[p.jsxs("div",{className:"row wrap",children:[p.jsxs("div",{className:"stat",children:[p.jsxs("div",{className:"stat-num mono",children:[o,"/10"]}),p.jsx("div",{className:"stat-label",children:"Locations"})]}),p.jsxs("div",{className:"stat",children:[p.jsx("div",{className:"stat-num mono",children:t.totalPoints||0}),p.jsx("div",{className:"stat-label",children:"Points"})]}),p.jsxs("div",{className:"stat",children:[p.jsx("div",{className:"stat-num",children:t.submittedAchievement?"":a?"":""}),p.jsx("div",{className:"stat-label",children:"Submitted"})]})]}),p.jsx("div",{className:"row",children:p.jsx(Ue,{className:"btn",to:a?"/certificate":"/",children:a?"Go to Certificate":"Continue Hunt"})}),!u&&p.jsx("div",{className:"hint warn",children:"Add your name + department on the home page to submit."})]}),p.jsx(wt,{title:"Top Explorers",sub:i?"Loading":"Ranked by points",children:p.jsxs("div",{className:"leader",children:[c.map((m,_)=>p.jsxs("div",{className:"leader-top",children:[p.jsx("div",{className:"medal",children:_===0?"":_===1?"":""}),p.jsxs("div",{className:"leader-name",children:[m.firstName," ",p.jsxs("span",{className:"muted",children:["(",m.department,")"]})]}),p.jsx("div",{className:"leader-points mono",children:m.totalPoints})]},m.id)),c.length===0&&p.jsx("div",{className:"muted",children:"No submissions yet. Be the first!"})]})}),p.jsxs(wt,{title:"Full Board",sub:"Up to 50 submissions shown",children:[p.jsxs("div",{className:"table",children:[p.jsxs("div",{className:"trow thead",children:[p.jsx("div",{children:"#"}),p.jsx("div",{children:"Name"}),p.jsx("div",{children:"Department"}),p.jsx("div",{className:"right",children:"Points"})]}),n.map((m,_)=>p.jsxs("div",{className:"trow",children:[p.jsx("div",{className:"mono",children:_+1}),p.jsx("div",{children:m.firstName}),p.jsx("div",{className:"muted",children:m.department}),p.jsx("div",{className:"right mono",children:m.totalPoints})]},m.id)),n.length===0&&!i&&p.jsx("div",{className:"muted",children:"No entries yet."})]}),p.jsx("div",{className:"hint muted",children:"Ethics & Respect note: Win with integrityhelp others join in and avoid blocking access to QR stations."})]})]})}function nO({state:t,setState:e,onToast:n}){var _,S,I,P;const r=k.useRef(null),i=Object.keys(t.solved||{}).length,s=i===zt.length,o=((S=(_=t.profile)==null?void 0:_.firstName)==null?void 0:S.trim())||"Explorer",a=((P=(I=t.profile)==null?void 0:I.department)==null?void 0:P.trim())||"Department",[u,c]=k.useState(!1),h=s&&!t.submittedAchievement;async function f(){if(r.current){c(!0);try{const E=await rV(r.current,{cacheBust:!0,pixelRatio:2}),v=document.createElement("a");v.href=E,v.download=`Italy-Explorer-${o}.png`,v.click(),n==null||n("Certificate downloaded!","ok")}catch{n==null||n("Could not generate image on this device.","warn")}finally{c(!1)}}}async function m(){c(!0);try{await eO(t,e)?n==null||n("Submitted to leaderboard!","ok"):n==null||n("Leaderboard submit not available (Firebase not configured) or already submitted.","warn")}finally{c(!1)}}return p.jsxs("div",{className:"stack",children:[p.jsxs("section",{className:"page-head",children:[p.jsxs("div",{className:"crumbs",children:[p.jsx(Ue,{to:"/",className:"crumb",children:"Home"}),p.jsx("span",{className:"crumb-sep",children:"/"}),p.jsx("span",{className:"crumb",children:"Certificate"})]}),p.jsx("h1",{className:"h1",children:"Italy Explorer"}),p.jsx("p",{className:"muted",children:s?"Achievement unlocked. Download or submit to the live leaderboard.":"Complete all 10 locations to unlock."})]}),p.jsx("div",{className:"certWrap",children:p.jsxs("div",{className:"certificate",ref:r,children:[p.jsxs("div",{className:"certTop",children:[p.jsx("div",{className:"certSeal","aria-hidden":"true",children:""}),p.jsxs("div",{children:[p.jsx("div",{className:"certTitle",children:"Italy Explorer Achievement"}),p.jsx("div",{className:"certSub",children:"Scavenger Hunt  Culture  Respect"})]})]}),p.jsxs("div",{className:"certMid",children:[p.jsx("div",{className:"certName",children:o}),p.jsx("div",{className:"certDept",children:a}),p.jsx("div",{className:"certLine"}),p.jsxs("div",{className:"certText",children:["Completed all ",p.jsx("strong",{children:"10"})," Italy locations and finished each minigame once."]}),p.jsxs("div",{className:"certPoints",children:["Total Points: ",p.jsx("span",{className:"mono",children:t.totalPoints||0})]})]}),p.jsxs("div",{className:"certBottom",children:[p.jsx("div",{className:"certFine",children:"Play fair  Cheer others on  Keep spaces welcoming"}),p.jsx("div",{className:"certStamp mono",children:new Date().toLocaleDateString()})]})]})}),p.jsxs(wt,{title:"Next",sub:"Leaderboard is shared across devices (requires free Firebase).",children:[p.jsxs("div",{className:"row",children:[p.jsx("button",{className:"btn",onClick:f,disabled:!s||u,children:"Download Certificate"}),p.jsx("button",{className:"btn alt",onClick:m,disabled:!h||u,children:t.submittedAchievement?"Already Submitted":"Submit to Leaderboard"}),p.jsx(Ue,{to:"/leaderboard",className:"ghost-btn",children:"View Leaderboard"})]}),!s&&p.jsxs("div",{className:"hint warn",children:["Complete all 10 first. Current: ",i,"/10"]})]})]})}function rO(){const t=typeof window<"u"?window.location.origin:"";return p.jsxs("div",{className:"stack",children:[p.jsxs("section",{className:"page-head",children:[p.jsxs("div",{className:"crumbs",children:[p.jsx(Ue,{to:"/",className:"crumb",children:"Home"}),p.jsx("span",{className:"crumb-sep",children:"/"}),p.jsx("span",{className:"crumb",children:"Admin Links"})]}),p.jsx("h1",{className:"h1",children:"QR Link List (Admin)"}),p.jsx("p",{className:"muted",children:"Use these URLs to generate QR codes. Each QR should link to its location page."})]}),p.jsxs(wt,{title:"Location URLs",sub:"Paste each URL into any QR generator.",children:[p.jsx("div",{className:"row",style:{marginBottom:"10px"},children:p.jsx(Ue,{to:"/admin/panel",className:"btn",children:"Open Admin Panel"})}),p.jsxs("div",{className:"table",children:[p.jsxs("div",{className:"trow thead",children:[p.jsx("div",{children:"#"}),p.jsx("div",{children:"Location"}),p.jsx("div",{children:"URL"})]}),zt.map(e=>{const n=`${t}/loc/${e.id}`;return p.jsxs("div",{className:"trow",children:[p.jsx("div",{className:"mono",children:e.id}),p.jsx("div",{children:e.city}),p.jsx("div",{className:"mono wrapline",children:n})]},e.id)})]}),p.jsx("div",{className:"hint muted",children:"Pro tip: Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laborum, libero nam. Repellendus tempora autem suscipit hic consequatur quia praesentium nulla eveniet sit commodi perferendis pariatur, qui cupiditate? Culpa, fugit optio."})]})]})}const t1="italy_qr_quest_v1";function iO(){try{const t=localStorage.getItem(t1);return t?JSON.parse(t):null}catch{return null}}function sO(t){localStorage.setItem(t1,JSON.stringify(t))}function n1(){return{profile:{firstName:"",department:""},solved:{},totalPoints:0,achievementUnlocked:!1,submittedAchievement:!1,createdAt:Date.now(),updatedAt:Date.now()}}function oO(){const t={};for(const e of zt)t[e.id]={solvedAt:Date.now(),points:100};return t}function aO({state:t,setState:e,onToast:n}){const[r,i]=k.useState([]),[s,o]=k.useState(!1),[a,u]=k.useState(""),[c,h]=k.useState(""),[f,m]=k.useState(!1),[_,S]=k.useState(""),I="ITALY-ADMIN";async function P(){o(!0);try{if(!Zd){i([]);return}await e1();const{db:w}=Zx(),N=Gx(Bx(w,"italyQuestLeaderboard"),Qx("totalPoints","desc"),Yx(200)),V=await Jx(N),j=[];V.forEach(x=>j.push({id:x.id,...x.data()})),i(j)}catch{i([])}finally{o(!1)}}k.useEffect(()=>{f&&P()},[f]),k.useMemo(()=>{const w=_.trim().toLowerCase();return w?r.filter(N=>{const V=String(N.firstName||"").toLowerCase(),j=String(N.department||"").toLowerCase(),x=String(N.id||"").toLowerCase();return V.includes(w)||j.includes(w)||x.includes(w)}):r},[r,_]);function E(){e(w=>{const N=n1();return{...N,theme:w.theme,profile:{...N.profile,...w.profile}}}),n==null||n("This device state has been reset.","ok")}function v(){const w=oO(),N=Object.values(w).reduce((V,j)=>V+(j.points||0),0);e(V=>({...V,solved:w,totalPoints:N,achievementUnlocked:!0})),n==null||n("Achievement bypass granted on this device.","ok")}return f?p.jsxs("div",{className:"stack",children:[p.jsxs("section",{className:"page-head",children:[p.jsxs("div",{className:"crumbs",children:[p.jsx(Ue,{to:"/",className:"crumb",children:"Home"}),p.jsx("span",{className:"crumb-sep",children:"/"}),p.jsx("span",{className:"crumb",children:"Admin Panel"})]}),p.jsx("h1",{className:"h1",children:"Admin Panel"}),p.jsx("p",{className:"muted",children:"Manage players: delete entries, reset progress, or grant achievement."})]}),p.jsxs(wt,{title:"Local Device Controls",sub:"Affects only this browser/device state.",children:[p.jsxs("div",{className:"admin-actions",children:[p.jsx("button",{className:"ghost-btn",onClick:E,children:"Reset This Device Mini-Games"}),p.jsx("button",{className:"btn alt",onClick:v,children:"Bypass + Grant Achievement (This Device)"})]}),p.jsxs("div",{className:"hint muted",children:["Current device: ",Object.keys(t.solved||{}).length,"/",zt.length," solved, ",t.totalPoints||0," points."]})]}),p.jsxs(wt,{title:"Leaderboard User Controls",sub:s?"Loading users...":"Firebase users",children:[p.jsx("div",{className:"hint warn",children:"Firebase is disabled in this environment."}),Zd]})]}):p.jsxs("div",{className:"stack",children:[p.jsxs("section",{className:"page-head",children:[p.jsxs("div",{className:"crumbs",children:[p.jsx(Ue,{to:"/",className:"crumb",children:"Home"}),p.jsx("span",{className:"crumb-sep",children:"/"}),p.jsx("span",{className:"crumb",children:"Admin Panel"})]}),p.jsx("h1",{className:"h1",children:"Admin Panel"}),p.jsx("p",{className:"muted",children:"Enter the admin code to continue."})]}),p.jsx(wt,{title:"Unlock Admin Tools",sub:"Use environment variable VITE_ADMIN_CODE to customize this code.",children:p.jsxs("div",{className:"admin-unlock",children:[p.jsx("input",{className:"input",value:c,onChange:w=>h(w.target.value),placeholder:"Admin code","aria-label":"Admin code"}),p.jsx("button",{className:"btn",onClick:()=>{c.trim()===I?(m(!0),n==null||n("Admin panel unlocked.","ok")):n==null||n("Incorrect admin code.","warn")},children:"Unlock"})]})})]})}function lO({msg:t,type:e="ok",onClose:n}){return k.useEffect(()=>{const r=setTimeout(()=>n==null?void 0:n(),2600);return()=>clearTimeout(r)},[n]),p.jsxs(En.div,{className:`toast ${e}`,initial:{opacity:0,y:18,filter:"blur(6px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},exit:{opacity:0,y:18,filter:"blur(6px)"},transition:{duration:.22},role:"status","aria-live":"polite",children:[p.jsx("div",{className:"toast-dot","aria-hidden":"true"}),p.jsx("div",{className:"toast-msg",children:t}),p.jsx("button",{className:"toast-x",onClick:n,"aria-label":"Close",children:""})]})}function uO(){const t=ii(),[e,n]=k.useState(null),[r,i]=k.useState(()=>iO()||n1()),[s,o]=k.useState(()=>{try{return sessionStorage.getItem("italy_intro_seen")!=="1"}catch{return!0}});k.useEffect(()=>{sO(r)},[r]),k.useEffect(()=>{const c=(r==null?void 0:r.theme)||localStorage.getItem("italy_theme")||"dark";document.documentElement.dataset.theme=c},[]),k.useEffect(()=>{if(!s)return;const c=setTimeout(()=>{o(!1);try{sessionStorage.setItem("italy_intro_seen","1")}catch{}},2200);return()=>clearTimeout(c)},[s]);const a=k.useMemo(()=>t.pathname,[t.pathname]);function u(c,h="ok"){n({msg:c,type:h,k:Date.now()})}return p.jsxs("div",{className:"app-shell",children:[p.jsx(Oy,{children:s&&p.jsxs(En.div,{className:"teleport-overlay",initial:{opacity:1},exit:{opacity:0,transition:{duration:.45}},"aria-hidden":"true",children:[p.jsx(En.div,{className:"teleport-map",initial:{scale:1.2,rotate:-3,filter:"blur(3px)"},animate:{scale:1,rotate:0,filter:"blur(0px)"},transition:{duration:1.7,ease:[.2,.8,.2,1]}}),p.jsx(En.div,{className:"teleport-ring ring-a",initial:{scale:.2,opacity:.9},animate:{scale:2.4,opacity:0},transition:{duration:1.4,repeat:1,ease:"easeOut"}}),p.jsx(En.div,{className:"teleport-ring ring-b",initial:{scale:.2,opacity:.8},animate:{scale:2.8,opacity:0},transition:{duration:1.4,repeat:1,ease:"easeOut",delay:.2}}),p.jsx(En.div,{className:"teleport-copy",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:p.jsx("span",{children:"Teleporting to Italy"})})]})}),p.jsx(Bb,{state:r,setState:i,onToast:u}),p.jsx("main",{className:"main",children:p.jsx(Oy,{mode:"wait",children:p.jsx(En.div,{initial:{opacity:0,y:10,filter:"blur(6px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},exit:{opacity:0,y:-8,filter:"blur(6px)"},transition:{duration:.28,ease:[.2,.8,.2,1]},children:p.jsxs(nP,{children:[p.jsx($n,{path:"/",element:p.jsx(Yb,{state:r,setState:i,onToast:u})}),p.jsx($n,{path:"/loc/:id",element:p.jsx(c2,{state:r,setState:i,onToast:u})}),p.jsx($n,{path:"/certificate",element:p.jsx(nO,{state:r,setState:i,onToast:u})}),p.jsx($n,{path:"/leaderboard",element:p.jsx(tO,{state:r,onToast:u})}),p.jsx($n,{path:"/admin/links",element:p.jsx(rO,{})}),p.jsx($n,{path:"/admin/panel",element:p.jsx(aO,{state:r,setState:i,onToast:u})}),p.jsx($n,{path:"*",element:p.jsx(eP,{to:"/",replace:!0})})]})},a)})}),e&&p.jsx(lO,{msg:e.msg,type:e.type,onClose:()=>n(null)},e.k)]})}const cO="/";_h.createRoot(document.getElementById("root")).render(p.jsx(T_.StrictMode,{children:p.jsx(uP,{basename:cO,children:p.jsx(uO,{})})}));
