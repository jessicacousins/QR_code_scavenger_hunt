function SA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function xA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u_={exports:{}},fu={},c_={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),AA=Symbol.for("react.portal"),IA=Symbol.for("react.fragment"),PA=Symbol.for("react.strict_mode"),CA=Symbol.for("react.profiler"),RA=Symbol.for("react.provider"),kA=Symbol.for("react.context"),NA=Symbol.for("react.forward_ref"),VA=Symbol.for("react.suspense"),DA=Symbol.for("react.memo"),bA=Symbol.for("react.lazy"),yg=Symbol.iterator;function LA(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var h_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d_=Object.assign,f_={};function ls(t,e,n){this.props=t,this.context=e,this.refs=f_,this.updater=n||h_}ls.prototype.isReactComponent={};ls.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ls.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p_(){}p_.prototype=ls.prototype;function Jd(t,e,n){this.props=t,this.context=e,this.refs=f_,this.updater=n||h_}var Zd=Jd.prototype=new p_;Zd.constructor=Jd;d_(Zd,ls.prototype);Zd.isPureReactComponent=!0;var vg=Array.isArray,m_=Object.prototype.hasOwnProperty,ef={current:null},g_={key:!0,ref:!0,__self:!0,__source:!0};function y_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)m_.call(e,r)&&!g_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xo,type:t,key:s,ref:o,props:i,_owner:ef.current}}function MA(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function OA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _g=/\/+/g;function vc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OA(""+t.key):e.toString(36)}function rl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xo:case AA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+vc(o,0):r,vg(i)?(n="",t!=null&&(n=t.replace(_g,"$&/")+"/"),rl(i,e,n,"",function(c){return c})):i!=null&&(tf(i)&&(i=MA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_g,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+vc(s,a);o+=rl(s,e,n,u,i)}else if(u=LA(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+vc(s,a++),o+=rl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ka(t,e,n){if(t==null)return t;var r=[],i=0;return rl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function jA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},il={transition:null},FA={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:il,ReactCurrentOwner:ef};function v_(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!tf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=ls;J.Fragment=IA;J.Profiler=CA;J.PureComponent=Jd;J.StrictMode=PA;J.Suspense=VA;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FA;J.act=v_;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ef.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)m_.call(e,u)&&!g_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xo,type:t.type,key:i,ref:s,props:r,_owner:o}};J.createContext=function(t){return t={$$typeof:kA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RA,_context:t},t.Consumer=t};J.createElement=y_;J.createFactory=function(t){var e=y_.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:NA,render:t}};J.isValidElement=tf;J.lazy=function(t){return{$$typeof:bA,_payload:{_status:-1,_result:t},_init:jA}};J.memo=function(t,e){return{$$typeof:DA,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=il.transition;il.transition={};try{t()}finally{il.transition=e}};J.unstable_act=v_;J.useCallback=function(t,e){return mt.current.useCallback(t,e)};J.useContext=function(t){return mt.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};J.useEffect=function(t,e){return mt.current.useEffect(t,e)};J.useId=function(){return mt.current.useId()};J.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return mt.current.useMemo(t,e)};J.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};J.useRef=function(t){return mt.current.useRef(t)};J.useState=function(t){return mt.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return mt.current.useTransition()};J.version="18.3.1";c_.exports=J;var k=c_.exports;const __=xA(k),UA=SA({__proto__:null,default:__},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA=k,$A=Symbol.for("react.element"),zA=Symbol.for("react.fragment"),WA=Object.prototype.hasOwnProperty,HA=BA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qA={key:!0,ref:!0,__self:!0,__source:!0};function w_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WA.call(e,r)&&!qA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$A,type:t,key:s,ref:o,props:i,_owner:HA.current}}fu.Fragment=zA;fu.jsx=w_;fu.jsxs=w_;u_.exports=fu;var g=u_.exports,vh={},E_={exports:{}},Vt={},T_={exports:{}},S_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var Q=$.length;$.push(G);e:for(;0<Q;){var _e=Q-1>>>1,le=$[_e];if(0<i(le,G))$[_e]=G,$[Q]=le,Q=_e;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],Q=$.pop();if(Q!==G){$[0]=Q;e:for(var _e=0,le=$.length,Re=le>>>1;_e<Re;){var dn=2*(_e+1)-1,fn=$[dn],pn=dn+1,mn=$[pn];if(0>i(fn,Q))pn<le&&0>i(mn,fn)?($[_e]=mn,$[pn]=Q,_e=pn):($[_e]=fn,$[dn]=Q,_e=dn);else if(pn<le&&0>i(mn,Q))$[_e]=mn,$[pn]=Q,_e=pn;else break e}}return G}function i($,G){var Q=$.sortIndex-G.sortIndex;return Q!==0?Q:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,p=3,v=!1,T=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=$)r(c),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(c)}}function V($){if(S=!1,x($),!T)if(n(u)!==null)T=!0,si(L);else{var G=n(c);G!==null&&he(V,G.startTime-$)}}function L($,G){T=!1,S&&(S=!1,w(y),y=-1),v=!0;var Q=p;try{for(x(G),f=n(u);f!==null&&(!(f.expirationTime>G)||$&&!N());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var le=_e(f.expirationTime<=G);G=t.unstable_now(),typeof le=="function"?f.callback=le:f===n(u)&&r(u),x(G)}else r(u);f=n(u)}if(f!==null)var Re=!0;else{var dn=n(c);dn!==null&&he(V,dn.startTime-G),Re=!1}return Re}finally{f=null,p=Q,v=!1}}var O=!1,I=null,y=-1,A=5,P=-1;function N(){return!(t.unstable_now()-P<A)}function D(){if(I!==null){var $=t.unstable_now();P=$;var G=!0;try{G=I(!0,$)}finally{G?R():(O=!1,I=null)}}else O=!1}var R;if(typeof _=="function")R=function(){_(D)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ln=ve.port2;ve.port1.onmessage=D,R=function(){Ln.postMessage(null)}}else R=function(){C(D,0)};function si($){I=$,O||(O=!0,R())}function he($,G){y=C(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,si(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var Q=p;p=G;try{return $()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=p;p=$;try{return G()}finally{p=Q}},t.unstable_scheduleCallback=function($,G,Q){var _e=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?_e+Q:_e):Q=_e,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Q+le,$={id:h++,callback:G,priorityLevel:$,startTime:Q,expirationTime:le,sortIndex:-1},Q>_e?($.sortIndex=Q,e(c,$),n(u)===null&&$===n(c)&&(S?(w(y),y=-1):S=!0,he(V,Q-_e))):($.sortIndex=le,e(u,$),T||v||(T=!0,si(L))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var G=p;return function(){var Q=p;p=G;try{return $.apply(this,arguments)}finally{p=Q}}}})(S_);T_.exports=S_;var KA=T_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA=k,kt=KA;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x_=new Set,_o={};function ti(t,e){Wi(t,e),Wi(t+"Capture",e)}function Wi(t,e){for(_o[t]=e,t=0;t<e.length;t++)x_.add(e[t])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_h=Object.prototype.hasOwnProperty,QA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wg={},Eg={};function XA(t){return _h.call(Eg,t)?!0:_h.call(wg,t)?!1:QA.test(t)?Eg[t]=!0:(wg[t]=!0,!1)}function YA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JA(t,e,n,r){if(e===null||typeof e>"u"||YA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function rf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nf,rf);Xe[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nf,rf);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nf,rf);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sf(t,e,n,r){var i=Xe.hasOwnProperty(e)?Xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JA(e,n,i,r)&&(n=null),r||i===null?XA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vn=GA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Na=Symbol.for("react.element"),gi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),wh=Symbol.for("react.profiler"),A_=Symbol.for("react.provider"),I_=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),Eh=Symbol.for("react.suspense"),Th=Symbol.for("react.suspense_list"),lf=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),P_=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function Vs(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,_c;function $s(t){if(_c===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_c=e&&e[1]||""}return`
`+_c+t}var wc=!1;function Ec(t,e){if(!t||wc)return"";wc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{wc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$s(t):""}function ZA(t){switch(t.tag){case 5:return $s(t.type);case 16:return $s("Lazy");case 13:return $s("Suspense");case 19:return $s("SuspenseList");case 0:case 2:case 15:return t=Ec(t.type,!1),t;case 11:return t=Ec(t.type.render,!1),t;case 1:return t=Ec(t.type,!0),t;default:return""}}function Sh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yi:return"Fragment";case gi:return"Portal";case wh:return"Profiler";case of:return"StrictMode";case Eh:return"Suspense";case Th:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I_:return(t.displayName||"Context")+".Consumer";case A_:return(t._context.displayName||"Context")+".Provider";case af:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lf:return e=t.displayName||null,e!==null?e:Sh(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return Sh(t(e))}catch{}}return null}function e1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sh(e);case 8:return e===of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t1(t){var e=C_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=t1(t))}function R_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xh(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k_(t,e){e=e.checked,e!=null&&sf(t,"checked",e,!1)}function Ah(t,e){k_(t,e);var n=cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ih(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ih(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ih(t,e,n){(e!=="number"||xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zs=Array.isArray;function Di(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ag(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(zs(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cr(n)}}function N_(t,e){var n=cr(e.value),r=cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,D_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n1=["Webkit","ms","Moz","O"];Object.keys(Zs).forEach(function(t){n1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zs[e]=Zs[t]})});function b_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zs.hasOwnProperty(t)&&Zs[t]?(""+e).trim():e+"px"}function L_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=b_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r1=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rh(t,e){if(e){if(r1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nh=null;function uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vh=null,bi=null,Li=null;function Pg(t){if(t=Zo(t)){if(typeof Vh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=vu(e),Vh(t.stateNode,t.type,e))}}function M_(t){bi?Li?Li.push(t):Li=[t]:bi=t}function O_(){if(bi){var t=bi,e=Li;if(Li=bi=null,Pg(t),e)for(t=0;t<e.length;t++)Pg(e[t])}}function j_(t,e){return t(e)}function F_(){}var Tc=!1;function U_(t,e,n){if(Tc)return t(e,n);Tc=!0;try{return j_(t,e,n)}finally{Tc=!1,(bi!==null||Li!==null)&&(F_(),O_())}}function Eo(t,e){var n=t.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Dh=!1;if(An)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Dh=!1}function i1(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var eo=!1,Al=null,Il=!1,bh=null,s1={onError:function(t){eo=!0,Al=t}};function o1(t,e,n,r,i,s,o,a,u){eo=!1,Al=null,i1.apply(s1,arguments)}function a1(t,e,n,r,i,s,o,a,u){if(o1.apply(this,arguments),eo){if(eo){var c=Al;eo=!1,Al=null}else throw Error(F(198));Il||(Il=!0,bh=c)}}function ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(ni(t)!==t)throw Error(F(188))}function l1(t){var e=t.alternate;if(!e){if(e=ni(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cg(i),t;if(s===r)return Cg(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function $_(t){return t=l1(t),t!==null?z_(t):null}function z_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z_(t);if(e!==null)return e;t=t.sibling}return null}var W_=kt.unstable_scheduleCallback,Rg=kt.unstable_cancelCallback,u1=kt.unstable_shouldYield,c1=kt.unstable_requestPaint,Ve=kt.unstable_now,h1=kt.unstable_getCurrentPriorityLevel,cf=kt.unstable_ImmediatePriority,H_=kt.unstable_UserBlockingPriority,Pl=kt.unstable_NormalPriority,d1=kt.unstable_LowPriority,q_=kt.unstable_IdlePriority,pu=null,sn=null;function f1(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(pu,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:g1,p1=Math.log,m1=Math.LN2;function g1(t){return t>>>=0,t===0?32:31-(p1(t)/m1|0)|0}var ba=64,La=4194304;function Ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ws(a):(s&=o,s!==0&&(r=Ws(s)))}else o=n&~i,o!==0?r=Ws(o):s!==0&&(r=Ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qt(e),i=1<<n,r|=t[n],e&=~i;return r}function y1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Qt(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=y1(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Lh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K_(){var t=ba;return ba<<=1,!(ba&4194240)&&(ba=64),t}function Sc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=n}function _1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function G_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Q_,df,X_,Y_,J_,Mh=!1,Ma=[],Jn=null,Zn=null,er=null,To=new Map,So=new Map,Wn=[],w1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(e.pointerId)}}function bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zo(e),e!==null&&df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function E1(t,e,n,r,i){switch(e){case"focusin":return Jn=bs(Jn,t,e,n,r,i),!0;case"dragenter":return Zn=bs(Zn,t,e,n,r,i),!0;case"mouseover":return er=bs(er,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return To.set(s,bs(To.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,So.set(s,bs(So.get(s)||null,t,e,n,r,i)),!0}return!1}function Z_(t){var e=Lr(t.target);if(e!==null){var n=ni(e);if(n!==null){if(e=n.tag,e===13){if(e=B_(n),e!==null){t.blockedOn=e,J_(t.priority,function(){X_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nh=r,n.target.dispatchEvent(r),Nh=null}else return e=Zo(n),e!==null&&df(e),t.blockedOn=n,!1;e.shift()}return!0}function Ng(t,e,n){sl(t)&&n.delete(e)}function T1(){Mh=!1,Jn!==null&&sl(Jn)&&(Jn=null),Zn!==null&&sl(Zn)&&(Zn=null),er!==null&&sl(er)&&(er=null),To.forEach(Ng),So.forEach(Ng)}function Ls(t,e){t.blockedOn===e&&(t.blockedOn=null,Mh||(Mh=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,T1)))}function xo(t){function e(i){return Ls(i,t)}if(0<Ma.length){Ls(Ma[0],t);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jn!==null&&Ls(Jn,t),Zn!==null&&Ls(Zn,t),er!==null&&Ls(er,t),To.forEach(e),So.forEach(e),n=0;n<Wn.length;n++)r=Wn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)Z_(n),n.blockedOn===null&&Wn.shift()}var Mi=Vn.ReactCurrentBatchConfig,Rl=!0;function S1(t,e,n,r){var i=ae,s=Mi.transition;Mi.transition=null;try{ae=1,ff(t,e,n,r)}finally{ae=i,Mi.transition=s}}function x1(t,e,n,r){var i=ae,s=Mi.transition;Mi.transition=null;try{ae=4,ff(t,e,n,r)}finally{ae=i,Mi.transition=s}}function ff(t,e,n,r){if(Rl){var i=Oh(t,e,n,r);if(i===null)Dc(t,e,r,kl,n),kg(t,r);else if(E1(i,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<w1.indexOf(t)){for(;i!==null;){var s=Zo(i);if(s!==null&&Q_(s),s=Oh(t,e,n,r),s===null&&Dc(t,e,r,kl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dc(t,e,r,null,n)}}var kl=null;function Oh(t,e,n,r){if(kl=null,t=uf(r),t=Lr(t),t!==null)if(e=ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function ew(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h1()){case cf:return 1;case H_:return 4;case Pl:case d1:return 16;case q_:return 536870912;default:return 16}default:return 16}}var qn=null,pf=null,ol=null;function tw(){if(ol)return ol;var t,e=pf,n=e.length,r,i="value"in qn?qn.value:qn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ol=i.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function Vg(){return!1}function Dt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oa:Vg,this.isPropagationStopped=Vg,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=Dt(us),Jo=xe({},us,{view:0,detail:0}),A1=Dt(Jo),xc,Ac,Ms,mu=xe({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ms&&(Ms&&t.type==="mousemove"?(xc=t.screenX-Ms.screenX,Ac=t.screenY-Ms.screenY):Ac=xc=0,Ms=t),xc)},movementY:function(t){return"movementY"in t?t.movementY:Ac}}),Dg=Dt(mu),I1=xe({},mu,{dataTransfer:0}),P1=Dt(I1),C1=xe({},Jo,{relatedTarget:0}),Ic=Dt(C1),R1=xe({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),k1=Dt(R1),N1=xe({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),V1=Dt(N1),D1=xe({},us,{data:0}),bg=Dt(D1),b1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M1[t])?!!e[t]:!1}function gf(){return O1}var j1=xe({},Jo,{key:function(t){if(t.key){var e=b1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F1=Dt(j1),U1=xe({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=Dt(U1),B1=xe({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),$1=Dt(B1),z1=xe({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),W1=Dt(z1),H1=xe({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q1=Dt(H1),K1=[9,13,27,32],yf=An&&"CompositionEvent"in window,to=null;An&&"documentMode"in document&&(to=document.documentMode);var G1=An&&"TextEvent"in window&&!to,nw=An&&(!yf||to&&8<to&&11>=to),Mg=" ",Og=!1;function rw(t,e){switch(t){case"keyup":return K1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vi=!1;function Q1(t,e){switch(t){case"compositionend":return iw(e);case"keypress":return e.which!==32?null:(Og=!0,Mg);case"textInput":return t=e.data,t===Mg&&Og?null:t;default:return null}}function X1(t,e){if(vi)return t==="compositionend"||!yf&&rw(t,e)?(t=tw(),ol=pf=qn=null,vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nw&&e.locale!=="ko"?null:e.data;default:return null}}var Y1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y1[t.type]:e==="textarea"}function sw(t,e,n,r){M_(r),e=Nl(e,"onChange"),0<e.length&&(n=new mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,Ao=null;function J1(t){gw(t,0)}function gu(t){var e=Ei(t);if(R_(e))return t}function Z1(t,e){if(t==="change")return e}var ow=!1;if(An){var Pc;if(An){var Cc="oninput"in document;if(!Cc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Cc=typeof Fg.oninput=="function"}Pc=Cc}else Pc=!1;ow=Pc&&(!document.documentMode||9<document.documentMode)}function Ug(){no&&(no.detachEvent("onpropertychange",aw),Ao=no=null)}function aw(t){if(t.propertyName==="value"&&gu(Ao)){var e=[];sw(e,Ao,t,uf(t)),U_(J1,e)}}function eI(t,e,n){t==="focusin"?(Ug(),no=e,Ao=n,no.attachEvent("onpropertychange",aw)):t==="focusout"&&Ug()}function tI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(Ao)}function nI(t,e){if(t==="click")return gu(e)}function rI(t,e){if(t==="input"||t==="change")return gu(e)}function iI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:iI;function Io(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_h.call(e,i)||!Yt(t[i],e[i]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=Bg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bg(n)}}function lw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uw(){for(var t=window,e=xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xl(t.document)}return e}function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sI(t){var e=uw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lw(n.ownerDocument.documentElement,n)){if(r!==null&&vf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$g(n,s);var o=$g(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oI=An&&"documentMode"in document&&11>=document.documentMode,_i=null,jh=null,ro=null,Fh=!1;function zg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fh||_i==null||_i!==xl(r)||(r=_i,"selectionStart"in r&&vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&Io(ro,r)||(ro=r,r=Nl(jh,"onSelect"),0<r.length&&(e=new mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_i)))}function ja(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},Rc={},cw={};An&&(cw=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function yu(t){if(Rc[t])return Rc[t];if(!wi[t])return t;var e=wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cw)return Rc[t]=e[n];return t}var hw=yu("animationend"),dw=yu("animationiteration"),fw=yu("animationstart"),pw=yu("transitionend"),mw=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(t,e){mw.set(t,e),ti(e,[t])}for(var kc=0;kc<Wg.length;kc++){var Nc=Wg[kc],aI=Nc.toLowerCase(),lI=Nc[0].toUpperCase()+Nc.slice(1);vr(aI,"on"+lI)}vr(hw,"onAnimationEnd");vr(dw,"onAnimationIteration");vr(fw,"onAnimationStart");vr("dblclick","onDoubleClick");vr("focusin","onFocus");vr("focusout","onBlur");vr(pw,"onTransitionEnd");Wi("onMouseEnter",["mouseout","mouseover"]);Wi("onMouseLeave",["mouseout","mouseover"]);Wi("onPointerEnter",["pointerout","pointerover"]);Wi("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function Hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,a1(r,e,void 0,t),t.currentTarget=null}function gw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Hg(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Hg(i,a,c),s=u}}}if(Il)throw t=bh,Il=!1,bh=null,t}function fe(t,e){var n=e[Wh];n===void 0&&(n=e[Wh]=new Set);var r=t+"__bubble";n.has(r)||(yw(e,t,2,!1),n.add(r))}function Vc(t,e,n){var r=0;e&&(r|=4),yw(n,t,r,e)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[Fa]){t[Fa]=!0,x_.forEach(function(n){n!=="selectionchange"&&(uI.has(n)||Vc(n,!1,t),Vc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fa]||(e[Fa]=!0,Vc("selectionchange",!1,e))}}function yw(t,e,n,r){switch(ew(e)){case 1:var i=S1;break;case 4:i=x1;break;default:i=ff}n=i.bind(null,e,n,t),i=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Lr(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}U_(function(){var c=s,h=uf(n),f=[];e:{var p=mw.get(t);if(p!==void 0){var v=mf,T=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":v=F1;break;case"focusin":T="focus",v=Ic;break;case"focusout":T="blur",v=Ic;break;case"beforeblur":case"afterblur":v=Ic;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=$1;break;case hw:case dw:case fw:v=k1;break;case pw:v=W1;break;case"scroll":v=A1;break;case"wheel":v=q1;break;case"copy":case"cut":case"paste":v=V1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Lg}var S=(e&4)!==0,C=!S&&t==="scroll",w=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,x;_!==null;){x=_;var V=x.stateNode;if(x.tag===5&&V!==null&&(x=V,w!==null&&(V=Eo(_,w),V!=null&&S.push(Co(_,V,x)))),C)break;_=_.return}0<S.length&&(p=new v(p,T,null,n,h),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Nh&&(T=n.relatedTarget||n.fromElement)&&(Lr(T)||T[In]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=c,T=T?Lr(T):null,T!==null&&(C=ni(T),T!==C||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=c),v!==T)){if(S=Dg,V="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=Lg,V="onPointerLeave",w="onPointerEnter",_="pointer"),C=v==null?p:Ei(v),x=T==null?p:Ei(T),p=new S(V,_+"leave",v,n,h),p.target=C,p.relatedTarget=x,V=null,Lr(h)===c&&(S=new S(w,_+"enter",T,n,h),S.target=x,S.relatedTarget=C,V=S),C=V,v&&T)t:{for(S=v,w=T,_=0,x=S;x;x=ci(x))_++;for(x=0,V=w;V;V=ci(V))x++;for(;0<_-x;)S=ci(S),_--;for(;0<x-_;)w=ci(w),x--;for(;_--;){if(S===w||w!==null&&S===w.alternate)break t;S=ci(S),w=ci(w)}S=null}else S=null;v!==null&&qg(f,p,v,S,!1),T!==null&&C!==null&&qg(f,C,T,S,!0)}}e:{if(p=c?Ei(c):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var L=Z1;else if(jg(p))if(ow)L=rI;else{L=tI;var O=eI}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=nI);if(L&&(L=L(t,c))){sw(f,L,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Ih(p,"number",p.value)}switch(O=c?Ei(c):window,t){case"focusin":(jg(O)||O.contentEditable==="true")&&(_i=O,jh=c,ro=null);break;case"focusout":ro=jh=_i=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,zg(f,n,h);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":zg(f,n,h)}var I;if(yf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else vi?rw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(nw&&n.locale!=="ko"&&(vi||y!=="onCompositionStart"?y==="onCompositionEnd"&&vi&&(I=tw()):(qn=h,pf="value"in qn?qn.value:qn.textContent,vi=!0)),O=Nl(c,y),0<O.length&&(y=new bg(y,t,null,n,h),f.push({event:y,listeners:O}),I?y.data=I:(I=iw(n),I!==null&&(y.data=I)))),(I=G1?Q1(t,n):X1(t,n))&&(c=Nl(c,"onBeforeInput"),0<c.length&&(h=new bg("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=I))}gw(f,e)})}function Co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Eo(t,n),s!=null&&r.unshift(Co(t,s,i)),s=Eo(t,e),s!=null&&r.push(Co(t,s,i))),t=t.return}return r}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Eo(n,s),u!=null&&o.unshift(Co(n,u,a))):i||(u=Eo(n,s),u!=null&&o.push(Co(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cI=/\r\n?/g,hI=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(cI,`
`).replace(hI,"")}function Ua(t,e,n){if(e=Kg(e),Kg(t)!==e&&n)throw Error(F(425))}function Vl(){}var Uh=null,Bh=null;function $h(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,dI=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,fI=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(pI)}:zh;function pI(t){setTimeout(function(){throw t})}function bc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xo(e)}function tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),nn="__reactFiber$"+cs,Ro="__reactProps$"+cs,In="__reactContainer$"+cs,Wh="__reactEvents$"+cs,mI="__reactListeners$"+cs,gI="__reactHandles$"+cs;function Lr(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qg(t);t!==null;){if(n=t[nn])return n;t=Qg(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[nn]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function vu(t){return t[Ro]||null}var Hh=[],Ti=-1;function _r(t){return{current:t}}function me(t){0>Ti||(t.current=Hh[Ti],Hh[Ti]=null,Ti--)}function ce(t,e){Ti++,Hh[Ti]=t.current,t.current=e}var hr={},ct=_r(hr),wt=_r(!1),Kr=hr;function Hi(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Et(t){return t=t.childContextTypes,t!=null}function Dl(){me(wt),me(ct)}function Xg(t,e,n){if(ct.current!==hr)throw Error(F(168));ce(ct,e),ce(wt,n)}function vw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,e1(t)||"Unknown",i));return xe({},n,r)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Kr=ct.current,ce(ct,t),ce(wt,wt.current),!0}function Yg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=vw(t,e,Kr),r.__reactInternalMemoizedMergedChildContext=t,me(wt),me(ct),ce(ct,t)):me(wt),ce(wt,n)}var _n=null,_u=!1,Lc=!1;function _w(t){_n===null?_n=[t]:_n.push(t)}function yI(t){_u=!0,_w(t)}function wr(){if(!Lc&&_n!==null){Lc=!0;var t=0,e=ae;try{var n=_n;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_n=null,_u=!1}catch(i){throw _n!==null&&(_n=_n.slice(t+1)),W_(cf,wr),i}finally{ae=e,Lc=!1}}return null}var Si=[],xi=0,Ll=null,Ml=0,Mt=[],Ot=0,Gr=null,wn=1,En="";function kr(t,e){Si[xi++]=Ml,Si[xi++]=Ll,Ll=t,Ml=e}function ww(t,e,n){Mt[Ot++]=wn,Mt[Ot++]=En,Mt[Ot++]=Gr,Gr=t;var r=wn;t=En;var i=32-Qt(r)-1;r&=~(1<<i),n+=1;var s=32-Qt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wn=1<<32-Qt(e)+i|n<<i|r,En=s+t}else wn=1<<s|n<<i|r,En=t}function _f(t){t.return!==null&&(kr(t,1),ww(t,1,0))}function wf(t){for(;t===Ll;)Ll=Si[--xi],Si[xi]=null,Ml=Si[--xi],Si[xi]=null;for(;t===Gr;)Gr=Mt[--Ot],Mt[Ot]=null,En=Mt[--Ot],Mt[Ot]=null,wn=Mt[--Ot],Mt[Ot]=null}var Ct=null,Pt=null,ye=!1,Kt=null;function Ew(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,Pt=tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:wn,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,Pt=null,!0):!1;default:return!1}}function qh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kh(t){if(ye){var e=Pt;if(e){var n=e;if(!Jg(t,e)){if(qh(t))throw Error(F(418));e=tr(n.nextSibling);var r=Ct;e&&Jg(t,e)?Ew(r,n):(t.flags=t.flags&-4097|2,ye=!1,Ct=t)}}else{if(qh(t))throw Error(F(418));t.flags=t.flags&-4097|2,ye=!1,Ct=t}}}function Zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function Ba(t){if(t!==Ct)return!1;if(!ye)return Zg(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$h(t.type,t.memoizedProps)),e&&(e=Pt)){if(qh(t))throw Tw(),Error(F(418));for(;e;)Ew(t,e),e=tr(e.nextSibling)}if(Zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Ct?tr(t.stateNode.nextSibling):null;return!0}function Tw(){for(var t=Pt;t;)t=tr(t.nextSibling)}function qi(){Pt=Ct=null,ye=!1}function Ef(t){Kt===null?Kt=[t]:Kt.push(t)}var vI=Vn.ReactCurrentBatchConfig;function Os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function $a(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ey(t){var e=t._init;return e(t._payload)}function Sw(t){function e(w,_){if(t){var x=w.deletions;x===null?(w.deletions=[_],w.flags|=16):x.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=sr(w,_),w.index=0,w.sibling=null,w}function s(w,_,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<_?(w.flags|=2,_):x):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,x,V){return _===null||_.tag!==6?(_=$c(x,w.mode,V),_.return=w,_):(_=i(_,x),_.return=w,_)}function u(w,_,x,V){var L=x.type;return L===yi?h(w,_,x.props.children,V,x.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$n&&ey(L)===_.type)?(V=i(_,x.props),V.ref=Os(w,_,x),V.return=w,V):(V=pl(x.type,x.key,x.props,null,w.mode,V),V.ref=Os(w,_,x),V.return=w,V)}function c(w,_,x,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=zc(x,w.mode,V),_.return=w,_):(_=i(_,x.children||[]),_.return=w,_)}function h(w,_,x,V,L){return _===null||_.tag!==7?(_=$r(x,w.mode,V,L),_.return=w,_):(_=i(_,x),_.return=w,_)}function f(w,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=$c(""+_,w.mode,x),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Na:return x=pl(_.type,_.key,_.props,null,w.mode,x),x.ref=Os(w,null,_),x.return=w,x;case gi:return _=zc(_,w.mode,x),_.return=w,_;case $n:var V=_._init;return f(w,V(_._payload),x)}if(zs(_)||Vs(_))return _=$r(_,w.mode,x,null),_.return=w,_;$a(w,_)}return null}function p(w,_,x,V){var L=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return L!==null?null:a(w,_,""+x,V);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Na:return x.key===L?u(w,_,x,V):null;case gi:return x.key===L?c(w,_,x,V):null;case $n:return L=x._init,p(w,_,L(x._payload),V)}if(zs(x)||Vs(x))return L!==null?null:h(w,_,x,V,null);$a(w,x)}return null}function v(w,_,x,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(x)||null,a(_,w,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Na:return w=w.get(V.key===null?x:V.key)||null,u(_,w,V,L);case gi:return w=w.get(V.key===null?x:V.key)||null,c(_,w,V,L);case $n:var O=V._init;return v(w,_,x,O(V._payload),L)}if(zs(V)||Vs(V))return w=w.get(x)||null,h(_,w,V,L,null);$a(_,V)}return null}function T(w,_,x,V){for(var L=null,O=null,I=_,y=_=0,A=null;I!==null&&y<x.length;y++){I.index>y?(A=I,I=null):A=I.sibling;var P=p(w,I,x[y],V);if(P===null){I===null&&(I=A);break}t&&I&&P.alternate===null&&e(w,I),_=s(P,_,y),O===null?L=P:O.sibling=P,O=P,I=A}if(y===x.length)return n(w,I),ye&&kr(w,y),L;if(I===null){for(;y<x.length;y++)I=f(w,x[y],V),I!==null&&(_=s(I,_,y),O===null?L=I:O.sibling=I,O=I);return ye&&kr(w,y),L}for(I=r(w,I);y<x.length;y++)A=v(I,w,y,x[y],V),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?y:A.key),_=s(A,_,y),O===null?L=A:O.sibling=A,O=A);return t&&I.forEach(function(N){return e(w,N)}),ye&&kr(w,y),L}function S(w,_,x,V){var L=Vs(x);if(typeof L!="function")throw Error(F(150));if(x=L.call(x),x==null)throw Error(F(151));for(var O=L=null,I=_,y=_=0,A=null,P=x.next();I!==null&&!P.done;y++,P=x.next()){I.index>y?(A=I,I=null):A=I.sibling;var N=p(w,I,P.value,V);if(N===null){I===null&&(I=A);break}t&&I&&N.alternate===null&&e(w,I),_=s(N,_,y),O===null?L=N:O.sibling=N,O=N,I=A}if(P.done)return n(w,I),ye&&kr(w,y),L;if(I===null){for(;!P.done;y++,P=x.next())P=f(w,P.value,V),P!==null&&(_=s(P,_,y),O===null?L=P:O.sibling=P,O=P);return ye&&kr(w,y),L}for(I=r(w,I);!P.done;y++,P=x.next())P=v(I,w,y,P.value,V),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?y:P.key),_=s(P,_,y),O===null?L=P:O.sibling=P,O=P);return t&&I.forEach(function(D){return e(w,D)}),ye&&kr(w,y),L}function C(w,_,x,V){if(typeof x=="object"&&x!==null&&x.type===yi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Na:e:{for(var L=x.key,O=_;O!==null;){if(O.key===L){if(L=x.type,L===yi){if(O.tag===7){n(w,O.sibling),_=i(O,x.props.children),_.return=w,w=_;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$n&&ey(L)===O.type){n(w,O.sibling),_=i(O,x.props),_.ref=Os(w,O,x),_.return=w,w=_;break e}n(w,O);break}else e(w,O);O=O.sibling}x.type===yi?(_=$r(x.props.children,w.mode,V,x.key),_.return=w,w=_):(V=pl(x.type,x.key,x.props,null,w.mode,V),V.ref=Os(w,_,x),V.return=w,w=V)}return o(w);case gi:e:{for(O=x.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(w,_.sibling),_=i(_,x.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=zc(x,w.mode,V),_.return=w,w=_}return o(w);case $n:return O=x._init,C(w,_,O(x._payload),V)}if(zs(x))return T(w,_,x,V);if(Vs(x))return S(w,_,x,V);$a(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,x),_.return=w,w=_):(n(w,_),_=$c(x,w.mode,V),_.return=w,w=_),o(w)):n(w,_)}return C}var Ki=Sw(!0),xw=Sw(!1),Ol=_r(null),jl=null,Ai=null,Tf=null;function Sf(){Tf=Ai=jl=null}function xf(t){var e=Ol.current;me(Ol),t._currentValue=e}function Gh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oi(t,e){jl=t,Tf=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Tf!==t)if(t={context:t,memoizedValue:e,next:null},Ai===null){if(jl===null)throw Error(F(308));Ai=t,jl.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return e}var Mr=null;function Af(t){Mr===null?Mr=[t]:Mr.push(t)}function Aw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Af(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pn(t,r)}function Pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zn=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pn(t,n)}return i=r.interleaved,i===null?(e.next=e,Af(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pn(t,n)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hf(t,n)}}function ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fl(t,e,n,r){var i=t.updateQueue;zn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,a=s;do{var p=a.lane,v=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,S=a;switch(p=e,v=n,S.tag){case 1:if(T=S.payload,typeof T=="function"){f=T.call(v,f,p);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=S.payload,p=typeof T=="function"?T.call(v,f,p):T,p==null)break e;f=xe({},f,p);break e;case 2:zn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else v={eventTime:v,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=v,u=f):h=h.next=v,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=f}}function ny(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var ea={},on=_r(ea),ko=_r(ea),No=_r(ea);function Or(t){if(t===ea)throw Error(F(174));return t}function Pf(t,e){switch(ce(No,e),ce(ko,t),ce(on,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ch(e,t)}me(on),ce(on,e)}function Gi(){me(on),me(ko),me(No)}function Pw(t){Or(No.current);var e=Or(on.current),n=Ch(e,t.type);e!==n&&(ce(ko,t),ce(on,n))}function Cf(t){ko.current===t&&(me(on),me(ko))}var we=_r(0);function Ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mc=[];function Rf(){for(var t=0;t<Mc.length;t++)Mc[t]._workInProgressVersionPrimary=null;Mc.length=0}var ul=Vn.ReactCurrentDispatcher,Oc=Vn.ReactCurrentBatchConfig,Qr=0,Se=null,je=null,Be=null,Bl=!1,io=!1,Vo=0,_I=0;function tt(){throw Error(F(321))}function kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function Nf(t,e,n,r,i,s){if(Qr=s,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ul.current=t===null||t.memoizedState===null?SI:xI,t=n(r,i),io){s=0;do{if(io=!1,Vo=0,25<=s)throw Error(F(301));s+=1,Be=je=null,e.updateQueue=null,ul.current=AI,t=n(r,i)}while(io)}if(ul.current=$l,e=je!==null&&je.next!==null,Qr=0,Be=je=Se=null,Bl=!1,e)throw Error(F(300));return t}function Vf(){var t=Vo!==0;return Vo=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Se.memoizedState=Be=t:Be=Be.next=t,Be}function Bt(){if(je===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Be===null?Se.memoizedState:Be.next;if(e!==null)Be=e,je=t;else{if(t===null)throw Error(F(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Be===null?Se.memoizedState=Be=t:Be=Be.next=t}return Be}function Do(t,e){return typeof e=="function"?e(t):e}function jc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Qr&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Se.lanes|=h,Xr|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Yt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Se.lanes|=s,Xr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yt(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Cw(){}function Rw(t,e){var n=Se,r=Bt(),i=e(),s=!Yt(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,Df(Vw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,bo(9,Nw.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(F(349));Qr&30||kw(n,e,i)}return i}function kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nw(t,e,n,r){e.value=n,e.getSnapshot=r,Dw(e)&&bw(t)}function Vw(t,e,n){return n(function(){Dw(e)&&bw(t)})}function Dw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function bw(t){var e=Pn(t,1);e!==null&&Xt(e,t,1,-1)}function ry(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},e.queue=t,t=t.dispatch=TI.bind(null,Se,t),[e.memoizedState,t]}function bo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lw(){return Bt().memoizedState}function cl(t,e,n,r){var i=tn();Se.flags|=t,i.memoizedState=bo(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var i=Bt();r=r===void 0?null:r;var s=void 0;if(je!==null){var o=je.memoizedState;if(s=o.destroy,r!==null&&kf(r,o.deps)){i.memoizedState=bo(e,n,s,r);return}}Se.flags|=t,i.memoizedState=bo(1|e,n,s,r)}function iy(t,e){return cl(8390656,8,t,e)}function Df(t,e){return wu(2048,8,t,e)}function Mw(t,e){return wu(4,2,t,e)}function Ow(t,e){return wu(4,4,t,e)}function jw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fw(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,jw.bind(null,e,t),n)}function bf(){}function Uw(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Bw(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $w(t,e,n){return Qr&21?(Yt(n,e)||(n=K_(),Se.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function wI(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Oc.transition;Oc.transition={};try{t(!1),e()}finally{ae=n,Oc.transition=r}}function zw(){return Bt().memoizedState}function EI(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ww(t))Hw(e,n);else if(n=Aw(t,e,n,r),n!==null){var i=pt();Xt(n,t,r,i),qw(n,e,r)}}function TI(t,e,n){var r=ir(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ww(t))Hw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yt(a,o)){var u=e.interleaved;u===null?(i.next=i,Af(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Aw(t,e,i,r),n!==null&&(i=pt(),Xt(n,t,r,i),qw(n,e,r))}}function Ww(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Hw(t,e){io=Bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hf(t,n)}}var $l={readContext:Ut,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},SI={readContext:Ut,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:iy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cl(4194308,4,jw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EI.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:ry,useDebugValue:bf,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=ry(!1),e=t[0];return t=wI.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,i=tn();if(ye){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),$e===null)throw Error(F(349));Qr&30||kw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iy(Vw.bind(null,r,s,t),[t]),r.flags|=2048,bo(9,Nw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tn(),e=$e.identifierPrefix;if(ye){var n=En,r=wn;n=(r&~(1<<32-Qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_I++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xI={readContext:Ut,useCallback:Uw,useContext:Ut,useEffect:Df,useImperativeHandle:Fw,useInsertionEffect:Mw,useLayoutEffect:Ow,useMemo:Bw,useReducer:jc,useRef:Lw,useState:function(){return jc(Do)},useDebugValue:bf,useDeferredValue:function(t){var e=Bt();return $w(e,je.memoizedState,t)},useTransition:function(){var t=jc(Do)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Rw,useId:zw,unstable_isNewReconciler:!1},AI={readContext:Ut,useCallback:Uw,useContext:Ut,useEffect:Df,useImperativeHandle:Fw,useInsertionEffect:Mw,useLayoutEffect:Ow,useMemo:Bw,useReducer:Fc,useRef:Lw,useState:function(){return Fc(Do)},useDebugValue:bf,useDeferredValue:function(t){var e=Bt();return je===null?e.memoizedState=t:$w(e,je.memoizedState,t)},useTransition:function(){var t=Fc(Do)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Rw,useId:zw,unstable_isNewReconciler:!1};function Ht(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=ir(t),s=Tn(r,i);s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(Xt(e,t,i,r),ll(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=ir(t),s=Tn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(Xt(e,t,i,r),ll(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=ir(t),i=Tn(n,r);i.tag=2,e!=null&&(i.callback=e),e=nr(t,i,r),e!==null&&(Xt(e,t,r,n),ll(e,t,r))}};function sy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Io(n,r)||!Io(i,s):!0}function Kw(t,e,n){var r=!1,i=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=Et(e)?Kr:ct.current,r=e.contextTypes,s=(r=r!=null)?Hi(t,i):hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function oy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function Xh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},If(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=Et(e)?Kr:ct.current,i.context=Hi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Eu.enqueueReplaceState(i,i.state,null),Fl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qi(t,e){try{var n="",r=e;do n+=ZA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var II=typeof WeakMap=="function"?WeakMap:Map;function Gw(t,e,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,ad=r),Yh(t,e)},n}function Qw(t,e,n){n=Tn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yh(t,e),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ay(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new II;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UI.bind(null,t,e,n),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tn(-1,1),e.tag=2,nr(n,e,1))),n.lanes|=1),t)}var PI=Vn.ReactCurrentOwner,_t=!1;function ft(t,e,n,r){e.child=t===null?xw(e,null,n,r):Ki(e,t.child,n,r)}function cy(t,e,n,r,i){n=n.render;var s=e.ref;return Oi(e,i),r=Nf(t,e,n,r,s,i),n=Vf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cn(t,e,i)):(ye&&n&&_f(e),e.flags|=1,ft(t,e,r,i),e.child)}function hy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$f(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xw(t,e,s,r,i)):(t=pl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(o,r)&&t.ref===e.ref)return Cn(t,e,i)}return e.flags|=1,t=sr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Io(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,Cn(t,e,i)}return Jh(t,e,n,r,i)}function Yw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Pi,It),It|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Pi,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ce(Pi,It),It|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ce(Pi,It),It|=r;return ft(t,e,i,n),e.child}function Jw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jh(t,e,n,r,i){var s=Et(n)?Kr:ct.current;return s=Hi(e,s),Oi(e,i),n=Nf(t,e,n,r,s,i),r=Vf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cn(t,e,i)):(ye&&r&&_f(e),e.flags|=1,ft(t,e,n,i),e.child)}function dy(t,e,n,r,i){if(Et(n)){var s=!0;bl(e)}else s=!1;if(Oi(e,i),e.stateNode===null)hl(t,e),Kw(e,n,r),Xh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ut(c):(c=Et(n)?Kr:ct.current,c=Hi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&oy(e,o,r,c),zn=!1;var p=e.memoizedState;o.state=p,Fl(e,r,o,i),u=e.memoizedState,a!==r||p!==u||wt.current||zn?(typeof h=="function"&&(Qh(e,n,h,r),u=e.memoizedState),(a=zn||sy(e,n,a,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Iw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ht(e.type,a),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ut(u):(u=Et(n)?Kr:ct.current,u=Hi(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&oy(e,o,r,u),zn=!1,p=e.memoizedState,o.state=p,Fl(e,r,o,i);var T=e.memoizedState;a!==f||p!==T||wt.current||zn?(typeof v=="function"&&(Qh(e,n,v,r),T=e.memoizedState),(c=zn||sy(e,n,c,r,p,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Zh(t,e,n,r,s,i)}function Zh(t,e,n,r,i,s){Jw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Yg(e,n,!1),Cn(t,e,s);r=e.stateNode,PI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ki(e,t.child,null,s),e.child=Ki(e,null,a,s)):ft(t,e,a,s),e.memoizedState=r.state,i&&Yg(e,n,!0),e.child}function Zw(t){var e=t.stateNode;e.pendingContext?Xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xg(t,e.context,!1),Pf(t,e.containerInfo)}function fy(t,e,n,r,i){return qi(),Ef(i),e.flags|=256,ft(t,e,n,r),e.child}var ed={dehydrated:null,treeContext:null,retryLane:0};function td(t){return{baseLanes:t,cachePool:null,transitions:null}}function eE(t,e,n){var r=e.pendingProps,i=we.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ce(we,i&1),t===null)return Kh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xu(o,r,0,null),t=$r(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=td(n),e.memoizedState=ed,t):Lf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return CI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=sr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=sr(a,s):(s=$r(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?td(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ed,r}return s=t.child,t=s.sibling,r=sr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lf(t,e){return e=xu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function za(t,e,n,r){return r!==null&&Ef(r),Ki(e,t.child,null,n),t=Lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Uc(Error(F(422))),za(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xu({mode:"visible",children:r.children},i,0,null),s=$r(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ki(e,t.child,null,o),e.child.memoizedState=td(o),e.memoizedState=ed,s);if(!(e.mode&1))return za(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(F(419)),r=Uc(s,r,void 0),za(t,e,o,r)}if(a=(o&t.childLanes)!==0,_t||a){if(r=$e,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pn(t,i),Xt(r,t,i,-1))}return Bf(),r=Uc(Error(F(421))),za(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pt=tr(i.nextSibling),Ct=e,ye=!0,Kt=null,t!==null&&(Mt[Ot++]=wn,Mt[Ot++]=En,Mt[Ot++]=Gr,wn=t.id,En=t.overflow,Gr=e),e=Lf(e,r.children),e.flags|=4096,e)}function py(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gh(t.return,e,n)}function Bc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function tE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,n,e);else if(t.tag===19)py(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(we,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ul(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Bc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ul(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Bc(e,!0,n,null,s);break;case"together":Bc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RI(t,e,n){switch(e.tag){case 3:Zw(e),qi();break;case 5:Pw(e);break;case 1:Et(e.type)&&bl(e);break;case 4:Pf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ce(Ol,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?eE(t,e,n):(ce(we,we.current&1),t=Cn(t,e,n),t!==null?t.sibling:null);ce(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,Yw(t,e,n)}return Cn(t,e,n)}var nE,nd,rE,iE;nE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nd=function(){};rE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Or(on.current);var s=null;switch(n){case"input":i=xh(t,i),r=xh(t,r),s=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),s=[];break;case"textarea":i=Ph(t,i),r=Ph(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vl)}Rh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_o.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&fe("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};iE=function(t,e,n,r){n!==r&&(e.flags|=4)};function js(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kI(t,e,n){var r=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return Et(e.type)&&Dl(),nt(e),null;case 3:return r=e.stateNode,Gi(),me(wt),me(ct),Rf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(cd(Kt),Kt=null))),nd(t,e),nt(e),null;case 5:Cf(e);var i=Or(No.current);if(n=e.type,t!==null&&e.stateNode!=null)rE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return nt(e),null}if(t=Or(on.current),Ba(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[nn]=e,r[Ro]=s,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(i=0;i<Hs.length;i++)fe(Hs[i],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Sg(r,s),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fe("invalid",r);break;case"textarea":Ag(r,s),fe("invalid",r)}Rh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ua(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ua(r.textContent,a,t),i=["children",""+a]):_o.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":Va(r),xg(r,s,!0);break;case"textarea":Va(r),Ig(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nn]=e,t[Ro]=r,nE(t,e,!1,!1),e.stateNode=t;e:{switch(o=kh(n,r),n){case"dialog":fe("cancel",t),fe("close",t),i=r;break;case"iframe":case"object":case"embed":fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Hs.length;i++)fe(Hs[i],t);i=r;break;case"source":fe("error",t),i=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),i=r;break;case"details":fe("toggle",t),i=r;break;case"input":Sg(t,r),i=xh(t,r),fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),fe("invalid",t);break;case"textarea":Ag(t,r),i=Ph(t,r),fe("invalid",t);break;default:i=r}Rh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?L_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&D_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wo(t,u):typeof u=="number"&&wo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_o.hasOwnProperty(s)?u!=null&&s==="onScroll"&&fe("scroll",t):u!=null&&sf(t,s,u,o))}switch(n){case"input":Va(t),xg(t,r,!1);break;case"textarea":Va(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Di(t,!!r.multiple,s,!1):r.defaultValue!=null&&Di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)iE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Or(No.current),Or(on.current),Ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[nn]=e,(s=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:Ua(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=e,e.stateNode=r}return nt(e),null;case 13:if(me(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&Pt!==null&&e.mode&1&&!(e.flags&128))Tw(),qi(),e.flags|=98560,s=!1;else if(s=Ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[nn]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),s=!1}else Kt!==null&&(cd(Kt),Kt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Fe===0&&(Fe=3):Bf())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Gi(),nd(t,e),t===null&&Po(e.stateNode.containerInfo),nt(e),null;case 10:return xf(e.type._context),nt(e),null;case 17:return Et(e.type)&&Dl(),nt(e),null;case 19:if(me(we),s=e.memoizedState,s===null)return nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)js(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ul(t),o!==null){for(e.flags|=128,js(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(we,we.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>Xi&&(e.flags|=128,r=!0,js(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),js(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ye)return nt(e),null}else 2*Ve()-s.renderingStartTime>Xi&&n!==1073741824&&(e.flags|=128,r=!0,js(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=we.current,ce(we,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return Uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function NI(t,e){switch(wf(e),e.tag){case 1:return Et(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),me(wt),me(ct),Rf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cf(e),null;case 13:if(me(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(we),null;case 4:return Gi(),null;case 10:return xf(e.type._context),null;case 22:case 23:return Uf(),null;case 24:return null;default:return null}}var Wa=!1,st=!1,VI=typeof WeakSet=="function"?WeakSet:Set,z=null;function Ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function rd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var my=!1;function DI(t,e){if(Uh=Rl,t=uw(),vf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(u=o),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bh={focusedElem:t,selectionRange:n},Rl=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var S=T.memoizedProps,C=T.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:Ht(e.type,S),C);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(V){Pe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return T=my,my=!1,T}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&rd(e,n,s)}i=i.next}while(i!==r)}}function Tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function id(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sE(t){var e=t.alternate;e!==null&&(t.alternate=null,sE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[Ro],delete e[Wh],delete e[mI],delete e[gI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oE(t){return t.tag===5||t.tag===3||t.tag===4}function gy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vl));else if(r!==4&&(t=t.child,t!==null))for(sd(t,e,n),t=t.sibling;t!==null;)sd(t,e,n),t=t.sibling}function od(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(od(t,e,n),t=t.sibling;t!==null;)od(t,e,n),t=t.sibling}var He=null,qt=!1;function Fn(t,e,n){for(n=n.child;n!==null;)aE(t,e,n),n=n.sibling}function aE(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(pu,n)}catch{}switch(n.tag){case 5:st||Ii(n,e);case 6:var r=He,i=qt;He=null,Fn(t,e,n),He=r,qt=i,He!==null&&(qt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(qt?(t=He,n=n.stateNode,t.nodeType===8?bc(t.parentNode,n):t.nodeType===1&&bc(t,n),xo(t)):bc(He,n.stateNode));break;case 4:r=He,i=qt,He=n.stateNode.containerInfo,qt=!0,Fn(t,e,n),He=r,qt=i;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&rd(n,e,o),i=i.next}while(i!==r)}Fn(t,e,n);break;case 1:if(!st&&(Ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,e,a)}Fn(t,e,n);break;case 21:Fn(t,e,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,Fn(t,e,n),st=r):Fn(t,e,n);break;default:Fn(t,e,n)}}function yy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VI),e.forEach(function(r){var i=$I.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:He=a.stateNode,qt=!1;break e;case 3:He=a.stateNode.containerInfo,qt=!0;break e;case 4:He=a.stateNode.containerInfo,qt=!0;break e}a=a.return}if(He===null)throw Error(F(160));aE(s,o,i),He=null,qt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Pe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lE(e,t),e=e.sibling}function lE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),en(t),r&4){try{so(3,t,t.return),Tu(3,t)}catch(S){Pe(t,t.return,S)}try{so(5,t,t.return)}catch(S){Pe(t,t.return,S)}}break;case 1:zt(e,t),en(t),r&512&&n!==null&&Ii(n,n.return);break;case 5:if(zt(e,t),en(t),r&512&&n!==null&&Ii(n,n.return),t.flags&32){var i=t.stateNode;try{wo(i,"")}catch(S){Pe(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&k_(i,s),kh(a,o);var c=kh(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?L_(i,f):h==="dangerouslySetInnerHTML"?D_(i,f):h==="children"?wo(i,f):sf(i,h,f,c)}switch(a){case"input":Ah(i,s);break;case"textarea":N_(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Di(i,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?Di(i,!!s.multiple,s.defaultValue,!0):Di(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ro]=s}catch(S){Pe(t,t.return,S)}}break;case 6:if(zt(e,t),en(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Pe(t,t.return,S)}}break;case 3:if(zt(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xo(e.containerInfo)}catch(S){Pe(t,t.return,S)}break;case 4:zt(e,t),en(t);break;case 13:zt(e,t),en(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jf=Ve())),r&4&&yy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(st=(c=st)||h,zt(e,t),st=c):zt(e,t),en(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(f=z=h;z!==null;){switch(p=z,v=p.child,p.tag){case 0:case 11:case 14:case 15:so(4,p,p.return);break;case 1:Ii(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(S){Pe(r,n,S)}}break;case 5:Ii(p,p.return);break;case 22:if(p.memoizedState!==null){_y(f);continue}}v!==null?(v.return=p,z=v):_y(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=b_("display",o))}catch(S){Pe(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){Pe(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zt(e,t),en(t),r&4&&yy(t);break;case 21:break;default:zt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oE(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wo(i,""),r.flags&=-33);var s=gy(t);od(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gy(t);sd(t,a,o);break;default:throw Error(F(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bI(t,e,n){z=t,uE(t)}function uE(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wa;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||st;a=Wa;var c=st;if(Wa=o,(st=u)&&!c)for(z=i;z!==null;)o=z,u=o.child,o.tag===22&&o.memoizedState!==null?wy(i):u!==null?(u.return=o,z=u):wy(i);for(;s!==null;)z=s,uE(s),s=s.sibling;z=i,Wa=a,st=c}vy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):vy(t)}}function vy(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||Tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!st)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ht(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ny(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ny(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&xo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}st||e.flags&512&&id(e)}catch(p){Pe(e,e.return,p)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function _y(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function wy(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tu(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pe(e,i,u)}}var s=e.return;try{id(e)}catch(u){Pe(e,s,u)}break;case 5:var o=e.return;try{id(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var LI=Math.ceil,zl=Vn.ReactCurrentDispatcher,Mf=Vn.ReactCurrentOwner,Ft=Vn.ReactCurrentBatchConfig,re=0,$e=null,Me=null,Ge=0,It=0,Pi=_r(0),Fe=0,Lo=null,Xr=0,Su=0,Of=0,oo=null,vt=null,jf=0,Xi=1/0,vn=null,Wl=!1,ad=null,rr=null,Ha=!1,Kn=null,Hl=0,ao=0,ld=null,dl=-1,fl=0;function pt(){return re&6?Ve():dl!==-1?dl:dl=Ve()}function ir(t){return t.mode&1?re&2&&Ge!==0?Ge&-Ge:vI.transition!==null?(fl===0&&(fl=K_()),fl):(t=ae,t!==0||(t=window.event,t=t===void 0?16:ew(t.type)),t):1}function Xt(t,e,n,r){if(50<ao)throw ao=0,ld=null,Error(F(185));Yo(t,n,r),(!(re&2)||t!==$e)&&(t===$e&&(!(re&2)&&(Su|=n),Fe===4&&Hn(t,Ge)),Tt(t,r),n===1&&re===0&&!(e.mode&1)&&(Xi=Ve()+500,_u&&wr()))}function Tt(t,e){var n=t.callbackNode;v1(t,e);var r=Cl(t,t===$e?Ge:0);if(r===0)n!==null&&Rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rg(n),e===1)t.tag===0?yI(Ey.bind(null,t)):_w(Ey.bind(null,t)),fI(function(){!(re&6)&&wr()}),n=null;else{switch(G_(r)){case 1:n=cf;break;case 4:n=H_;break;case 16:n=Pl;break;case 536870912:n=q_;break;default:n=Pl}n=yE(n,cE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cE(t,e){if(dl=-1,fl=0,re&6)throw Error(F(327));var n=t.callbackNode;if(ji()&&t.callbackNode!==n)return null;var r=Cl(t,t===$e?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var i=re;re|=2;var s=dE();($e!==t||Ge!==e)&&(vn=null,Xi=Ve()+500,Br(t,e));do try{jI();break}catch(a){hE(t,a)}while(!0);Sf(),zl.current=s,re=i,Me!==null?e=0:($e=null,Ge=0,e=Fe)}if(e!==0){if(e===2&&(i=Lh(t),i!==0&&(r=i,e=ud(t,i))),e===1)throw n=Lo,Br(t,0),Hn(t,r),Tt(t,Ve()),n;if(e===6)Hn(t,r);else{if(i=t.current.alternate,!(r&30)&&!MI(i)&&(e=ql(t,r),e===2&&(s=Lh(t),s!==0&&(r=s,e=ud(t,s))),e===1))throw n=Lo,Br(t,0),Hn(t,r),Tt(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Nr(t,vt,vn);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=jf+500-Ve(),10<e)){if(Cl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zh(Nr.bind(null,t,vt,vn),e);break}Nr(t,vt,vn);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Qt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LI(r/1960))-r,10<r){t.timeoutHandle=zh(Nr.bind(null,t,vt,vn),r);break}Nr(t,vt,vn);break;case 5:Nr(t,vt,vn);break;default:throw Error(F(329))}}}return Tt(t,Ve()),t.callbackNode===n?cE.bind(null,t):null}function ud(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=ql(t,e),t!==2&&(e=vt,vt=n,e!==null&&cd(e)),t}function cd(t){vt===null?vt=t:vt.push.apply(vt,t)}function MI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Of,e&=~Su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qt(e),r=1<<n;t[n]=-1,e&=~r}}function Ey(t){if(re&6)throw Error(F(327));ji();var e=Cl(t,0);if(!(e&1))return Tt(t,Ve()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=Lh(t);r!==0&&(e=r,n=ud(t,r))}if(n===1)throw n=Lo,Br(t,0),Hn(t,e),Tt(t,Ve()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,vt,vn),Tt(t,Ve()),null}function Ff(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Xi=Ve()+500,_u&&wr())}}function Yr(t){Kn!==null&&Kn.tag===0&&!(re&6)&&ji();var e=re;re|=1;var n=Ft.transition,r=ae;try{if(Ft.transition=null,ae=1,t)return t()}finally{ae=r,Ft.transition=n,re=e,!(re&6)&&wr()}}function Uf(){It=Pi.current,me(Pi)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dI(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:Gi(),me(wt),me(ct),Rf();break;case 5:Cf(r);break;case 4:Gi();break;case 13:me(we);break;case 19:me(we);break;case 10:xf(r.type._context);break;case 22:case 23:Uf()}n=n.return}if($e=t,Me=t=sr(t.current,null),Ge=It=e,Fe=0,Lo=null,Of=Su=Xr=0,vt=oo=null,Mr!==null){for(e=0;e<Mr.length;e++)if(n=Mr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mr=null}return t}function hE(t,e){do{var n=Me;try{if(Sf(),ul.current=$l,Bl){for(var r=Se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bl=!1}if(Qr=0,Be=je=Se=null,io=!1,Vo=0,Mf.current=null,n===null||n.return===null){Fe=1,Lo=e,Me=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Ge,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=ly(o);if(v!==null){v.flags&=-257,uy(v,o,a,s,e),v.mode&1&&ay(s,c,e),e=v,u=c;var T=e.updateQueue;if(T===null){var S=new Set;S.add(u),e.updateQueue=S}else T.add(u);break e}else{if(!(e&1)){ay(s,c,e),Bf();break e}u=Error(F(426))}}else if(ye&&a.mode&1){var C=ly(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),uy(C,o,a,s,e),Ef(Qi(u,a));break e}}s=u=Qi(u,a),Fe!==4&&(Fe=2),oo===null?oo=[s]:oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Gw(s,u,e);ty(s,w);break e;case 1:a=u;var _=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rr===null||!rr.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=Qw(s,a,e);ty(s,V);break e}}s=s.return}while(s!==null)}pE(n)}catch(L){e=L,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function dE(){var t=zl.current;return zl.current=$l,t===null?$l:t}function Bf(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),$e===null||!(Xr&268435455)&&!(Su&268435455)||Hn($e,Ge)}function ql(t,e){var n=re;re|=2;var r=dE();($e!==t||Ge!==e)&&(vn=null,Br(t,e));do try{OI();break}catch(i){hE(t,i)}while(!0);if(Sf(),re=n,zl.current=r,Me!==null)throw Error(F(261));return $e=null,Ge=0,Fe}function OI(){for(;Me!==null;)fE(Me)}function jI(){for(;Me!==null&&!u1();)fE(Me)}function fE(t){var e=gE(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?pE(t):Me=e,Mf.current=null}function pE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NI(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Me=null;return}}else if(n=kI(n,e,It),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Fe===0&&(Fe=5)}function Nr(t,e,n){var r=ae,i=Ft.transition;try{Ft.transition=null,ae=1,FI(t,e,n,r)}finally{Ft.transition=i,ae=r}return null}function FI(t,e,n,r){do ji();while(Kn!==null);if(re&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_1(t,s),t===$e&&(Me=$e=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,yE(Pl,function(){return ji(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ft.transition,Ft.transition=null;var o=ae;ae=1;var a=re;re|=4,Mf.current=null,DI(t,n),lE(n,t),sI(Bh),Rl=!!Uh,Bh=Uh=null,t.current=n,bI(n),c1(),re=a,ae=o,Ft.transition=s}else t.current=n;if(Ha&&(Ha=!1,Kn=t,Hl=i),s=t.pendingLanes,s===0&&(rr=null),f1(n.stateNode),Tt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,t=ad,ad=null,t;return Hl&1&&t.tag!==0&&ji(),s=t.pendingLanes,s&1?t===ld?ao++:(ao=0,ld=t):ao=0,wr(),null}function ji(){if(Kn!==null){var t=G_(Hl),e=Ft.transition,n=ae;try{if(Ft.transition=null,ae=16>t?16:t,Kn===null)var r=!1;else{if(t=Kn,Kn=null,Hl=0,re&6)throw Error(F(331));var i=re;for(re|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(z=c;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:so(8,h,s)}var f=h.child;if(f!==null)f.return=h,z=f;else for(;z!==null;){h=z;var p=h.sibling,v=h.return;if(sE(h),h===c){z=null;break}if(p!==null){p.return=v,z=p;break}z=v}}}var T=s.alternate;if(T!==null){var S=T.child;if(S!==null){T.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:so(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,z=w;break e}z=s.return}}var _=t.current;for(z=_;z!==null;){o=z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,z=x;else e:for(o=_;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tu(9,a)}}catch(L){Pe(a,a.return,L)}if(a===o){z=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,z=V;break e}z=a.return}}if(re=i,wr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(pu,t)}catch{}r=!0}return r}finally{ae=n,Ft.transition=e}}return!1}function Ty(t,e,n){e=Qi(n,e),e=Gw(t,e,1),t=nr(t,e,1),e=pt(),t!==null&&(Yo(t,1,e),Tt(t,e))}function Pe(t,e,n){if(t.tag===3)Ty(t,t,n);else for(;e!==null;){if(e.tag===3){Ty(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){t=Qi(n,t),t=Qw(e,t,1),e=nr(e,t,1),t=pt(),e!==null&&(Yo(e,1,t),Tt(e,t));break}}e=e.return}}function UI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Ge&n)===n&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>Ve()-jf?Br(t,0):Of|=n),Tt(t,e)}function mE(t,e){e===0&&(t.mode&1?(e=La,La<<=1,!(La&130023424)&&(La=4194304)):e=1);var n=pt();t=Pn(t,e),t!==null&&(Yo(t,e,n),Tt(t,n))}function BI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mE(t,n)}function $I(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),mE(t,n)}var gE;gE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,RI(t,e,n);_t=!!(t.flags&131072)}else _t=!1,ye&&e.flags&1048576&&ww(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hl(t,e),t=e.pendingProps;var i=Hi(e,ct.current);Oi(e,n),i=Nf(null,e,r,t,i,n);var s=Vf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(s=!0,bl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,If(e),i.updater=Eu,e.stateNode=i,i._reactInternals=e,Xh(e,r,t,n),e=Zh(null,e,r,!0,s,n)):(e.tag=0,ye&&s&&_f(e),ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WI(r),t=Ht(r,t),i){case 0:e=Jh(null,e,r,t,n);break e;case 1:e=dy(null,e,r,t,n);break e;case 11:e=cy(null,e,r,t,n);break e;case 14:e=hy(null,e,r,Ht(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),Jh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),dy(t,e,r,i,n);case 3:e:{if(Zw(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Iw(t,e),Fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qi(Error(F(423)),e),e=fy(t,e,r,n,i);break e}else if(r!==i){i=Qi(Error(F(424)),e),e=fy(t,e,r,n,i);break e}else for(Pt=tr(e.stateNode.containerInfo.firstChild),Ct=e,ye=!0,Kt=null,n=xw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qi(),r===i){e=Cn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return Pw(e),t===null&&Kh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$h(r,i)?o=null:s!==null&&$h(r,s)&&(e.flags|=32),Jw(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Kh(e),null;case 13:return eE(t,e,n);case 4:return Pf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ki(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),cy(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ce(Ol,r._currentValue),r._currentValue=o,s!==null)if(Yt(s.value,o)){if(s.children===i.children&&!wt.current){e=Cn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Tn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Gh(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oi(e,n),i=Ut(i),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,i=Ht(r,e.pendingProps),i=Ht(r.type,i),hy(t,e,r,i,n);case 15:return Xw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),hl(t,e),e.tag=1,Et(r)?(t=!0,bl(e)):t=!1,Oi(e,n),Kw(e,r,i),Xh(e,r,i,n),Zh(null,e,r,!0,t,n);case 19:return tE(t,e,n);case 22:return Yw(t,e,n)}throw Error(F(156,e.tag))};function yE(t,e){return W_(t,e)}function zI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,r){return new zI(t,e,n,r)}function $f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WI(t){if(typeof t=="function")return $f(t)?1:0;if(t!=null){if(t=t.$$typeof,t===af)return 11;if(t===lf)return 14}return 2}function sr(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")$f(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yi:return $r(n.children,i,s,e);case of:o=8,i|=8;break;case wh:return t=jt(12,n,e,i|2),t.elementType=wh,t.lanes=s,t;case Eh:return t=jt(13,n,e,i),t.elementType=Eh,t.lanes=s,t;case Th:return t=jt(19,n,e,i),t.elementType=Th,t.lanes=s,t;case P_:return xu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A_:o=10;break e;case I_:o=9;break e;case af:o=11;break e;case lf:o=14;break e;case $n:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $r(t,e,n,r){return t=jt(7,t,r,e),t.lanes=n,t}function xu(t,e,n,r){return t=jt(22,t,r,e),t.elementType=P_,t.lanes=n,t.stateNode={isHidden:!1},t}function $c(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function zc(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sc(0),this.expirationTimes=Sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zf(t,e,n,r,i,s,o,a,u){return t=new HI(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},If(s),t}function qI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vE(t){if(!t)return hr;t=t._reactInternals;e:{if(ni(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Et(n))return vw(t,n,e)}return e}function _E(t,e,n,r,i,s,o,a,u){return t=zf(n,r,!0,t,i,s,o,a,u),t.context=vE(null),n=t.current,r=pt(),i=ir(n),s=Tn(r,i),s.callback=e??null,nr(n,s,i),t.current.lanes=i,Yo(t,i,r),Tt(t,r),t}function Au(t,e,n,r){var i=e.current,s=pt(),o=ir(i);return n=vE(n),e.context===null?e.context=n:e.pendingContext=n,e=Tn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nr(i,e,o),t!==null&&(Xt(t,i,o,s),ll(t,i,o)),o}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wf(t,e){Sy(t,e),(t=t.alternate)&&Sy(t,e)}function KI(){return null}var wE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hf(t){this._internalRoot=t}Iu.prototype.render=Hf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Au(t,e,null,null)};Iu.prototype.unmount=Hf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){Au(null,t,null,null)}),e[In]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wn.length&&e!==0&&e<Wn[n].priority;n++);Wn.splice(n,0,t),n===0&&Z_(t)}};function qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xy(){}function GI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Kl(o);s.call(c)}}var o=_E(e,r,t,0,null,!1,!1,"",xy);return t._reactRootContainer=o,t[In]=o.current,Po(t.nodeType===8?t.parentNode:t),Yr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Kl(u);a.call(c)}}var u=zf(t,0,!1,null,null,!1,!1,"",xy);return t._reactRootContainer=u,t[In]=u.current,Po(t.nodeType===8?t.parentNode:t),Yr(function(){Au(e,u,n,r)}),u}function Cu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Kl(o);a.call(u)}}Au(e,o,t,i)}else o=GI(n,e,t,i,r);return Kl(o)}Q_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ws(e.pendingLanes);n!==0&&(hf(e,n|1),Tt(e,Ve()),!(re&6)&&(Xi=Ve()+500,wr()))}break;case 13:Yr(function(){var r=Pn(t,1);if(r!==null){var i=pt();Xt(r,t,1,i)}}),Wf(t,1)}};df=function(t){if(t.tag===13){var e=Pn(t,134217728);if(e!==null){var n=pt();Xt(e,t,134217728,n)}Wf(t,134217728)}};X_=function(t){if(t.tag===13){var e=ir(t),n=Pn(t,e);if(n!==null){var r=pt();Xt(n,t,e,r)}Wf(t,e)}};Y_=function(){return ae};J_=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Vh=function(t,e,n){switch(e){case"input":if(Ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vu(r);if(!i)throw Error(F(90));R_(r),Ah(r,i)}}}break;case"textarea":N_(t,n);break;case"select":e=n.value,e!=null&&Di(t,!!n.multiple,e,!1)}};j_=Ff;F_=Yr;var QI={usingClientEntryPoint:!1,Events:[Zo,Ei,vu,M_,O_,Ff]},Fs={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XI={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$_(t),t===null?null:t.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||KI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{pu=qa.inject(XI),sn=qa}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QI;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qf(e))throw Error(F(200));return qI(t,e,null,n)};Vt.createRoot=function(t,e){if(!qf(t))throw Error(F(299));var n=!1,r="",i=wE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zf(t,1,!1,null,null,n,!1,r,i),t[In]=e.current,Po(t.nodeType===8?t.parentNode:t),new Hf(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=$_(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return Yr(t)};Vt.hydrate=function(t,e,n){if(!Pu(e))throw Error(F(200));return Cu(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!qf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=wE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_E(e,null,t,1,n??null,i,!1,s,o),t[In]=e.current,Po(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Iu(e)};Vt.render=function(t,e,n){if(!Pu(e))throw Error(F(200));return Cu(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(F(40));return t._reactRootContainer?(Yr(function(){Cu(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Vt.unstable_batchedUpdates=Ff;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Cu(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function EE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EE)}catch(t){console.error(t)}}EE(),E_.exports=Vt;var YI=E_.exports,Ay=YI;vh.createRoot=Ay.createRoot,vh.hydrateRoot=Ay.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mo.apply(this,arguments)}var Gn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gn||(Gn={}));const Iy="popstate";function JI(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hd("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gl(i)}return eP(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZI(){return Math.random().toString(36).substr(2,8)}function Py(t,e){return{usr:t.state,key:t.key,idx:e}}function hd(t,e,n,r){return n===void 0&&(n=null),Mo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hs(e):e,{state:n,key:e&&e.key||r||ZI()})}function Gl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Gn.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(Mo({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Gn.Pop;let C=h(),w=C==null?null:C-c;c=C,u&&u({action:a,location:S.location,delta:w})}function p(C,w){a=Gn.Push;let _=hd(S.location,C,w);c=h()+1;let x=Py(_,c),V=S.createHref(_);try{o.pushState(x,"",V)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(V)}s&&u&&u({action:a,location:S.location,delta:1})}function v(C,w){a=Gn.Replace;let _=hd(S.location,C,w);c=h();let x=Py(_,c),V=S.createHref(_);o.replaceState(x,"",V),s&&u&&u({action:a,location:S.location,delta:0})}function T(C){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof C=="string"?C:Gl(C);return _=_.replace(/ $/,"%20"),De(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let S={get action(){return a},get location(){return t(i,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Iy,f),u=C,()=>{i.removeEventListener(Iy,f),u=null}},createHref(C){return e(i,C)},createURL:T,encodeLocation(C){let w=T(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:v,go(C){return o.go(C)}};return S}var Cy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cy||(Cy={}));function tP(t,e,n){return n===void 0&&(n="/"),nP(t,e,n)}function nP(t,e,n,r){let i=typeof e=="string"?hs(e):e,s=Gf(i.pathname||"/",n);if(s==null)return null;let o=TE(t);rP(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=mP(s);a=dP(o[u],c)}return a}function TE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=or([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(De(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),TE(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:cP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of SE(s.path))i(s,o,u)}),e}function SE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function rP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iP=/^:[\w-]+$/,sP=3,oP=2,aP=1,lP=10,uP=-2,Ry=t=>t==="*";function cP(t,e){let n=t.split("/"),r=n.length;return n.some(Ry)&&(r+=uP),e&&(r+=oP),n.filter(i=>!Ry(i)).reduce((i,s)=>i+(iP.test(s)?sP:s===""?aP:lP),r)}function hP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function dP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=fP({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:or([s,f.pathname]),pathnameBase:wP(or([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=or([s,f.pathnameBase]))}return o}function fP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const T=a[f];return v&&!T?c[p]=void 0:c[p]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function pP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Kf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const gP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yP=t=>gP.test(t);function vP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?hs(t):t,s;if(n)if(yP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Kf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=ky(n.substring(1),"/"):s=ky(n,e)}else s=e;return{pathname:s,search:EP(r),hash:TP(i)}}function ky(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Wc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _P(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qf(t,e){let n=_P(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=hs(t):(i=Mo({},t),De(!i.pathname||!i.pathname.includes("?"),Wc("?","pathname","search",i)),De(!i.pathname||!i.pathname.includes("#"),Wc("#","pathname","hash",i)),De(!i.search||!i.search.includes("#"),Wc("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let u=vP(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const or=t=>t.join("/").replace(/\/\/+/g,"/"),wP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xE=["post","put","patch","delete"];new Set(xE);const xP=["get",...xE];new Set(xP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oo.apply(this,arguments)}const Yf=k.createContext(null),AP=k.createContext(null),Er=k.createContext(null),Ru=k.createContext(null),Dn=k.createContext({outlet:null,matches:[],isDataRoute:!1}),AE=k.createContext(null);function IP(t,e){let{relative:n}=e===void 0?{}:e;ds()||De(!1);let{basename:r,navigator:i}=k.useContext(Er),{hash:s,pathname:o,search:a}=PE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:or([r,o])),i.createHref({pathname:u,search:a,hash:s})}function ds(){return k.useContext(Ru)!=null}function ri(){return ds()||De(!1),k.useContext(Ru).location}function IE(t){k.useContext(Er).static||k.useLayoutEffect(t)}function Jf(){let{isDataRoute:t}=k.useContext(Dn);return t?UP():PP()}function PP(){ds()||De(!1);let t=k.useContext(Yf),{basename:e,future:n,navigator:r}=k.useContext(Er),{matches:i}=k.useContext(Dn),{pathname:s}=ri(),o=JSON.stringify(Qf(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return IE(()=>{a.current=!0}),k.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Xf(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:or([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function CP(){let{matches:t}=k.useContext(Dn),e=t[t.length-1];return e?e.params:{}}function PE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Er),{matches:i}=k.useContext(Dn),{pathname:s}=ri(),o=JSON.stringify(Qf(i,r.v7_relativeSplatPath));return k.useMemo(()=>Xf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function RP(t,e){return kP(t,e)}function kP(t,e,n,r){ds()||De(!1);let{navigator:i}=k.useContext(Er),{matches:s}=k.useContext(Dn),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=ri(),h;if(e){var f;let C=typeof e=="string"?hs(e):e;u==="/"||(f=C.pathname)!=null&&f.startsWith(u)||De(!1),h=C}else h=c;let p=h.pathname||"/",v=p;if(u!=="/"){let C=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let T=tP(t,{pathname:v}),S=LP(T&&T.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:or([u,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:or([u,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&S?k.createElement(Ru.Provider,{value:{location:Oo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Gn.Pop}},S):S}function NP(){let t=FP(),e=SP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const VP=k.createElement(NP,null);class DP extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Dn.Provider,{value:this.props.routeContext},k.createElement(AE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bP(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(Yf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Dn.Provider,{value:e},r)}function LP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||De(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:v}=n,T=f.route.loader&&p[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let v,T=!1,S=null,C=null;n&&(v=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||VP,u&&(c<0&&p===0?(BP("route-fallback"),T=!0,C=null):c===p&&(T=!0,C=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),_=()=>{let x;return v?x=S:T?x=C:f.route.Component?x=k.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,k.createElement(bP,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?k.createElement(DP,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var CE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CE||{}),RE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(RE||{});function MP(t){let e=k.useContext(Yf);return e||De(!1),e}function OP(t){let e=k.useContext(AP);return e||De(!1),e}function jP(t){let e=k.useContext(Dn);return e||De(!1),e}function kE(t){let e=jP(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function FP(){var t;let e=k.useContext(AE),n=OP(),r=kE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function UP(){let{router:t}=MP(CE.UseNavigateStable),e=kE(RE.UseNavigateStable),n=k.useRef(!1);return IE(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Oo({fromRouteId:e},s)))},[t,e])}const Ny={};function BP(t,e,n){Ny[t]||(Ny[t]=!0)}function $P(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zP(t){let{to:e,replace:n,state:r,relative:i}=t;ds()||De(!1);let{future:s,static:o}=k.useContext(Er),{matches:a}=k.useContext(Dn),{pathname:u}=ri(),c=Jf(),h=Xf(e,Qf(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(h);return k.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function Vr(t){De(!1)}function WP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gn.Pop,navigator:s,static:o=!1,future:a}=t;ds()&&De(!1);let u=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:u,navigator:s,static:o,future:Oo({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=hs(r));let{pathname:h="/",search:f="",hash:p="",state:v=null,key:T="default"}=r,S=k.useMemo(()=>{let C=Gf(h,u);return C==null?null:{location:{pathname:C,search:f,hash:p,state:v,key:T},navigationType:i}},[u,h,f,p,v,T,i]);return S==null?null:k.createElement(Er.Provider,{value:c},k.createElement(Ru.Provider,{children:n,value:S}))}function HP(t){let{children:e,location:n}=t;return RP(dd(e),n)}new Promise(()=>{});function dd(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,dd(r.props.children,s));return}r.type!==Vr&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dd(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}function qP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function KP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GP(t,e){return t.button===0&&(!e||e==="_self")&&!KP(t)}const QP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XP="6";try{window.__reactRouterVersion=XP}catch{}const YP="startTransition",Vy=UA[YP];function JP(t){let{basename:e,children:n,future:r,window:i}=t,s=k.useRef();s.current==null&&(s.current=JI({window:i,v5Compat:!0}));let o=s.current,[a,u]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=k.useCallback(f=>{c&&Vy?Vy(()=>u(f)):u(f)},[u,c]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.useEffect(()=>$P(r),[r]),k.createElement(WP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const ZP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=k.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f}=e,p=qP(e,QP),{basename:v}=k.useContext(Er),T,S=!1;if(typeof c=="string"&&eC.test(c)&&(T=c,ZP))try{let x=new URL(window.location.href),V=c.startsWith("//")?new URL(x.protocol+c):new URL(c),L=Gf(V.pathname,v);V.origin===x.origin&&L!=null?c=L+V.search+V.hash:S=!0}catch{}let C=IP(c,{relative:i}),w=tC(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:f});function _(x){r&&r(x),x.defaultPrevented||w(x)}return k.createElement("a",fd({},p,{href:T||C,onClick:S||s?r:_,ref:n,target:u}))});var Dy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dy||(Dy={}));var by;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(by||(by={}));function tC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=Jf(),c=ri(),h=PE(t,{relative:o});return k.useCallback(f=>{if(GP(f,n)){f.preventDefault();let p=r!==void 0?r:Gl(c)===Gl(h);u(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,u,h,r,i,n,t,s,o,a])}const Zf=k.createContext({});function ep(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const ku=k.createContext(null),tp=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class nC extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function rC({children:t,isPresent:e}){const n=k.useId(),r=k.useRef(null),i=k.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=k.useContext(tp);return k.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),g.jsx(nC,{isPresent:e,childRef:r,sizeRef:i,children:k.cloneElement(t,{ref:r})})}const iC=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=ep(sC),u=k.useId(),c=k.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),h=k.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return k.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),k.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=g.jsx(rC,{isPresent:n,children:t})),g.jsx(ku.Provider,{value:h,children:t})};function sC(){return new Map}function NE(t=!0){const e=k.useContext(ku);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=k.useId();k.useEffect(()=>{t&&i(s)},[t]);const o=k.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Ka=t=>t.key||"";function Ly(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const np=typeof window<"u",VE=np?k.useLayoutEffect:k.useEffect,oC=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,u]=NE(o),c=k.useMemo(()=>Ly(t),[t]),h=o&&!a?[]:c.map(Ka),f=k.useRef(!0),p=k.useRef(c),v=ep(()=>new Map),[T,S]=k.useState(c),[C,w]=k.useState(c);VE(()=>{f.current=!1,p.current=c;for(let V=0;V<C.length;V++){const L=Ka(C[V]);h.includes(L)?v.delete(L):v.get(L)!==!0&&v.set(L,!1)}},[C,h.length,h.join("-")]);const _=[];if(c!==T){let V=[...c];for(let L=0;L<C.length;L++){const O=C[L],I=Ka(O);h.includes(I)||(V.splice(L,0,O),_.push(O))}s==="wait"&&_.length&&(V=_),w(Ly(V)),S(c);return}const{forceRender:x}=k.useContext(Zf);return g.jsx(g.Fragment,{children:C.map(V=>{const L=Ka(V),O=o&&!a?!1:c===C||h.includes(L),I=()=>{if(v.has(L))v.set(L,!0);else return;let y=!0;v.forEach(A=>{A||(y=!1)}),y&&(x==null||x(),w(p.current),o&&(u==null||u()),r&&r())};return g.jsx(iC,{isPresent:O,initial:!f.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:O?void 0:I,children:V},L)})})},Rt=t=>t;let DE=Rt;function rp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Yi=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Sn=t=>t*1e3,xn=t=>t/1e3,aC={useManualTiming:!1};function lC(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,h=!1,f=!1)=>{const v=f&&r?e:n;return h&&s.add(c),v.has(c)||v.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,u.process(c))}};return u}const Ga=["read","resolveKeyframes","update","preRender","render","postRender"],uC=40;function bE(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ga.reduce((w,_)=>(w[_]=lC(s),w),{}),{read:a,resolveKeyframes:u,update:c,preRender:h,render:f,postRender:p}=o,v=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,uC),1),i.timestamp=w,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},T=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:Ga.reduce((w,_)=>{const x=o[_];return w[_]=(V,L=!1,O=!1)=>(n||T(),x.schedule(V,L,O)),w},{}),cancel:w=>{for(let _=0;_<Ga.length;_++)o[Ga[_]].cancel(w)},state:i,steps:o}}const{schedule:ge,cancel:dr,state:qe,steps:Hc}=bE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rt,!0),LE=k.createContext({strict:!1}),My={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ji={};for(const t in My)Ji[t]={isEnabled:e=>My[t].some(n=>!!e[n])};function cC(t){for(const e in t)Ji[e]={...Ji[e],...t[e]}}const hC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ql(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hC.has(t)}let ME=t=>!Ql(t);function dC(t){t&&(ME=e=>e.startsWith("on")?!Ql(e):t(e))}try{dC(require("@emotion/is-prop-valid").default)}catch{}function fC(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(ME(i)||n===!0&&Ql(i)||!e&&!Ql(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function pC(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Nu=k.createContext({});function jo(t){return typeof t=="string"||Array.isArray(t)}function Vu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ip=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sp=["initial",...ip];function Du(t){return Vu(t.animate)||sp.some(e=>jo(t[e]))}function OE(t){return!!(Du(t)||t.variants)}function mC(t,e){if(Du(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jo(n)?n:void 0,animate:jo(r)?r:void 0}}return t.inherit!==!1?e:{}}function gC(t){const{initial:e,animate:n}=mC(t,k.useContext(Nu));return k.useMemo(()=>({initial:e,animate:n}),[Oy(e),Oy(n)])}function Oy(t){return Array.isArray(t)?t.join(" "):t}const yC=Symbol.for("motionComponentSymbol");function Ci(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vC(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ci(n)&&(n.current=r))},[e])}const op=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_C="framerAppearId",jE="data-"+op(_C),{schedule:ap}=bE(queueMicrotask,!1),FE=k.createContext({});function wC(t,e,n,r,i){var s,o;const{visualElement:a}=k.useContext(Nu),u=k.useContext(LE),c=k.useContext(ku),h=k.useContext(tp).reducedMotion,f=k.useRef(null);r=r||u.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,v=k.useContext(FE);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&EC(f.current,n,i,v);const T=k.useRef(!1);k.useInsertionEffect(()=>{p&&T.current&&p.update(n,c)});const S=n[jE],C=k.useRef(!!S&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,S))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,S)));return VE(()=>{p&&(T.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),ap.render(p.render),C.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!C.current&&p.animationState&&p.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,S)}),C.current=!1))}),p}function EC(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:UE(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ci(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function UE(t){if(t)return t.options.allowProjection!==!1?t.projection:UE(t.parent)}function TC({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&cC(t);function a(c,h){let f;const p={...k.useContext(tp),...c,layoutId:SC(c)},{isStatic:v}=p,T=gC(c),S=r(c,v);if(!v&&np){xC();const C=AC(p);f=C.MeasureLayout,T.visualElement=wC(i,S,p,e,C.ProjectionNode)}return g.jsxs(Nu.Provider,{value:T,children:[f&&T.visualElement?g.jsx(f,{visualElement:T.visualElement,...p}):null,n(i,c,vC(S,T.visualElement,h),S,v,T.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const u=k.forwardRef(a);return u[yC]=i,u}function SC({layoutId:t}){const e=k.useContext(Zf).id;return e&&t!==void 0?e+"-"+t:t}function xC(t,e){k.useContext(LE).strict}function AC(t){const{drag:e,layout:n}=Ji;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const IC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lp(t){return typeof t!="string"||t.includes("-")?!1:!!(IC.indexOf(t)>-1||/[A-Z]/u.test(t))}function jy(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function up(t,e,n,r){if(typeof e=="function"){const[i,s]=jy(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=jy(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const pd=t=>Array.isArray(t),PC=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),CC=t=>pd(t)?t[t.length-1]||0:t,ut=t=>!!(t&&t.getVelocity);function ml(t){const e=ut(t)?t.get():t;return PC(e)?e.toValue():e}function RC({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:kC(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const BE=t=>(e,n)=>{const r=k.useContext(Nu),i=k.useContext(ku),s=()=>RC(t,e,r,i);return n?s():ep(s)};function kC(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=ml(s[p]);let{initial:o,animate:a}=t;const u=Du(t),c=OE(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Vu(f)){const p=Array.isArray(f)?f:[f];for(let v=0;v<p.length;v++){const T=up(t,p[v]);if(T){const{transitionEnd:S,transition:C,...w}=T;for(const _ in w){let x=w[_];if(Array.isArray(x)){const V=h?x.length-1:0;x=x[V]}x!==null&&(i[_]=x)}for(const _ in S)i[_]=S[_]}}}return i}const fs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ii=new Set(fs),$E=t=>e=>typeof e=="string"&&e.startsWith(t),zE=$E("--"),NC=$E("var(--"),cp=t=>NC(t)?VC.test(t.split("/*")[0].trim()):!1,VC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,WE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Rn=(t,e,n)=>n>e?e:n<t?t:n,ps={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fo={...ps,transform:t=>Rn(0,1,t)},Qa={...ps,default:1},ta=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Bn=ta("deg"),an=ta("%"),q=ta("px"),DC=ta("vh"),bC=ta("vw"),Fy={...an,parse:t=>an.parse(t)/100,transform:t=>an.transform(t*100)},LC={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,backgroundPositionX:q,backgroundPositionY:q},MC={rotate:Bn,rotateX:Bn,rotateY:Bn,rotateZ:Bn,scale:Qa,scaleX:Qa,scaleY:Qa,scaleZ:Qa,skew:Bn,skewX:Bn,skewY:Bn,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:Fo,originX:Fy,originY:Fy,originZ:q},Uy={...ps,transform:Math.round},hp={...LC,...MC,zIndex:Uy,size:q,fillOpacity:Fo,strokeOpacity:Fo,numOctaves:Uy},OC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jC=fs.length;function FC(t,e,n){let r="",i=!0;for(let s=0;s<jC;s++){const o=fs[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const c=WE(a,hp[o]);if(!u){i=!1;const h=OC[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function dp(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const c=e[u];if(ii.has(u)){o=!0;continue}else if(zE(u)){i[u]=c;continue}else{const h=WE(c,hp[u]);u.startsWith("origin")?(a=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=FC(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${c} ${h}`}}const UC={offset:"stroke-dashoffset",array:"stroke-dasharray"},BC={offset:"strokeDashoffset",array:"strokeDasharray"};function $C(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?UC:BC;t[s.offset]=q.transform(-r);const o=q.transform(e),a=q.transform(n);t[s.array]=`${o} ${a}`}function By(t,e,n){return typeof t=="string"?t:q.transform(e+n*t)}function zC(t,e,n){const r=By(e,t.x,t.width),i=By(n,t.y,t.height);return`${r} ${i}`}function fp(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,f){if(dp(t,c,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v,dimensions:T}=t;p.transform&&(T&&(v.transform=p.transform),delete p.transform),T&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=zC(T,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&$C(p,o,a,u,!1)}const pp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),HE=()=>({...pp(),attrs:{}}),mp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function qE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const KE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GE(t,e,n,r){qE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(KE.has(i)?i:op(i),e.attrs[i])}const Xl={};function WC(t){Object.assign(Xl,t)}function QE(t,{layout:e,layoutId:n}){return ii.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xl[t]||t==="opacity")}function gp(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ut(i[o])||e.style&&ut(e.style[o])||QE(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function XE(t,e,n){const r=gp(t,e,n);for(const i in t)if(ut(t[i])||ut(e[i])){const s=fs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function HC(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const $y=["x","y","width","height","cx","cy","r"],qC={useVisualState:BE({scrapeMotionValuesFromProps:XE,createRenderState:HE,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ii.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<$y.length;a++){const u=$y[a];t[u]!==e[u]&&(o=!0)}o&&ge.read(()=>{HC(n,r),ge.render(()=>{fp(r,i,mp(n.tagName),t.transformTemplate),GE(n,r)})})}})},KC={useVisualState:BE({scrapeMotionValuesFromProps:gp,createRenderState:pp})};function YE(t,e,n){for(const r in e)!ut(e[r])&&!QE(r,n)&&(t[r]=e[r])}function GC({transformTemplate:t},e){return k.useMemo(()=>{const n=pp();return dp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function QC(t,e){const n=t.style||{},r={};return YE(r,n,t),Object.assign(r,GC(t,e)),r}function XC(t,e){const n={},r=QC(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function YC(t,e,n,r){const i=k.useMemo(()=>{const s=HE();return fp(s,e,mp(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};YE(s,t.style,t),i.style={...s,...i.style}}return i}function JC(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(lp(n)?YC:XC)(r,s,o,n),c=fC(r,typeof n=="string",t),h=n!==k.Fragment?{...c,...u,ref:i}:{},{children:f}=r,p=k.useMemo(()=>ut(f)?f.get():f,[f]);return k.createElement(n,{...h,children:p})}}function ZC(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...lp(r)?qC:KC,preloadedFeatures:t,useRender:JC(i),createVisualElement:e,Component:r};return TC(o)}}function JE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function bu(t,e,n){const r=t.getProps();return up(r,e,n!==void 0?n:r.custom,t)}const eR=rp(()=>window.ScrollTimeline!==void 0);class tR{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(eR()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class nR extends tR{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function yp(t,e){return t?t[e]||t.default||t:void 0}const md=2e4;function ZE(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<md;)e+=n,r=t.next(e);return e>=md?1/0:e}function vp(t){return typeof t=="function"}function zy(t,e){t.timeline=e,t.onfinish=null}const _p=t=>Array.isArray(t)&&typeof t[0]=="number",rR={linearEasing:void 0};function iR(t,e){const n=rp(t);return()=>{var r;return(r=rR[e])!==null&&r!==void 0?r:n()}}const Yl=iR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eT=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Yi(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function tT(t){return!!(typeof t=="function"&&Yl()||!t||typeof t=="string"&&(t in gd||Yl())||_p(t)||Array.isArray(t)&&t.every(tT))}const qs=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qs([0,.65,.55,1]),circOut:qs([.55,0,1,.45]),backIn:qs([.31,.01,.66,-.59]),backOut:qs([.33,1.53,.69,.99])};function nT(t,e){if(t)return typeof t=="function"&&Yl()?eT(t,e):_p(t)?qs(t):Array.isArray(t)?t.map(n=>nT(n,e)||gd.easeOut):gd[t]}const Wt={x:!1,y:!1};function rT(){return Wt.x||Wt.y}function sR(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function iT(t,e){const n=sR(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Wy(t){return e=>{e.pointerType==="touch"||rT()||t(e)}}function oR(t,e,n={}){const[r,i,s]=iT(t,n),o=Wy(a=>{const{target:u}=a,c=e(a);if(typeof c!="function"||!u)return;const h=Wy(f=>{c(f),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const sT=(t,e)=>e?t===e?!0:sT(t,e.parentElement):!1,wp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,aR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lR(t){return aR.has(t.tagName)||t.tabIndex!==-1}const Ks=new WeakSet;function Hy(t){return e=>{e.key==="Enter"&&t(e)}}function qc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const uR=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Hy(()=>{if(Ks.has(n))return;qc(n,"down");const i=Hy(()=>{qc(n,"up")}),s=()=>qc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function qy(t){return wp(t)&&!rT()}function cR(t,e,n={}){const[r,i,s]=iT(t,n),o=a=>{const u=a.currentTarget;if(!qy(a)||Ks.has(u))return;Ks.add(u);const c=e(a),h=(v,T)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!qy(v)||!Ks.has(u))&&(Ks.delete(u),typeof c=="function"&&c(v,{success:T}))},f=v=>{h(v,n.useGlobalTarget||sT(u,v.target))},p=v=>{h(v,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!lR(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>uR(c,i),i)}),s}function hR(t){return t==="x"||t==="y"?Wt[t]?null:(Wt[t]=!0,()=>{Wt[t]=!1}):Wt.x||Wt.y?null:(Wt.x=Wt.y=!0,()=>{Wt.x=Wt.y=!1})}const oT=new Set(["width","height","top","left","right","bottom",...fs]);let gl;function dR(){gl=void 0}const ln={now:()=>(gl===void 0&&ln.set(qe.isProcessing||aC.useManualTiming?qe.timestamp:performance.now()),gl),set:t=>{gl=t,queueMicrotask(dR)}};function Ep(t,e){t.indexOf(e)===-1&&t.push(e)}function Tp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Sp{constructor(){this.subscriptions=[]}add(e){return Ep(this.subscriptions,e),()=>Tp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function aT(t,e){return e?t*(1e3/e):0}const Ky=30,fR=t=>!isNaN(parseFloat(t));class pR{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ln.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sp);const r=this.events[e].add(n);return e==="change"?()=>{r(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ky)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ky);return aT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uo(t,e){return new pR(t,e)}function mR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Uo(n))}function gR(t,e){const n=bu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=CC(s[o]);mR(t,o,a)}}function yR(t){return!!(ut(t)&&t.add)}function yd(t,e){const n=t.getValue("willChange");if(yR(n))return n.add(e)}function lT(t){return t.props[jE]}const uT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,vR=1e-7,_R=12;function wR(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=uT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>vR&&++a<_R);return o}function na(t,e,n,r){if(t===e&&n===r)return Rt;const i=s=>wR(s,0,1,t,n);return s=>s===0||s===1?s:uT(i(s),e,r)}const cT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hT=t=>e=>1-t(1-e),dT=na(.33,1.53,.69,.99),xp=hT(dT),fT=cT(xp),pT=t=>(t*=2)<1?.5*xp(t):.5*(2-Math.pow(2,-10*(t-1))),Ap=t=>1-Math.sin(Math.acos(t)),mT=hT(Ap),gT=cT(Ap),yT=t=>/^0[^.\s]+$/u.test(t);function ER(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yT(t):!0}const lo=t=>Math.round(t*1e5)/1e5,Ip=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TR(t){return t==null}const SR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Pp=(t,e)=>n=>!!(typeof n=="string"&&SR.test(n)&&n.startsWith(t)||e&&!TR(n)&&Object.prototype.hasOwnProperty.call(n,e)),vT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Ip);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},xR=t=>Rn(0,255,t),Kc={...ps,transform:t=>Math.round(xR(t))},jr={test:Pp("rgb","red"),parse:vT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Kc.transform(t)+", "+Kc.transform(e)+", "+Kc.transform(n)+", "+lo(Fo.transform(r))+")"};function AR(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const vd={test:Pp("#"),parse:AR,transform:jr.transform},Ri={test:Pp("hsl","hue"),parse:vT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+an.transform(lo(e))+", "+an.transform(lo(n))+", "+lo(Fo.transform(r))+")"},it={test:t=>jr.test(t)||vd.test(t)||Ri.test(t),parse:t=>jr.test(t)?jr.parse(t):Ri.test(t)?Ri.parse(t):vd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jr.transform(t):Ri.transform(t)},IR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PR(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ip))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(IR))===null||n===void 0?void 0:n.length)||0)>0}const _T="number",wT="color",CR="var",RR="var(",Gy="${}",kR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(kR,u=>(it.test(u)?(r.color.push(s),i.push(wT),n.push(it.parse(u))):u.startsWith(RR)?(r.var.push(s),i.push(CR),n.push(u)):(r.number.push(s),i.push(_T),n.push(parseFloat(u))),++s,Gy)).split(Gy);return{values:n,split:a,indexes:r,types:i}}function ET(t){return Bo(t).values}function TT(t){const{split:e,types:n}=Bo(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===_T?s+=lo(i[o]):a===wT?s+=it.transform(i[o]):s+=i[o]}return s}}const NR=t=>typeof t=="number"?0:t;function VR(t){const e=ET(t);return TT(t)(e.map(NR))}const fr={test:PR,parse:ET,createTransformer:TT,getAnimatableNone:VR},DR=new Set(["brightness","contrast","saturate","opacity"]);function bR(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ip)||[];if(!r)return t;const i=n.replace(r,"");let s=DR.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const LR=/\b([a-z-]*)\(.*?\)/gu,_d={...fr,getAnimatableNone:t=>{const e=t.match(LR);return e?e.map(bR).join(" "):t}},MR={...hp,color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,filter:_d,WebkitFilter:_d},Cp=t=>MR[t];function ST(t,e){let n=Cp(t);return n!==_d&&(n=fr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const OR=new Set(["auto","none","0"]);function jR(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!OR.has(s)&&Bo(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=ST(n,i)}const Qy=t=>t===ps||t===q,Xy=(t,e)=>parseFloat(t.split(", ")[e]),Yy=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Xy(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Xy(s[1],t):0}},FR=new Set(["x","y","z"]),UR=fs.filter(t=>!FR.has(t));function BR(t){const e=[];return UR.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Zi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Yy(4,13),y:Yy(5,14)};Zi.translateX=Zi.x;Zi.translateY=Zi.y;const zr=new Set;let wd=!1,Ed=!1;function xT(){if(Ed){const t=Array.from(zr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=BR(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ed=!1,wd=!1,zr.forEach(t=>t.complete()),zr.clear()}function AT(){zr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ed=!0)})}function $R(){AT(),xT()}class Rp{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(zr.add(this),wd||(wd=!0,ge.read(AT),ge.resolveKeyframes(xT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),zr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,zr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const IT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),zR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WR(t){const e=zR.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function PT(t,e,n=1){const[r,i]=WR(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return IT(o)?parseFloat(o):o}return cp(i)?PT(i,e,n+1):i}const CT=t=>e=>e.test(t),HR={test:t=>t==="auto",parse:t=>t},RT=[ps,q,an,Bn,bC,DC,HR],Jy=t=>RT.find(CT(t));class kT extends Rp{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),cp(c))){const h=PT(c,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!oT.has(r)||e.length!==2)return;const[i,s]=e,o=Jy(i),a=Jy(s);if(o!==a)if(Qy(o)&&Qy(a))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)ER(e[i])&&r.push(i);r.length&&jR(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Zi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}const Zy=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(fr.test(t)||t==="0")&&!t.startsWith("url("));function qR(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KR(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Zy(i,e),a=Zy(s,e);return!o||!a?!1:qR(t)||(n==="spring"||vp(n))&&r}const GR=t=>t!==null;function Lu(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(GR),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const QR=40;class NT{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ln.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>QR?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$R(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ln.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:c}=this.options;if(!c&&!KR(e,r,i,s))if(o)this.options.duration=0;else{u&&u(Lu(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Te=(t,e,n)=>t+(e-t)*n;function Gc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function XR({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=Gc(u,a,t+1/3),s=Gc(u,a,t),o=Gc(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Jl(t,e){return n=>n>0?e:t}const Qc=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},YR=[vd,jr,Ri],JR=t=>YR.find(e=>e.test(t));function ev(t){const e=JR(t);if(!e)return!1;let n=e.parse(t);return e===Ri&&(n=XR(n)),n}const tv=(t,e)=>{const n=ev(t),r=ev(e);if(!n||!r)return Jl(t,e);const i={...n};return s=>(i.red=Qc(n.red,r.red,s),i.green=Qc(n.green,r.green,s),i.blue=Qc(n.blue,r.blue,s),i.alpha=Te(n.alpha,r.alpha,s),jr.transform(i))},ZR=(t,e)=>n=>e(t(n)),ra=(...t)=>t.reduce(ZR),Td=new Set(["none","hidden"]);function ek(t,e){return Td.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function tk(t,e){return n=>Te(t,e,n)}function kp(t){return typeof t=="number"?tk:typeof t=="string"?cp(t)?Jl:it.test(t)?tv:ik:Array.isArray(t)?VT:typeof t=="object"?it.test(t)?tv:nk:Jl}function VT(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>kp(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function nk(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kp(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function rk(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const ik=(t,e)=>{const n=fr.createTransformer(e),r=Bo(t),i=Bo(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Td.has(t)&&!i.values.length||Td.has(e)&&!r.values.length?ek(t,e):ra(VT(rk(r,i),i.values),n):Jl(t,e)};function DT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Te(t,e,n):kp(t)(t,e)}const sk=5;function bT(t,e,n){const r=Math.max(e-sk,0);return aT(n-t(r),e-r)}const Ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xc=.001;function ok({duration:t=Ie.duration,bounce:e=Ie.bounce,velocity:n=Ie.velocity,mass:r=Ie.mass}){let i,s,o=1-e;o=Rn(Ie.minDamping,Ie.maxDamping,o),t=Rn(Ie.minDuration,Ie.maxDuration,xn(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,v=Sd(c,o),T=Math.exp(-f);return Xc-p/v*T},s=c=>{const f=c*o*t,p=f*n+n,v=Math.pow(o,2)*Math.pow(c,2)*t,T=Math.exp(-f),S=Sd(Math.pow(c,2),o);return(-i(c)+Xc>0?-1:1)*((p-v)*T)/S}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-Xc+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,u=lk(i,s,a);if(t=Sn(t),isNaN(u))return{stiffness:Ie.stiffness,damping:Ie.damping,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const ak=12;function lk(t,e,n){let r=n;for(let i=1;i<ak;i++)r=r-t(r)/e(r);return r}function Sd(t,e){return t*Math.sqrt(1-e*e)}const uk=["duration","bounce"],ck=["stiffness","damping","mass"];function nv(t,e){return e.some(n=>t[n]!==void 0)}function hk(t){let e={velocity:Ie.velocity,stiffness:Ie.stiffness,damping:Ie.damping,mass:Ie.mass,isResolvedFromDuration:!1,...t};if(!nv(t,ck)&&nv(t,uk))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Rn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ie.mass,stiffness:i,damping:s}}else{const n=ok(t);e={...e,...n,mass:Ie.mass},e.isResolvedFromDuration=!0}return e}function LT(t=Ie.visualDuration,e=Ie.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:u,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:v}=hk({...n,velocity:-xn(n.velocity||0)}),T=p||0,S=c/(2*Math.sqrt(u*h)),C=o-s,w=xn(Math.sqrt(u/h)),_=Math.abs(C)<5;r||(r=_?Ie.restSpeed.granular:Ie.restSpeed.default),i||(i=_?Ie.restDelta.granular:Ie.restDelta.default);let x;if(S<1){const L=Sd(w,S);x=O=>{const I=Math.exp(-S*w*O);return o-I*((T+S*w*C)/L*Math.sin(L*O)+C*Math.cos(L*O))}}else if(S===1)x=L=>o-Math.exp(-w*L)*(C+(T+w*C)*L);else{const L=w*Math.sqrt(S*S-1);x=O=>{const I=Math.exp(-S*w*O),y=Math.min(L*O,300);return o-I*((T+S*w*C)*Math.sinh(y)+L*C*Math.cosh(y))/L}}const V={calculatedDuration:v&&f||null,next:L=>{const O=x(L);if(v)a.done=L>=f;else{let I=0;S<1&&(I=L===0?Sn(T):bT(x,L,O));const y=Math.abs(I)<=r,A=Math.abs(o-O)<=i;a.done=y&&A}return a.value=a.done?o:O,a},toString:()=>{const L=Math.min(ZE(V),md),O=eT(I=>V.next(L*I).value,L,30);return L+"ms "+O}};return V}function rv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},v=y=>a!==void 0&&y<a||u!==void 0&&y>u,T=y=>a===void 0?u:u===void 0||Math.abs(a-y)<Math.abs(u-y)?a:u;let S=n*e;const C=f+S,w=o===void 0?C:o(C);w!==C&&(S=w-f);const _=y=>-S*Math.exp(-y/r),x=y=>w+_(y),V=y=>{const A=_(y),P=x(y);p.done=Math.abs(A)<=c,p.value=p.done?w:P};let L,O;const I=y=>{v(p.value)&&(L=y,O=LT({keyframes:[p.value,T(p.value)],velocity:bT(x,y,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return I(0),{calculatedDuration:null,next:y=>{let A=!1;return!O&&L===void 0&&(A=!0,V(y),I(y)),L!==void 0&&y>=L?O.next(y-L):(!A&&V(y),p)}}}const dk=na(.42,0,1,1),fk=na(0,0,.58,1),MT=na(.42,0,.58,1),pk=t=>Array.isArray(t)&&typeof t[0]!="number",mk={linear:Rt,easeIn:dk,easeInOut:MT,easeOut:fk,circIn:Ap,circInOut:gT,circOut:mT,backIn:xp,backInOut:fT,backOut:dT,anticipate:pT},iv=t=>{if(_p(t)){DE(t.length===4);const[e,n,r,i]=t;return na(e,n,r,i)}else if(typeof t=="string")return mk[t];return t};function gk(t,e,n){const r=[],i=n||DT,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Rt:e;a=ra(u,a)}r.push(a)}return r}function yk(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(DE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=gk(e,r,i),u=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=Yi(t[f],t[f+1],h);return a[f](p)};return n?h=>c(Rn(t[0],t[s-1],h)):c}function vk(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Yi(0,e,r);t.push(Te(n,1,i))}}function _k(t){const e=[0];return vk(e,t.length-1),e}function wk(t,e){return t.map(n=>n*e)}function Ek(t,e){return t.map(()=>e||MT).splice(0,t.length-1)}function Zl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=pk(r)?r.map(iv):iv(r),s={done:!1,value:e[0]},o=wk(n&&n.length===e.length?n:_k(e),t),a=yk(o,e,{ease:Array.isArray(i)?i:Ek(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const Tk=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ge.update(e,!0),stop:()=>dr(e),now:()=>qe.isProcessing?qe.timestamp:ln.now()}},Sk={decay:rv,inertia:rv,tween:Zl,keyframes:Zl,spring:LT},xk=t=>t/100;class Np extends NT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Rp,a=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=vp(n)?n:Sk[n]||Zl;let u,c;a!==Zl&&typeof e[0]!="number"&&(u=ra(xk,DT(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=ZE(h));const{calculatedDuration:f}=h,p=f+i,v=p*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:p,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:y}=this.options;return{done:!0,value:y[y.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:c,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:v,repeatType:T,repeatDelay:S,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-p*(this.speed>=0?1:-1),_=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let x=this.currentTime,V=s;if(v){const y=Math.min(this.currentTime,h)/f;let A=Math.floor(y),P=y%1;!P&&y>=1&&(P=1),P===1&&A--,A=Math.min(A,v+1),!!(A%2)&&(T==="reverse"?(P=1-P,S&&(P-=S/f)):T==="mirror"&&(V=o)),x=Rn(0,1,P)*f}const L=_?{done:!1,value:u[0]}:V.next(x);a&&(L.value=a(L.value));let{done:O}=L;!_&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&i!==void 0&&(L.value=Lu(u,this.options,i)),C&&C(L.value),I&&this.finish(),L}get duration(){const{resolved:e}=this;return e?xn(e.calculatedDuration):0}get time(){return xn(this.currentTime)}set time(e){e=Sn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Tk,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Ak=new Set(["opacity","clipPath","filter","transform"]);function Ik(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=nT(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Pk=rp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eu=10,Ck=2e4;function Rk(t){return vp(t.type)||t.type==="spring"||!tT(t.ease)}function kk(t,e){const n=new Np({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Ck;)r=n.sample(s),i.push(r.value),s+=eu;return{times:void 0,keyframes:i,duration:s-eu,ease:"linear"}}const OT={anticipate:pT,backInOut:fT,circInOut:gT};function Nk(t){return t in OT}class sv extends NT{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new kT(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:u,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Yl()&&Nk(s)&&(s=OT[s]),Rk(this.options)){const{onComplete:f,onUpdate:p,motionValue:v,element:T,...S}=this.options,C=kk(e,S);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,i=C.times,s=C.ease,o="keyframes"}const h=Ik(a.owner.current,u,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(zy(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;a.set(Lu(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return xn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return xn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Sn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Rt;const{animation:r}=n;zy(r,e)}return Rt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:f,element:p,...v}=this.options,T=new Np({...v,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),S=Sn(this.time);c.setWithVelocity(T.sample(S-eu).value,T.sample(S).value,eu)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=n.owner.getProps();return Pk()&&r&&Ak.has(r)&&!u&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Vk={type:"spring",stiffness:500,damping:25,restSpeed:10},Dk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),bk={type:"keyframes",duration:.8},Lk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mk=(t,{keyframes:e})=>e.length>2?bk:ii.has(t)?t.startsWith("scale")?Dk(e[1]):Vk:Lk;function Ok({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const Vp=(t,e,n,r={},i,s)=>o=>{const a=yp(r,t)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Sn(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Ok(a)||(h={...h,...Mk(t,h)}),h.duration&&(h.duration=Sn(h.duration)),h.repeatDelay&&(h.repeatDelay=Sn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Lu(h.keyframes,a);if(p!==void 0)return ge.update(()=>{h.onUpdate(p),h.onComplete()}),new nR([])}return!s&&sv.supports(h)?new sv(h):new Np(h)};function jk({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jT(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in u){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),v=u[f];if(v===void 0||h&&jk(h,f))continue;const T={delay:n,...yp(o||{},f)};let S=!1;if(window.MotionHandoffAnimation){const w=lT(t);if(w){const _=window.MotionHandoffAnimation(w,f,ge);_!==null&&(T.startTime=_,S=!0)}}yd(t,f),p.start(Vp(f,p,v,t.shouldReduceMotion&&oT.has(f)?{type:!1}:T,t,S));const C=p.animation;C&&c.push(C)}return a&&Promise.all(c).then(()=>{ge.update(()=>{a&&gR(t,a)})}),c}function xd(t,e,n={}){var r;const i=bu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(jT(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return Fk(t,e,h+c,f,p,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[c,h]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function Fk(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Uk).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(xd(c,e,{...s,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Uk(t,e){return t.sortNodePosition(e)}function Bk(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>xd(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=xd(t,e,n);else{const i=typeof e=="function"?bu(t,e,n.custom):e;r=Promise.all(jT(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const $k=sp.length;function FT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?FT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<$k;n++){const r=sp[n],i=t.props[r];(jo(i)||i===!1)&&(e[r]=i)}return e}const zk=[...ip].reverse(),Wk=ip.length;function Hk(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Bk(t,n,r)))}function qk(t){let e=Hk(t),n=ov(),r=!0;const i=u=>(c,h)=>{var f;const p=bu(t,h,u==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:v,transitionEnd:T,...S}=p;c={...c,...S,...T}}return c};function s(u){e=u(t)}function o(u){const{props:c}=t,h=FT(t.parent)||{},f=[],p=new Set;let v={},T=1/0;for(let C=0;C<Wk;C++){const w=zk[C],_=n[w],x=c[w]!==void 0?c[w]:h[w],V=jo(x),L=w===u?_.isActive:null;L===!1&&(T=C);let O=x===h[w]&&x!==c[w]&&V;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),_.protectedKeys={...v},!_.isActive&&L===null||!x&&!_.prevProp||Vu(x)||typeof x=="boolean")continue;const I=Kk(_.prevProp,x);let y=I||w===u&&_.isActive&&!O&&V||C>T&&V,A=!1;const P=Array.isArray(x)?x:[x];let N=P.reduce(i(w),{});L===!1&&(N={});const{prevResolvedValues:D={}}=_,R={...D,...N},ve=he=>{y=!0,p.has(he)&&(A=!0,p.delete(he)),_.needsAnimating[he]=!0;const $=t.getValue(he);$&&($.liveStyle=!1)};for(const he in R){const $=N[he],G=D[he];if(v.hasOwnProperty(he))continue;let Q=!1;pd($)&&pd(G)?Q=!JE($,G):Q=$!==G,Q?$!=null?ve(he):p.add(he):$!==void 0&&p.has(he)?ve(he):_.protectedKeys[he]=!0}_.prevProp=x,_.prevResolvedValues=N,_.isActive&&(v={...v,...N}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(O&&I)||A)&&f.push(...P.map(he=>({animation:he,options:{type:w}})))}if(p.size){const C={};p.forEach(w=>{const _=t.getBaseTarget(w),x=t.getValue(w);x&&(x.liveStyle=!0),C[w]=_??null}),f.push({animation:C})}let S=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(f):Promise.resolve()}function a(u,c){var h;if(n[u].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var v;return(v=p.animationState)===null||v===void 0?void 0:v.setActive(u,c)}),n[u].isActive=c;const f=o(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=ov(),r=!0}}}function Kk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!JE(e,t):!1}function Rr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ov(){return{animate:Rr(!0),whileInView:Rr(),whileHover:Rr(),whileTap:Rr(),whileDrag:Rr(),whileFocus:Rr(),exit:Rr()}}class Tr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Gk extends Tr{constructor(e){super(e),e.animationState||(e.animationState=qk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Qk=0;class Xk extends Tr{constructor(){super(...arguments),this.id=Qk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Yk={animation:{Feature:Gk},exit:{Feature:Xk}};function $o(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ia(t){return{point:{x:t.pageX,y:t.pageY}}}const Jk=t=>e=>wp(e)&&t(e,ia(e));function uo(t,e,n,r){return $o(t,e,Jk(n),r)}const av=(t,e)=>Math.abs(t-e);function Zk(t,e){const n=av(t.x,e.x),r=av(t.y,e.y);return Math.sqrt(n**2+r**2)}class UT{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Jc(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=Zk(f.offset,{x:0,y:0})>=3;if(!p&&!v)return;const{point:T}=f,{timestamp:S}=qe;this.history.push({...T,timestamp:S});const{onStart:C,onMove:w}=this.handlers;p||(C&&C(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Yc(p,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:T,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Jc(f.type==="pointercancel"?this.lastMoveEventInfo:Yc(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,C),T&&T(f,C)},!wp(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=ia(e),a=Yc(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=qe;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Jc(a,this.history)),this.removeListeners=ra(uo(this.contextWindow,"pointermove",this.handlePointerMove),uo(this.contextWindow,"pointerup",this.handlePointerUp),uo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),dr(this.updatePoint)}}function Yc(t,e){return e?{point:e(t.point)}:t}function lv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jc({point:t},e){return{point:t,delta:lv(t,BT(e)),offset:lv(t,eN(e)),velocity:tN(e,.1)}}function eN(t){return t[0]}function BT(t){return t[t.length-1]}function tN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=BT(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Sn(e)));)n--;if(!r)return{x:0,y:0};const s=xn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const $T=1e-4,nN=1-$T,rN=1+$T,zT=.01,iN=0-zT,sN=0+zT;function Nt(t){return t.max-t.min}function oN(t,e,n){return Math.abs(t-e)<=n}function uv(t,e,n,r=.5){t.origin=r,t.originPoint=Te(e.min,e.max,t.origin),t.scale=Nt(n)/Nt(e),t.translate=Te(n.min,n.max,t.origin)-t.originPoint,(t.scale>=nN&&t.scale<=rN||isNaN(t.scale))&&(t.scale=1),(t.translate>=iN&&t.translate<=sN||isNaN(t.translate))&&(t.translate=0)}function co(t,e,n,r){uv(t.x,e.x,n.x,r?r.originX:void 0),uv(t.y,e.y,n.y,r?r.originY:void 0)}function cv(t,e,n){t.min=n.min+e.min,t.max=t.min+Nt(e)}function aN(t,e,n){cv(t.x,e.x,n.x),cv(t.y,e.y,n.y)}function hv(t,e,n){t.min=e.min-n.min,t.max=t.min+Nt(e)}function ho(t,e,n){hv(t.x,e.x,n.x),hv(t.y,e.y,n.y)}function lN(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Te(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Te(n,t,r.max):Math.min(t,n)),t}function dv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uN(t,{top:e,left:n,bottom:r,right:i}){return{x:dv(t.x,n,i),y:dv(t.y,e,r)}}function fv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function cN(t,e){return{x:fv(t.x,e.x),y:fv(t.y,e.y)}}function hN(t,e){let n=.5;const r=Nt(t),i=Nt(e);return i>r?n=Yi(e.min,e.max-r,t.min):r>i&&(n=Yi(t.min,t.max-i,e.min)),Rn(0,1,n)}function dN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ad=.35;function fN(t=Ad){return t===!1?t=0:t===!0&&(t=Ad),{x:pv(t,"left","right"),y:pv(t,"top","bottom")}}function pv(t,e,n){return{min:mv(t,e),max:mv(t,n)}}function mv(t,e){return typeof t=="number"?t:t[e]||0}const gv=()=>({translate:0,scale:1,origin:0,originPoint:0}),ki=()=>({x:gv(),y:gv()}),yv=()=>({min:0,max:0}),ke=()=>({x:yv(),y:yv()});function Lt(t){return[t("x"),t("y")]}function WT({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function pN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zc(t){return t===void 0||t===1}function Id({scale:t,scaleX:e,scaleY:n}){return!Zc(t)||!Zc(e)||!Zc(n)}function Dr(t){return Id(t)||HT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function HT(t){return vv(t.x)||vv(t.y)}function vv(t){return t&&t!=="0%"}function tu(t,e,n){const r=t-n,i=e*r;return n+i}function _v(t,e,n,r,i){return i!==void 0&&(t=tu(t,i,r)),tu(t,n,r)+e}function Pd(t,e=0,n=1,r,i){t.min=_v(t.min,e,n,r,i),t.max=_v(t.max,e,n,r,i)}function qT(t,{x:e,y:n}){Pd(t.x,e.translate,e.scale,e.originPoint),Pd(t.y,n.translate,n.scale,n.originPoint)}const wv=.999999999999,Ev=1.0000000000001;function gN(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Vi(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,qT(t,o)),r&&Dr(s.latestValues)&&Vi(t,s.latestValues))}e.x<Ev&&e.x>wv&&(e.x=1),e.y<Ev&&e.y>wv&&(e.y=1)}function Ni(t,e){t.min=t.min+e,t.max=t.max+e}function Tv(t,e,n,r,i=.5){const s=Te(t.min,t.max,i);Pd(t,e,n,s,r)}function Vi(t,e){Tv(t.x,e.x,e.scaleX,e.scale,e.originX),Tv(t.y,e.y,e.scaleY,e.scale,e.originY)}function KT(t,e){return WT(mN(t.getBoundingClientRect(),e))}function yN(t,e,n){const r=KT(t,n),{scroll:i}=e;return i&&(Ni(r.x,i.offset.x),Ni(r.y,i.offset.y)),r}const GT=({current:t})=>t?t.ownerDocument.defaultView:null,vN=new WeakMap;class _N{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ke(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ia(h).point)},s=(h,f)=>{const{drag:p,dragPropagation:v,onDragStart:T}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hR(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lt(C=>{let w=this.getAxisMotionValue(C).get()||0;if(an.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const x=_.layout.layoutBox[C];x&&(w=Nt(x)*(parseFloat(w)/100))}}this.originPoint[C]=w}),T&&ge.postRender(()=>T(h,f)),yd(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:T,onDrag:S}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:C}=f;if(v&&this.currentDirection===null){this.currentDirection=wN(C),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",f.point,C),this.updateAxis("y",f.point,C),this.visualElement.render(),S&&S(h,f)},a=(h,f)=>this.stop(h,f),u=()=>Lt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new UT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:GT(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ge.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Xa(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=lN(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ci(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=uN(i.layoutBox,n):this.constraints=!1,this.elastic=fN(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Lt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=dN(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ci(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=yN(r,i.root,this.visualElement.getTransformPagePoint());let o=cN(i.layout.layoutBox,s);if(n){const a=n(pN(o));this.hasMutatedConstraints=!!a,a&&(o=WT(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Lt(h=>{if(!Xa(h,n,this.currentDirection))return;let f=u&&u[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,v=i?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,T)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return yd(this.visualElement,e),r.start(Vp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Lt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Lt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Lt(n=>{const{drag:r}=this.getProps();if(!Xa(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Te(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ci(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Lt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=hN({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Lt(o=>{if(!Xa(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Te(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;vN.set(this.visualElement,this);const e=this.visualElement.current,n=uo(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ci(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ge.read(r);const o=$o(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Lt(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Ad,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Xa(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wN(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class EN extends Tr{constructor(e){super(e),this.removeGroupControls=Rt,this.removeListeners=Rt,this.controls=new _N(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sv=t=>(e,n)=>{t&&ge.postRender(()=>t(e,n))};class TN extends Tr{constructor(){super(...arguments),this.removePointerDownListener=Rt}onPointerDown(e){this.session=new UT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Sv(e),onStart:Sv(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ge.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=uo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Us={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(q.test(t))t=parseFloat(t);else return t;const n=xv(t,e.target.x),r=xv(t,e.target.y);return`${n}% ${r}%`}},SN={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=fr.parse(t);if(i.length>5)return r;const s=fr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const c=Te(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class xN extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;WC(AN),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ge.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ap.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function QT(t){const[e,n]=NE(),r=k.useContext(Zf);return g.jsx(xN,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(FE),isPresent:e,safeToRemove:n})}const AN={borderRadius:{...Us,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Us,borderTopRightRadius:Us,borderBottomLeftRadius:Us,borderBottomRightRadius:Us,boxShadow:SN};function IN(t,e,n){const r=ut(t)?t:Uo(t);return r.start(Vp("",r,e,n)),r.animation}function PN(t){return t instanceof SVGElement&&t.tagName!=="svg"}const CN=(t,e)=>t.depth-e.depth;class RN{constructor(){this.children=[],this.isDirty=!1}add(e){Ep(this.children,e),this.isDirty=!0}remove(e){Tp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(CN),this.isDirty=!1,this.children.forEach(e)}}function kN(t,e){const n=ln.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(dr(r),t(s-e))};return ge.read(r,!0),()=>dr(r)}const XT=["TopLeft","TopRight","BottomLeft","BottomRight"],NN=XT.length,Av=t=>typeof t=="string"?parseFloat(t):t,Iv=t=>typeof t=="number"||q.test(t);function VN(t,e,n,r,i,s){i?(t.opacity=Te(0,n.opacity!==void 0?n.opacity:1,DN(r)),t.opacityExit=Te(e.opacity!==void 0?e.opacity:1,0,bN(r))):s&&(t.opacity=Te(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<NN;o++){const a=`border${XT[o]}Radius`;let u=Pv(e,a),c=Pv(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Iv(u)===Iv(c)?(t[a]=Math.max(Te(Av(u),Av(c),r),0),(an.test(c)||an.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Te(e.rotate||0,n.rotate||0,r))}function Pv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const DN=YT(0,.5,mT),bN=YT(.5,.95,Rt);function YT(t,e,n){return r=>r<t?0:r>e?1:n(Yi(t,e,r))}function Cv(t,e){t.min=e.min,t.max=e.max}function bt(t,e){Cv(t.x,e.x),Cv(t.y,e.y)}function Rv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kv(t,e,n,r,i){return t-=e,t=tu(t,1/n,r),i!==void 0&&(t=tu(t,1/i,r)),t}function LN(t,e=0,n=1,r=.5,i,s=t,o=t){if(an.test(e)&&(e=parseFloat(e),e=Te(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Te(s.min,s.max,r);t===s&&(a-=e),t.min=kv(t.min,e,n,a,i),t.max=kv(t.max,e,n,a,i)}function Nv(t,e,[n,r,i],s,o){LN(t,e[n],e[r],e[i],e.scale,s,o)}const MN=["x","scaleX","originX"],ON=["y","scaleY","originY"];function Vv(t,e,n,r){Nv(t.x,e,MN,n?n.x:void 0,r?r.x:void 0),Nv(t.y,e,ON,n?n.y:void 0,r?r.y:void 0)}function Dv(t){return t.translate===0&&t.scale===1}function JT(t){return Dv(t.x)&&Dv(t.y)}function bv(t,e){return t.min===e.min&&t.max===e.max}function jN(t,e){return bv(t.x,e.x)&&bv(t.y,e.y)}function Lv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ZT(t,e){return Lv(t.x,e.x)&&Lv(t.y,e.y)}function Mv(t){return Nt(t.x)/Nt(t.y)}function Ov(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class FN{constructor(){this.members=[]}add(e){Ep(this.members,e),e.scheduleRender()}remove(e){if(Tp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function UN(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:v,skewY:T}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),v&&(r+=`skewX(${v}deg) `),T&&(r+=`skewY(${T}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const br={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Gs=typeof window<"u"&&window.MotionDebug!==void 0,eh=["","X","Y","Z"],BN={visibility:"hidden"},jv=1e3;let $N=0;function th(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function eS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=lT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ge,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&eS(r)}function tS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=$N++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gs&&(br.totalNodes=br.resolvedTargetDeltas=br.recalculatedProjection=0),this.nodes.forEach(HN),this.nodes.forEach(XN),this.nodes.forEach(YN),this.nodes.forEach(qN),Gs&&window.MotionDebug.record(br)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new RN)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=PN(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=kN(p,250),yl.hasAnimatedSinceResize&&(yl.hasAnimatedSinceResize=!1,this.nodes.forEach(Uv))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||nV,{onLayoutAnimationStart:C,onLayoutAnimationComplete:w}=h.getProps(),_=!this.targetLayout||!ZT(this.targetLayout,T)||v,x=!p&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const V={...yp(S,"layout"),onPlay:C,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else p||Uv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JN),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fv);return}this.isUpdating||this.nodes.forEach(GN),this.isUpdating=!1,this.nodes.forEach(QN),this.nodes.forEach(zN),this.nodes.forEach(WN),this.clearAllSnapshots();const a=ln.now();qe.delta=Rn(0,1e3/60,a-qe.timestamp),qe.timestamp=a,qe.isProcessing=!0,Hc.update.process(qe),Hc.preRender.process(qe),Hc.render.process(qe),qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ap.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KN),this.sharedNodes.forEach(ZN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ke(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!JT(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Dr(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),rV(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ke();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(iV))){const{scroll:h}=this.root;h&&(Ni(u.x,h.offset.x),Ni(u.y,h.offset.y))}return u}removeElementScroll(o){var a;const u=ke();if(bt(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&bt(u,o),Ni(u.x,f.offset.x),Ni(u.y,f.offset.y))}return u}applyTransform(o,a=!1){const u=ke();bt(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Vi(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dr(h.latestValues)&&Vi(u,h.latestValues)}return Dr(this.latestValues)&&Vi(u,this.latestValues),u}removeTransform(o){const a=ke();bt(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!Dr(c.latestValues))continue;Id(c.latestValues)&&c.updateSnapshot();const h=ke(),f=c.measurePageBox();bt(h,f),Vv(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Dr(this.latestValues)&&Vv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=qe.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ke(),this.relativeTargetOrigin=ke(),ho(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),bt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ke(),this.targetWithTransforms=ke()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bt(this.target,this.layout.layoutBox),qT(this.target,this.targetDelta)):bt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ke(),this.relativeTargetOrigin=ke(),ho(this.relativeTargetOrigin,this.target,v.target),bt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gs&&br.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Id(this.parent.latestValues)||HT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===qe.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;bt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;gN(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ke());const{target:T}=a;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rv(this.prevProjectionDelta.x,this.projectionDelta.x),Rv(this.prevProjectionDelta.y,this.projectionDelta.y)),co(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!Ov(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ov(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Gs&&br.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ki(),this.projectionDelta=ki(),this.projectionDeltaWithTransform=ki()}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},f=ki();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=ke(),v=u?u.source:void 0,T=this.layout?this.layout.source:void 0,S=v!==T,C=this.getStack(),w=!C||C.members.length<=1,_=!!(S&&!w&&this.options.crossfade===!0&&!this.path.some(tV));this.animationProgress=0;let x;this.mixTargetDelta=V=>{const L=V/1e3;Bv(f.x,o.x,L),Bv(f.y,o.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ho(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eV(this.relativeTarget,this.relativeTargetOrigin,p,L),x&&jN(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ke()),bt(x,this.relativeTarget)),S&&(this.animationValues=h,VN(h,c,this.latestValues,L,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{yl.hasAnimatedSinceResize=!0,this.currentAnimation=IN(0,jv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&nS(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||ke();const f=Nt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const p=Nt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}bt(a,u),Vi(a,h),co(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new FN),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&th("z",o,c,this.animationValues);for(let h=0;h<eh.length;h++)th(`rotate${eh[h]}`,o,c,this.animationValues),th(`skew${eh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return BN;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ml(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=ml(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Dr(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=UN(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:v,y:T}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${T.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Xl){if(p[S]===void 0)continue;const{correct:C,applyTo:w}=Xl[S],_=c.transform==="none"?p[S]:C(p[S],f);if(w){const x=w.length;for(let V=0;V<x;V++)c[w[V]]=_}else c[S]=_}return this.options.layoutId&&(c.pointerEvents=f===this?ml(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Fv),this.root.sharedNodes.clear()}}}function zN(t){t.updateLayout()}function WN(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Lt(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],v=Nt(p);p.min=r[f].min,p.max=p.min+v}):nS(s,n.layoutBox,r)&&Lt(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],v=Nt(r[f]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+v)});const a=ki();co(a,r,n.layoutBox);const u=ki();o?co(u,t.applyTransform(i,!0),n.measuredBox):co(u,r,n.layoutBox);const c=!JT(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:v}=f;if(p&&v){const T=ke();ho(T,n.layoutBox,p.layoutBox);const S=ke();ho(S,r,v.layoutBox),ZT(T,S)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=T,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function HN(t){Gs&&br.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KN(t){t.clearSnapshot()}function Fv(t){t.clearMeasurements()}function GN(t){t.isLayoutDirty=!1}function QN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function XN(t){t.resolveTargetDelta()}function YN(t){t.calcProjection()}function JN(t){t.resetSkewAndRotation()}function ZN(t){t.removeLeadSnapshot()}function Bv(t,e,n){t.translate=Te(e.translate,0,n),t.scale=Te(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $v(t,e,n,r){t.min=Te(e.min,n.min,r),t.max=Te(e.max,n.max,r)}function eV(t,e,n,r){$v(t.x,e.x,n.x,r),$v(t.y,e.y,n.y,r)}function tV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const nV={duration:.45,ease:[.4,0,.1,1]},zv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Wv=zv("applewebkit/")&&!zv("chrome/")?Math.round:Rt;function Hv(t){t.min=Wv(t.min),t.max=Wv(t.max)}function rV(t){Hv(t.x),Hv(t.y)}function nS(t,e,n){return t==="position"||t==="preserve-aspect"&&!oN(Mv(e),Mv(n),.2)}function iV(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const sV=tS({attachResizeListener:(t,e)=>$o(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nh={current:void 0},rS=tS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nh.current){const t=new sV({});t.mount(window),t.setOptions({layoutScroll:!0}),nh.current=t}return nh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oV={pan:{Feature:TN},drag:{Feature:EN,ProjectionNode:rS,MeasureLayout:QT}};function qv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ge.postRender(()=>s(e,ia(e)))}class aV extends Tr{mount(){const{current:e}=this.node;e&&(this.unmount=oR(e,n=>(qv(this.node,n,"Start"),r=>qv(this.node,r,"End"))))}unmount(){}}class lV extends Tr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ra($o(this.node.current,"focus",()=>this.onFocus()),$o(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Kv(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ge.postRender(()=>s(e,ia(e)))}class uV extends Tr{mount(){const{current:e}=this.node;e&&(this.unmount=cR(e,n=>(Kv(this.node,n,"Start"),(r,{success:i})=>Kv(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cd=new WeakMap,rh=new WeakMap,cV=t=>{const e=Cd.get(t.target);e&&e(t)},hV=t=>{t.forEach(cV)};function dV({root:t,...e}){const n=t||document;rh.has(n)||rh.set(n,{});const r=rh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(hV,{root:t,...e})),r[i]}function fV(t,e,n){const r=dV(e);return Cd.set(t,n),r.observe(t),()=>{Cd.delete(t),r.unobserve(t)}}const pV={some:0,all:1};class mV extends Tr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pV[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(u)};return fV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(gV(e,n))&&this.startObserver()}unmount(){}}function gV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const yV={inView:{Feature:mV},tap:{Feature:uV},focus:{Feature:lV},hover:{Feature:aV}},vV={layout:{ProjectionNode:rS,MeasureLayout:QT}},Rd={current:null},iS={current:!1};function _V(){if(iS.current=!0,!!np)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rd.current=t.matches;t.addListener(e),e()}else Rd.current=!1}const wV=[...RT,it,fr],EV=t=>wV.find(CT(t)),Gv=new WeakMap;function TV(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ut(i))t.addValue(r,i);else if(ut(s))t.addValue(r,Uo(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Uo(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Qv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ln.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ge.render(this.render,!1,!0))};const{latestValues:u,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Du(n),this.isVariantNode=OE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in p){const T=p[v];u[v]!==void 0&&ut(T)&&T.set(u[v],!1)}}mount(e){this.current=e,Gv.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),iS.current||_V(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gv.delete(this.current),this.projection&&this.projection.unmount(),dr(this.notifyUpdate),dr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ii.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ge.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ji){const n=Ji[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ke()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Qv.length;r++){const i=Qv[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=TV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Uo(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(IT(i)||yT(i))?i=parseFloat(i):!EV(i)&&fr.test(n)&&(i=ST(e,n)),this.setBaseTarget(e,ut(i)?i.get():i)),ut(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=up(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ut(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class sS extends SV{constructor(){super(...arguments),this.KeyframeResolver=kT}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ut(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function xV(t){return window.getComputedStyle(t)}class AV extends sS{constructor(){super(...arguments),this.type="html",this.renderInstance=qE}readValueFromInstance(e,n){if(ii.has(n)){const r=Cp(n);return r&&r.default||0}else{const r=xV(e),i=(zE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return KT(e,n)}build(e,n,r){dp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return gp(e,n,r)}}class IV extends sS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ke}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ii.has(n)){const r=Cp(n);return r&&r.default||0}return n=KE.has(n)?n:op(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return XE(e,n,r)}build(e,n,r){fp(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){GE(e,n,r,i)}mount(e){this.isSVGTag=mp(e.tagName),super.mount(e)}}const PV=(t,e)=>lp(t)?new IV(e):new AV(e,{allowProjection:t!==k.Fragment}),CV=ZC({...Yk,...yV,...oV,...vV},PV),Mu=pC(CV);function RV({onToggle:t}){const[e,n]=k.useState(()=>document.documentElement.dataset.theme||localStorage.getItem("italy_theme")||"dark");return k.useEffect(()=>{document.documentElement.dataset.theme=e,localStorage.setItem("italy_theme",e)},[e]),g.jsxs("button",{className:"theme-toggle",onClick:()=>{const r=e==="dark"?"light":"dark";n(r),t==null||t(r)},"aria-label":"Toggle light/dark theme",title:"Toggle theme",children:[g.jsx("span",{className:"theme-dot","aria-hidden":"true"}),g.jsx("span",{className:"theme-label",children:e==="dark"?"Dark":"Light"})]})}const cn=[{id:1,slug:"rome",city:"Rome",region:"Lazio",badge:"Ancient Steps",fact:"Rome is a living timeline where ancient engineering, Renaissance ambition, and modern city life meet in one place. A standout example is the Colosseum, opened in 80 CE, where tens of thousands once gathered for massive public events and where Roman design still shapes stadium architecture today.",video:{type:"youtube",id:"WgP7b1Gz2Qk",title:"Rome in 2 minutes (quick vibe)"},game:{type:"quiz"},ethics:"Respect shared spaces: in historic places, small choices (trash, noise, touching) protect everyones experience."},{id:2,slug:"florence",city:"Florence",region:"Tuscany",badge:"Art Spotter",fact:"Florence is known for art, architecture, and workshopscraft traditions that still inspire makers today.",video:{type:"youtube",id:"Jp7fJwqQwWc",title:"Florence highlights (short)"},game:{type:"wordScramble",word:"FLORENCE"},ethics:"Give credit to creators: celebrate artists and makers by acknowledging their work and effort."},{id:3,slug:"venice",city:"Venice",region:"Veneto",badge:"Canal Navigator",fact:"Venice is built on water, with canals instead of roads in many areasnavigation is a daily art.",video:{type:"youtube",id:"xjV2n7k2p4U",title:"Venice in under 3 minutes"},game:{type:"pathTap"},ethics:"Move with awareness: crowded places work better when everyone takes turns and stays considerate."},{id:4,slug:"milan",city:"Milan",region:"Lombardy",badge:"Style Sense",fact:"Milan blends design, fashion, and innovationmany ideas start as sketches before they become real.",video:{type:"youtube",id:"w8Z2b9i9lE0",title:"Milan quick tour"},game:{type:"patternMemory"},ethics:"Respect differences: great teams make space for different styles, preferences, and strengths."},{id:5,slug:"naples",city:"Naples",region:"Campania",badge:"Pizza Origins",fact:"Naples is famous for classic Neapolitan pizzasimple ingredients, big flavor, and lots of tradition.",video:{type:"youtube",id:"7g1a0b3wXo8",title:"Neapolitan pizza basics (short)"},game:{type:"dragBuild"},ethics:"Share fairly: when resources are limited, taking turns and sharing keeps things fun for everyone."},{id:6,slug:"bologna",city:"Bologna",region:"Emilia-Romagna",badge:"Food Mapper",fact:"Bologna is known for rich food traditions and long portico walkwaysgreat for gathering and community.",video:{type:"youtube",id:"qC8b8n3dM6g",title:"Bologna food + city (short)"},game:{type:"ingredientMatch"},ethics:"Be inclusive: invite others ingood communities notice whos left out and make room."},{id:7,slug:"pisa",city:"Pisa",region:"Tuscany",badge:"Balance Master",fact:"The Leaning Tower of Pisa is famous worldwidean engineering story that became an icon.",video:{type:"youtube",id:"mW8oYjv7t9Q",title:"Pisa in 2 minutes"},game:{type:"tiltBalance"},ethics:"Do things safely: fun stunts are best when everyone stays aware of boundaries and safety."},{id:8,slug:"verona",city:"Verona",region:"Veneto",badge:"Language Light",fact:"Italian phrases can be simple and friendlysmall greetings go a long way in respectful culture.",video:{type:"youtube",id:"P6m6tB3cH5A",title:"Basic Italian greetings (short)"},game:{type:"phraseOrder"},ethics:"Speak with care: words can build trustchoose respectful language, especially under pressure."},{id:9,slug:"palermo",city:"Palermo",region:"Sicily",badge:"Market Rhythm",fact:"Sicily has lively markets and bold flavorsmusic and rhythm show up in daily life and celebrations.",video:{type:"youtube",id:"qX9fC2D2a1M",title:"Sicily vibes (short)"},game:{type:"rhythmTap"},ethics:"Cheer each other on: competition can still be kindsupport others while you play to win."},{id:10,slug:"amalfi",city:"Amalfi Coast",region:"Campania",badge:"Coastal Explorer",fact:"The Amalfi Coast is known for dramatic seaside towns and warm colorsclassic postcard Italy.",video:{type:"youtube",id:"5uY9xjz7c2w",title:"Amalfi Coast in under 3 min"},game:{type:"finalCode"},ethics:"Finish with integrity: winning feels best when you play fair and respect the rules."}];function kV(t){return cn.find(e=>e.id===Number(t))}function NV({state:t,setState:e,onToast:n}){const r=ri(),i=Object.keys(t.solved||{}).length,s=cn.length,o=Math.round(i/s*100);return g.jsx("header",{className:"topbar",children:g.jsxs("div",{className:"topbar-inner",children:[g.jsxs(lt,{to:"/",className:"brand",children:[g.jsx("span",{className:"brand-mark","aria-hidden":"true",children:"IT"}),g.jsxs("div",{className:"brand-text",children:[g.jsx("div",{className:"brand-title",children:"Italy QR Quest"}),g.jsx("div",{className:"brand-sub",children:"Scan  Play  Learn  Respect"})]})]}),g.jsxs("div",{className:"topbar-actions",children:[g.jsxs("div",{className:"progress-pill",title:"Your progress",children:[g.jsxs("div",{className:"progress-pill-top",children:[g.jsxs("span",{className:"mono",children:[i,"/",s]}),g.jsx("span",{className:"muted",children:"found"})]}),g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-bar-fill",style:{width:`${o}%`}})})]}),g.jsx(RV,{onToggle:a=>{e(u=>{const c={...u,theme:a};return localStorage.setItem("italy_theme",a),document.documentElement.dataset.theme=a,c}),r.pathname!=="/"&&(n==null||n("Theme updated.","ok"))}}),g.jsx(lt,{to:"/leaderboard",className:"ghost-btn",children:"Leaderboard"})]})]})})}function VV({state:t}){const e=t.solved||{};return g.jsxs("section",{className:"card",children:[g.jsxs("div",{className:"card-head",children:[g.jsx("h2",{className:"card-title",children:"Your 110 Hunt Map"}),g.jsx("p",{className:"card-sub",children:"Scan a QR code to unlock the location page. Each location has one quick minigame."})]}),g.jsx("div",{className:"grid10",role:"list","aria-label":"Locations 1 through 10",children:cn.map(n=>{const r=!!e[n.id];return g.jsxs(lt,{role:"listitem",to:`/loc/${n.id}`,className:`tile ${r?"done":""}`,"aria-label":`Location ${n.id}: ${n.city}. ${r?"Completed.":"Not completed."}`,children:[g.jsx("div",{className:"tile-num",children:n.id}),g.jsxs("div",{className:"tile-body",children:[g.jsx("div",{className:"tile-city",children:n.city}),g.jsx("div",{className:"tile-region",children:n.region})]}),g.jsx("div",{className:"tile-status",children:r?g.jsx("span",{className:"chip ok",children:"Found"}):g.jsx("span",{className:"chip",children:"Not found"})})]},n.id)})})]})}function Gt({title:t,sub:e,children:n,right:r}){return g.jsxs("section",{className:"card",children:[g.jsxs("div",{className:"card-head",children:[g.jsxs("div",{children:[t&&g.jsx("h2",{className:"card-title",children:t}),e&&g.jsx("p",{className:"card-sub",children:e})]}),r?g.jsx("div",{className:"card-right",children:r}):null]}),g.jsx("div",{className:"card-body",children:n})]})}const DV=["Admin","Clinical","Day Services","Residential","Vanway","LARE"];function bV({state:t,setState:e,onToast:n}){const r=Object.keys(t.solved||{}).length,i=cn.length,s=r===i,o=k.useMemo(()=>{var u,c,h,f;return((c=(u=t.profile)==null?void 0:u.firstName)==null?void 0:c.trim())&&((f=(h=t.profile)==null?void 0:h.department)==null?void 0:f.trim())},[t.profile]);function a(u,c){e(h=>({...h,profile:{...h.profile,[u]:c}}))}return g.jsxs("div",{className:"stack",children:[g.jsx("section",{className:"hero",children:g.jsxs(Mu.div,{className:"hero-card",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35,ease:[.2,.8,.2,1]},children:[g.jsx("div",{className:"hero-kicker",children:"Mobile scavenger hunt  10 QR codes  Italy Edition"}),g.jsx("h1",{className:"hero-title",children:"Scan. Solve. Explore."}),g.jsxs("p",{className:"hero-lede",children:["Find all 10 Italy locations around the venue. Each QR unlocks a quick minigame plus a fun fact. Complete all 10 to unlock the ",g.jsx("span",{className:"accent",children:"Italy Explorer"})," achievement."]}),g.jsxs("div",{className:"hero-row",children:[g.jsxs("div",{className:"hero-mini",children:[g.jsx("div",{className:"mini-label",children:"Your department"}),g.jsxs("select",{className:"input",value:t.profile.department||"",onChange:u=>a("department",u.target.value),"aria-label":"Select your department",children:[g.jsx("option",{value:"",disabled:!0,children:"Select"}),DV.map(u=>g.jsx("option",{value:u,children:u},u))]})]}),g.jsxs("div",{className:"hero-mini",children:[g.jsx("div",{className:"mini-label",children:"First name"}),g.jsx("input",{className:"input",value:t.profile.firstName||"",onChange:u=>a("firstName",u.target.value.replace(/[^a-zA-Z\-\s]/g,"")),placeholder:"e.g., Jess",maxLength:18,"aria-label":"Enter your first name"})]})]}),g.jsxs("div",{className:"hero-actions",children:[g.jsx(lt,{to:"/leaderboard",className:"btn",onClick:()=>{o||n==null||n("Add your name + department for the leaderboard.","warn")},children:"View Leaderboard"}),s?g.jsx(lt,{to:"/certificate",className:"btn alt",children:"View Certificate"}):g.jsx("button",{className:"btn alt",onClick:()=>n==null?void 0:n("Scan a QR code to begin  or tap any location tile after your first scan.","ok"),children:"How to Start"}),g.jsxs("div",{className:"hero-progress",children:[g.jsxs("span",{className:"mono",children:[r,"/",i]})," completed"]})]}),g.jsxs("div",{className:"ethics-banner",role:"note","aria-label":"Ethics and respect note",children:[g.jsx("strong",{children:"Ethics & Respect:"})," Compete hard, stay kind. Take turns, encourage others, and keep shared spaces clean."]})]})}),g.jsx(VV,{state:t}),g.jsxs(Gt,{title:"How QR codes work",sub:"Each QR points to a location URL like /loc/3. When you finish the minigame once, it stays unlocked (replay content anytime) but wont score again.",children:[g.jsxs("ul",{className:"bullets",children:[g.jsx("li",{children:"Scan a QR code with iPhone Camera or Android camera."}),g.jsx("li",{children:"Complete the minigame to mark that location as Found."}),g.jsx("li",{children:"Complete all 10 to unlock Italy Explorer + submit to leaderboard."})]}),g.jsxs("div",{className:"row",children:[g.jsx(lt,{to:"/admin/links",className:"ghost-btn",children:"Admin: Location Links"}),g.jsx(lt,{to:"/leaderboard",className:"ghost-btn",children:"Leaderboard"})]})]})]})}function ih(t,e,n){return Math.max(e,Math.min(n,t))}function LV({base:t=100,seconds:e=60,mistakes:n=0}){const r=ih(Math.round((60-e)*.7),0,40),i=ih(n*12,0,80);return ih(t+r-i,30,140)}function pe(){return Date.now()}function MV({videoId:t,title:e}){return g.jsx("div",{className:"video",children:g.jsx("iframe",{src:`https://www.youtube.com/embed/${t}?rel=0&modestbranding=1`,title:e||"YouTube video",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})})}function OV({locked:t,onSolved:e}){const n=[{title:"Foundation Ring",fact:"Roman builders started with a massive elliptical foundation to distribute weight evenly.",correct:"Travertine stone foundation",options:["Travertine stone foundation","Wooden scaffolding","Clay roof tiles"],visual:"Base"},{title:"Outer Arches",fact:"The exterior arcades used repeating arches to create strength and fast crowd flow.",correct:"Three tiers of arches",options:["Three tiers of arches","Glass curtain wall","Single solid wall"],visual:"Arches"},{title:"Seating Tiers",fact:"Seating was organized in levels, showing Roman engineering and social structure.",correct:"Tiered stone seating",options:["Tiered stone seating","Floating platforms","Underground benches"],visual:"Seating"},{title:"Arena Systems",fact:"Below the arena, rooms and passages supported events with lifts and moving scenery.",correct:"Underground chambers",options:["Underground chambers","Waterfall tunnels","Bronze mirrors"],visual:"Arena"},{title:"Shade and Spectacle",fact:"A retractable canopy called the velarium helped shield spectators from sun.",correct:"Velarium canopy",options:["Velarium canopy","Marble dome","Iron skylight"],visual:"Canopy"}],[r,i]=k.useState(0),[s,o]=k.useState(0),[a,u]=k.useState(""),c=k.useRef(pe()),h=k.useRef(!1),f=Math.min(r,n.length),p=r<n.length?n[r]:null;k.useEffect(()=>{if(!(t||h.current)&&r>=n.length){h.current=!0;const S=Math.round((pe()-c.current)/1e3);e({seconds:S,mistakes:s})}},[r,t,s]);function v(S){t||!p||(S===p.correct?(u("Correct piece added."),i(C=>C+1)):(o(C=>C+1),u("Not quite. Try another piece.")))}function T(){t||(c.current=pe(),h.current=!1,i(0),o(0),u(""))}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Build the Colosseum"}),g.jsx("p",{className:"game-q",children:"Complete 5 construction stages. Pick the correct element each round to finish the Rome challenge."}),g.jsxs("div",{className:"hint muted",children:["Stage ",Math.min(r+1,n.length),"/",n.length," | Built: ",f,"/5 | Misses: ",s]}),g.jsx("div",{className:"colosseum-stack","aria-label":"Colosseum build progress",children:n.map((S,C)=>g.jsxs("div",{className:`colosseum-layer ${C<f?"done":""}`,children:[g.jsx("span",{className:"mono",children:C<f?"[X]":"[ ]"}),g.jsx("span",{children:S.visual})]},S.title))}),p?g.jsxs("div",{className:"colosseum-panel",children:[g.jsx("div",{className:"colosseum-stage",children:p.title}),g.jsx("p",{className:"game-q",children:p.fact}),g.jsx("div",{className:"choice-grid",children:p.options.map(S=>g.jsx("button",{className:"opt",onClick:()=>v(S),disabled:t,children:S},S))})]}):g.jsx("div",{className:"hint muted",children:"Colosseum complete. Rome unlocked."}),!!a&&!t&&g.jsx("div",{className:"hint muted",children:a}),!t&&g.jsx("button",{className:"ghost-btn",onClick:T,children:"Restart Build"})]})}function jV({word:t,locked:e,onSolved:n}){const r=[{title:"Stone Street Base",prompt:"Pick the surface that defines old Tuscan lanes.",fact:"Historic centers were built around durable stone paving and stepped streets.",correct:"Cobblestone terrace",options:["Cobblestone terrace","Plastic deck","Asphalt parking lot"]},{title:"Masonry Homes",prompt:"Choose the wall system common in 17th-century Italian hill towns.",fact:"Thick masonry walls kept homes cool in summer and stable over centuries.",correct:"Stone-and-plaster walls",options:["Stone-and-plaster walls","Mirror glass facade","Steel warehouse shell"]},{title:"Terracotta Roofline",prompt:"Select the roof material that gives villages their warm silhouette.",fact:"Terracotta tiles became a hallmark of central Italian architecture.",correct:"Terracotta tile roofs",options:["Terracotta tile roofs","Transparent acrylic roof","Flat aluminum canopy"]},{title:"Street Character",prompt:"Pick details that make the facade feel authentically Italian.",fact:"Shutters, arched openings, and small balconies define many historic streets.",correct:"Shutters and arched loggia",options:["Shutters and arched loggia","Neon sign wall","LED billboard strip"]},{title:"Village Landmark",prompt:"Choose the final element often seen above old town roofs.",fact:"A campanile (bell tower) and greenery complete the classic skyline.",correct:"Campanile tower and cypress",options:["Campanile tower and cypress","Satellite dish array","Airport radar mast"]}],[i,s]=k.useState(0),[o,a]=k.useState(0),[u,c]=k.useState(""),[h,f]=k.useState(!1),p=k.useRef(pe()),v=k.useRef(!1),T=e?r.length:i,S=r[Math.min(i,r.length-1)];k.useEffect(()=>{if(!(e||v.current)&&i>=r.length){v.current=!0;const _=Math.round((pe()-p.current)/1e3);n({seconds:_,mistakes:o})}},[i,o,e]);function C(_){if(!(e||h||i>=r.length)){if(_!==S.correct){a(x=>x+1),c("Not this one. Re-check the architectural clue.");return}if(i===r.length-1){c("Village complete."),s(x=>x+1);return}c("Correct. Historic layer added."),f(!0),setTimeout(()=>{s(x=>x+1),f(!1),c("")},420)}}function w(){e||(p.current=pe(),v.current=!1,s(0),a(0),c(""),f(!1))}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Build A Tuscan Village"}),g.jsx("p",{className:"game-q",children:"Create a 17th-century Italian streetscape in 5 stages. Choose the correct element each round."}),g.jsxs("div",{className:"hint muted",children:["Stage ",Math.min(i+1,r.length),"/",r.length," | Built: ",T,"/5 | Misses: ",o]}),g.jsxs("div",{className:"duomo-card","aria-label":"Tuscan village construction visual",children:[g.jsxs("svg",{className:"duomo-svg",viewBox:"0 0 360 240",role:"img","aria-label":"Tuscan village build progress",children:[g.jsxs("defs",{children:[g.jsxs("linearGradient",{id:"villaSky",x1:"0",y1:"0",x2:"0",y2:"1",children:[g.jsx("stop",{offset:"0%",stopColor:"#7999bf"}),g.jsx("stop",{offset:"58%",stopColor:"#d7e6ef"}),g.jsx("stop",{offset:"100%",stopColor:"#f5d7ad"})]}),g.jsxs("linearGradient",{id:"villaWall",x1:"0",y1:"0",x2:"1",y2:"1",children:[g.jsx("stop",{offset:"0%",stopColor:"#efd9bc"}),g.jsx("stop",{offset:"100%",stopColor:"#caa27c"})]}),g.jsxs("linearGradient",{id:"villaRoof",x1:"0",y1:"0",x2:"1",y2:"1",children:[g.jsx("stop",{offset:"0%",stopColor:"#c66a45"}),g.jsx("stop",{offset:"100%",stopColor:"#8e452f"})]})]}),g.jsx("rect",{x:"0",y:"0",width:"360",height:"240",fill:"url(#villaSky)"}),g.jsx("path",{d:"M0 108 L42 86 L94 104 L138 80 L188 101 L244 74 L300 102 L360 82 L360 136 L0 136 Z",fill:"rgba(70,82,93,0.22)"}),g.jsx("circle",{cx:"290",cy:"44",r:"18",fill:"rgba(255,245,214,0.72)"}),g.jsx("path",{d:"M0 188 C62 170, 124 173, 194 188 C242 198, 298 194, 360 178 L360 240 L0 240 Z",fill:"#c8a07a"}),g.jsx("ellipse",{cx:"176",cy:"206",rx:"140",ry:"16",fill:"rgba(74,47,31,0.24)"}),g.jsx("path",{className:`duomo-piece foundation ${T>=1?"on":""}`,d:"M34 196 L332 196 L316 222 L18 222 Z"}),g.jsx("path",{className:`duomo-piece foundation ${T>=1?"on":""}`,d:"M24 190 L334 190 L326 196 L32 196 Z"}),g.jsx("rect",{className:`duomo-piece house ${T>=2?"on":""}`,x:"56",y:"128",width:"72",height:"62",rx:"2"}),g.jsx("rect",{className:`duomo-piece house ${T>=2?"on":""}`,x:"128",y:"118",width:"96",height:"72",rx:"2"}),g.jsx("rect",{className:`duomo-piece house ${T>=2?"on":""}`,x:"224",y:"132",width:"70",height:"58",rx:"2"}),g.jsx("path",{className:`duomo-piece roof ${T>=3?"on":""}`,d:"M52 128 L92 102 L132 128 Z"}),g.jsx("path",{className:`duomo-piece roof ${T>=3?"on":""}`,d:"M122 118 L176 86 L230 118 Z"}),g.jsx("path",{className:`duomo-piece roof ${T>=3?"on":""}`,d:"M220 132 L258 108 L296 132 Z"}),g.jsx("rect",{className:`duomo-piece chimney ${T>=3?"on":""}`,x:"196",y:"92",width:"10",height:"20",rx:"2"}),g.jsx("rect",{className:`duomo-piece shutter ${T>=4?"on":""}`,x:"72",y:"148",width:"10",height:"24",rx:"1"}),g.jsx("rect",{className:`duomo-piece shutter ${T>=4?"on":""}`,x:"100",y:"148",width:"10",height:"24",rx:"1"}),g.jsx("rect",{className:`duomo-piece shutter ${T>=4?"on":""}`,x:"146",y:"140",width:"12",height:"28",rx:"1"}),g.jsx("rect",{className:`duomo-piece shutter ${T>=4?"on":""}`,x:"194",y:"140",width:"12",height:"28",rx:"1"}),g.jsx("path",{className:`duomo-piece loggia ${T>=4?"on":""}`,d:"M154 190 L154 166 Q164 150 174 166 L174 190 Z"}),g.jsx("path",{className:`duomo-piece loggia ${T>=4?"on":""}`,d:"M178 190 L178 166 Q188 150 198 166 L198 190 Z"}),g.jsx("rect",{className:`duomo-piece tower ${T>=5?"on":""}`,x:"304",y:"92",width:"22",height:"98",rx:"2"}),g.jsx("rect",{className:`duomo-piece tower ${T>=5?"on":""}`,x:"308",y:"82",width:"14",height:"12",rx:"1"}),g.jsx("circle",{className:`duomo-piece tower ${T>=5?"on":""}`,cx:"315",cy:"104",r:"3"}),g.jsx("path",{className:`duomo-piece cypress ${T>=5?"on":""}`,d:"M38 190 C42 160, 42 136, 50 116 C58 136, 58 160, 62 190 Z"}),g.jsx("path",{className:`duomo-piece cypress ${T>=5?"on":""}`,d:"M288 190 C292 166, 292 146, 300 126 C308 146, 308 166, 312 190 Z"})]}),g.jsxs("div",{className:"duomo-overlay",children:[g.jsx("div",{className:"duomo-stage-title",children:i<r.length?S.title:"Village Completed"}),g.jsx("div",{className:"duomo-stage-fact",children:S.fact})]})]}),i<r.length?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"game-q",children:S.prompt}),g.jsx("div",{className:"duomo-options",children:S.options.map(_=>g.jsx("button",{className:"duomo-opt",onClick:()=>C(_),disabled:e||h,children:_},_))})]}):g.jsx("div",{className:"hint muted",children:"Florence complete. Location unlocked."}),!!u&&!e&&g.jsx("div",{className:`hint ${u.startsWith("Not")?"warn":"muted"}`,children:u}),!e&&g.jsx("button",{className:"ghost-btn",onClick:w,children:"Restart Build"}),g.jsxs("div",{className:"hint muted",children:["Reference token: ",t]})]})}function FV({locked:t,onSolved:e}){const n=[0,1,4,7,8],[r,i]=k.useState([]),[s,o]=k.useState(0),a=k.useRef(pe());function u(c){if(t)return;const h=r.length;if(c===n[h]){const f=[...r,c];if(i(f),f.length===n.length){const p=Math.round((pe()-a.current)/1e3);e({seconds:p,mistakes:s})}}else o(f=>f+1),i([])}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Canal Navigation"}),g.jsx("p",{className:"game-q",children:"Tap the tiles to guide your boat from start  finish. Wrong tile resets."}),g.jsx("div",{className:"grid3",children:Array.from({length:9}).map((c,h)=>{const f=r.includes(h),p=h===n[0],v=h===n[n.length-1];return g.jsx("button",{className:`gridcell ${f?"on":""} ${p?"start":""} ${v?"end":""}`,onClick:()=>u(h),disabled:t,"aria-label":`Tile ${h+1}`,children:p?"S":v?"F":""},h)})}),g.jsxs("div",{className:"hint muted",children:["Progress: ",r.length,"/",n.length]}),!t&&s>0&&g.jsxs("div",{className:"hint warn",children:["Resets: ",s]}),g.jsx("button",{className:"btn",disabled:t,onClick:()=>i([]),children:"Reset"})]})}function UV({locked:t,onSolved:e}){const n=["A","B","C","D"],[r]=k.useState(()=>Array.from({length:4}).map(()=>Math.floor(Math.random()*4))),[i,s]=k.useState(!0),[o,a]=k.useState(0),[u,c]=k.useState(-1),[h,f]=k.useState(0),p=k.useRef(pe());k.useEffect(()=>{let T=!1;async function S(){for(let C=0;C<r.length;C++){if(T)return;c(r[C]),await new Promise(w=>setTimeout(w,360)),c(-1),await new Promise(w=>setTimeout(w,140))}s(!1)}return S(),()=>{T=!0}},[]);function v(T){if(!(t||i))if(T===r[o]){const S=o+1;if(a(S),S===r.length){const C=Math.round((pe()-p.current)/1e3);e({seconds:C,mistakes:h})}}else f(S=>S+1),a(0)}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Design Memory"}),g.jsx("p",{className:"game-q",children:"Watch the flashes, then repeat the pattern. Wrong press resets."}),g.jsx("div",{className:"grid2",children:n.map((T,S)=>g.jsx("button",{className:`mem ${u===S?"flash":""}`,onClick:()=>v(S),disabled:t||i,children:T},T))}),g.jsx("div",{className:"hint muted",children:t?"Completed":i?"Watching":`Your turn: ${o}/4`}),!t&&h>0&&g.jsxs("div",{className:"hint warn",children:["Resets: ",h]})]})}function BV({locked:t,onSolved:e}){const n=["Dough","Tomato","Mozzarella","Basil"],[r,i]=k.useState(()=>h(n)),[s,o]=k.useState([]),[a,u]=k.useState(0),c=k.useRef(pe());function h(v){const T=[...v];for(let S=T.length-1;S>0;S--){const C=Math.floor(Math.random()*(S+1));[T[S],T[C]]=[T[C],T[S]]}return T}function f(v){if(t)return;const T=n[s.length];if(v===T){if(o(S=>[...S,v]),i(S=>S.filter(C=>C!==v)),s.length+1===n.length){const S=Math.round((pe()-c.current)/1e3);e({seconds:S,mistakes:a})}}else u(S=>S+1)}function p(){t||(i(h(n)),o([]),u(0))}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Build the Classic"}),g.jsx("p",{className:"game-q",children:"Tap the ingredients in the right order."}),g.jsxs("div",{className:"dragzone",children:[g.jsx("div",{className:"stackline",children:n.map((v,T)=>g.jsx("div",{className:`slot ${s[T]?"filled":""}`,children:s[T]?s[T]:T===s.length?"Next":""},v))}),g.jsx("div",{className:"ingredients",children:r.map(v=>g.jsx("button",{className:"chipbtn",disabled:t,onClick:()=>f(v),children:v},v))})]}),g.jsxs("div",{className:"row",children:[g.jsx("button",{className:"ghost-btn",onClick:p,disabled:t,children:"Reset"}),!t&&a>0&&g.jsxs("div",{className:"hint warn",children:["Mistakes: ",a]})]})]})}function $V({locked:t,onSolved:e}){const n=[["Pesto","Basil"],["Risotto","Rice"],["Gelato","Frozen dessert"],["Espresso","Coffee shot"]],r=n.map(w=>w[0]),i=n.map(w=>w[1]),[s]=k.useState(()=>C(r)),[o]=k.useState(()=>C(i)),[a,u]=k.useState(null),[c,h]=k.useState(null),[f,p]=k.useState([]),[v,T]=k.useState(0),S=k.useRef(pe());function C(w){const _=[...w];for(let x=_.length-1;x>0;x--){const V=Math.floor(Math.random()*(x+1));[_[x],_[V]]=[_[V],_[x]]}return _}return k.useEffect(()=>{a&&c&&(n.some(([_,x])=>_===a&&x===c)?(p(_=>[..._,a]),u(null),h(null)):(T(_=>_+1),setTimeout(()=>{u(null),h(null)},450)))},[a,c]),k.useEffect(()=>{if(f.length===n.length&&!t){const w=Math.round((pe()-S.current)/1e3);e({seconds:w,mistakes:v})}},[f,t]),g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Food Match"}),g.jsx("p",{className:"game-q",children:"Match each item with its description."}),g.jsxs("div",{className:"match",children:[g.jsx("div",{className:"match-col",children:s.map(w=>{const _=f.includes(w);return g.jsx("button",{className:`matchbtn ${a===w?"active":""}`,disabled:t||_,onClick:()=>u(w),children:w},w)})}),g.jsx("div",{className:"match-col",children:o.map(w=>g.jsx("button",{className:`matchbtn ${c===w?"active":""}`,disabled:t,onClick:()=>h(w),children:w},w))})]}),!t&&v>0&&g.jsxs("div",{className:"hint warn",children:["Misses: ",v]})]})}function zV({locked:t,onSolved:e}){const[n,r]=k.useState(()=>Array(9).fill(null)),[i,s]=k.useState("player"),[o,a]=k.useState(""),[u,c]=k.useState([]),[h,f]=k.useState(0),[p,v]=k.useState(0),[T,S]=k.useState(0),C=k.useRef(pe()),w=k.useRef(!1);function _(y){const A=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const P of A){const[N,D,R]=P;if(y[N]&&y[N]===y[D]&&y[N]===y[R])return{winner:y[N],line:P}}return null}function x(y){var N,D;const A=y.map((R,ve)=>R?-1:ve).filter(R=>R>=0);if(!A.length)return-1;for(const R of A){const ve=[...y];if(ve[R]="B",((N=_(ve))==null?void 0:N.winner)==="B")return R}for(const R of A){const ve=[...y];if(ve[R]="P",((D=_(ve))==null?void 0:D.winner)==="P")return R}if(A.includes(4))return 4;const P=A.filter(R=>[0,2,6,8].includes(R));return P.length?P[Math.floor(Math.random()*P.length)]:A[Math.floor(Math.random()*A.length)]}function V(y,A=[]){a(y),c(A),s("player"),y==="player"?f(P=>P+1):y==="bot"?v(P=>P+1):S(P=>P+1)}function L(y){if(t||i!=="player"||o||n[y])return;const A=[...n];A[y]="P",r(A),s("bot")}k.useEffect(()=>{if(t||o)return;const y=_(n);if(y){V(y.winner==="P"?"player":"bot",y.line);return}if(n.every(Boolean)){V("draw");return}if(i==="bot"){const A=setTimeout(()=>{r(P=>{const N=x(P);if(N<0)return P;const D=[...P];return D[N]="B",D}),s("player")},360);return()=>clearTimeout(A)}},[n,i,t,o]),k.useEffect(()=>{t||w.current||h>=3&&(w.current=!0,e({seconds:Math.round((pe()-C.current)/1e3),mistakes:p}))},[h,p,t]);function O(){t||h>=3||(r(Array(9).fill(null)),a(""),c([]),s("player"))}function I(y){return y==="P"?"Tower block":y==="B"?"Bot X":"Empty"}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Build the Pisa Tower"}),g.jsx("p",{className:"game-q",children:"Beat the bot in Tic-Tac-Toe. Win 3 rounds to complete Pisa and unlock this location."}),g.jsxs("div",{className:"ttt-meta",children:[g.jsxs("div",{className:"hint muted",children:["Tower built: ",Math.min(h,3),"/3"]}),g.jsxs("div",{className:"hint muted",children:["Bot wins: ",p," | Draws: ",T]})]}),g.jsx("div",{className:"ttt-grid",role:"grid","aria-label":"Tic-Tac-Toe board",children:n.map((y,A)=>{const P=o==="bot"&&u.includes(A);return g.jsxs("button",{role:"gridcell",className:`ttt-cell ${P?"bot-win":""}`,onClick:()=>L(A),disabled:t||!!o||i!=="player"||!!y||h>=3,"aria-label":`Cell ${A+1}: ${I(y)}`,children:[y==="P"&&g.jsx("span",{className:"ttt-mark ttt-player",children:"[]"}),y==="B"&&g.jsx("span",{className:"ttt-mark ttt-bot",children:"X"})]},A)})}),g.jsx("div",{className:"hint muted",children:t||h>=3?"Tower complete. Location unlocked.":o?o==="player"?"Round win. Start the next layer of the tower.":o==="bot"?"Bot took this round. Blacked-out red X marks its line.":"Draw round. Try again.":i==="player"?"Your move.":"Bot is thinking..."}),!t&&!!o&&h<3&&g.jsx("button",{className:"btn",onClick:O,children:"Next Round"})]})}function WV({locked:t,onSolved:e}){const n=["Buongiorno","!","Come","stai","?"],[r,i]=k.useState(()=>h(n)),[s,o]=k.useState([]),[a,u]=k.useState(0),c=k.useRef(pe());function h(v){const T=[...v];for(let S=T.length-1;S>0;S--){const C=Math.floor(Math.random()*(S+1));[T[S],T[C]]=[T[C],T[S]]}return T}function f(v){if(t)return;const T=n[s.length];if(v===T){if(o(S=>[...S,v]),i(S=>S.filter(C=>C!==v)),s.length+1===n.length){const S=Math.round((pe()-c.current)/1e3);e({seconds:S,mistakes:a})}}else u(S=>S+1)}function p(){t||(i(h(n)),o([]),u(0))}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Italian Phrase Builder"}),g.jsx("p",{className:"game-q",children:"Tap tokens to build the phrase in the correct order."}),g.jsx("div",{className:"phraseBuilt mono",children:s.join(" ")||""}),g.jsx("div",{className:"tokens",children:r.map(v=>g.jsx("button",{className:"chipbtn",disabled:t,onClick:()=>f(v),children:v},v))}),g.jsxs("div",{className:"row",children:[g.jsx("button",{className:"ghost-btn",disabled:t,onClick:p,children:"Reset"}),!t&&a>0&&g.jsxs("div",{className:"hint warn",children:["Mistakes: ",a]})]}),g.jsx("div",{className:"hint muted",children:"Meaning: Good morning! How are you?"})]})}function HV({locked:t,onSolved:e}){const[r,i]=k.useState(0),[s,o]=k.useState(0),[a,u]=k.useState(0),c=k.useRef(pe()),h=k.useRef(pe());k.useEffect(()=>{if(t)return;const p=setInterval(()=>{i(v=>v+1)},600);return()=>clearInterval(p)},[t]);function f(){if(t)return;const p=pe(),v=Math.abs((p-h.current)%600),S=Math.min(v,600-v)<=120;if(S?o(C=>C+1):u(C=>C+1),S&&s+1>=8){const C=Math.round((pe()-c.current)/1e3);e({seconds:C,mistakes:a})}}return k.useEffect(()=>{h.current=pe()},[r]),g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Market Rhythm"}),g.jsx("p",{className:"game-q",children:"Tap on the beat. Score 8 good taps to win."}),g.jsxs("div",{className:"rhythm",children:[g.jsx("div",{className:`pulse ${r%2===0?"on":""}`,"aria-hidden":"true"}),g.jsx("button",{className:"btn big",onClick:f,disabled:t,children:t?"Completed":"TAP"}),g.jsxs("div",{className:"hint muted",children:["Good taps: ",s,"/8"]}),!t&&a>0&&g.jsxs("div",{className:"hint warn",children:["Offbeat: ",a]})]})]})}function qV({locked:t,onSolved:e,totalSolved:n}){const[r,i]=k.useState(""),[s,o]=k.useState(0),a=k.useRef(pe());function u(){if(t)return;if(n<9){o(f=>f+1);return}const c=r.toLowerCase().replace(/&/g," and ").replace(/[^a-z\s]/g," ").replace(/\s+/g," ").trim();if(new Set(["ethics and respect","ethics respect","respect and ethics","respect ethics"]).has(c)){const f=Math.round((pe()-a.current)/1e3);e({seconds:f,mistakes:s})}else o(f=>f+1)}return g.jsxs("div",{className:"game",children:[g.jsx("div",{className:"game-title",children:"Final Checkpoint"}),g.jsxs("p",{className:"game-q",children:['Riddle: "Two words guide this quest: one keeps us fair, one keeps us kind."',g.jsx("br",{}),"If youve completed the other locations, enter the answer from the poster:"]}),g.jsxs("div",{className:"row",children:[g.jsx("input",{className:"input",value:r,onChange:c=>i(c.target.value),placeholder:"Enter riddle answer",disabled:t,"aria-label":"Final code input"}),g.jsx("button",{className:"btn",onClick:u,disabled:t,children:t?"Completed":"Submit"})]}),n<9&&!t&&g.jsxs("div",{className:"hint warn",children:["You need the other 9 locations first. Current: ",n,"/10"]}),!t&&s>0&&g.jsxs("div",{className:"hint warn",children:["Attempts: ",s]}),g.jsx("div",{className:"hint muted",children:"Tip: This last step keeps things fair for the live event."})]})}function KV({loc:t,locked:e,onSolved:n,totalSolved:r}){var s;const i=(s=t.game)==null?void 0:s.type;return i==="quiz"?g.jsx(OV,{locked:e,onSolved:n}):i==="wordScramble"?g.jsx(jV,{locked:e,onSolved:n,word:t.game.word}):i==="pathTap"?g.jsx(FV,{locked:e,onSolved:n}):i==="patternMemory"?g.jsx(UV,{locked:e,onSolved:n}):i==="dragBuild"?g.jsx(BV,{locked:e,onSolved:n}):i==="ingredientMatch"?g.jsx($V,{locked:e,onSolved:n}):i==="tiltBalance"?g.jsx(zV,{locked:e,onSolved:n}):i==="phraseOrder"?g.jsx(WV,{locked:e,onSolved:n}):i==="rhythmTap"?g.jsx(HV,{locked:e,onSolved:n}):i==="finalCode"?g.jsx(qV,{locked:e,onSolved:n,totalSolved:r}):g.jsx("div",{className:"hint",children:"Game missing."})}function GV({state:t,setState:e,onToast:n}){const{id:r}=CP(),i=Jf(),s=kV(r),o=t.solved||{},a=!!(o!=null&&o[Number(r)]),u=Object.keys(o).length,c=s?`${s.city}  #${s.id}`:"Unknown location",h="Completed! You can revisit this page anytime, but scoring is locked.";function f({seconds:p,mistakes:v}){if(!s)return;if(a){n==null||n("Already completed  scoring is locked.","warn");return}const T=LV({base:100,seconds:p,mistakes:v});e(S=>{const C={...S.solved||{}};C[s.id]={solvedAt:Date.now(),points:T};const w=Object.values(C).reduce((x,V)=>x+((V==null?void 0:V.points)||0),0),_=Object.keys(C).length===cn.length;return{...S,solved:C,totalPoints:w,achievementUnlocked:_}}),n==null||n(`Location #${s.id} completed (+${T} pts).`,"ok"),setTimeout(()=>{Object.keys(t.solved||{}).length+1===cn.length&&i("/certificate")},600)}return s?g.jsxs("div",{className:"stack",children:[g.jsxs("section",{className:"page-head",children:[g.jsxs("div",{className:"crumbs",children:[g.jsx(lt,{to:"/",className:"crumb",children:"Home"}),g.jsx("span",{className:"crumb-sep",children:"/"}),g.jsx("span",{className:"crumb",children:c})]}),g.jsxs("div",{className:"head-row",children:[g.jsx("h1",{className:"h1",children:s.city}),g.jsxs("div",{className:"head-badges",children:[g.jsxs("span",{className:"chip strong",children:["#",s.id]}),g.jsx("span",{className:"chip",children:s.region}),a?g.jsx("span",{className:"chip ok",children:"Found"}):g.jsx("span",{className:"chip",children:"Not found"})]})]})]}),g.jsx(Gt,{title:"Italy Fact",sub:s.fact,right:a?g.jsx("span",{className:"chip ok",children:"Unlocked"}):g.jsx("span",{className:"chip strong",children:"Play to unlock"}),children:g.jsxs("div",{className:"ethics-note",children:[g.jsx("strong",{children:"Ethics & Respect:"})," ",s.ethics]})}),g.jsx(Gt,{title:"MiniGame",sub:a?h:"Finish once to score points and mark this location as found.",children:g.jsx(KV,{loc:s,locked:a,onSolved:f,totalSolved:u})}),g.jsxs(Gt,{title:"Quick Watch",sub:"Optional: short video (under ~3 minutes).",children:[g.jsx(MV,{videoId:s.video.id,title:s.video.title}),g.jsx("div",{className:"hint muted",children:"If your venue WiFi is limited, you can replace these with offline facts only."})]}),g.jsxs("div",{className:"row spread",children:[g.jsx(lt,{to:"/",className:"ghost-btn",children:"Back"}),g.jsx(lt,{to:"/leaderboard",className:"ghost-btn",children:"Leaderboard"})]}),g.jsx(Mu.div,{className:"next-strip",initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{duration:.35},children:g.jsxs("div",{className:"next-strip-inner",children:[g.jsx("div",{className:"muted",children:"Tip:"}),g.jsx("div",{children:"Place QR codes beside props or signs to pull people across the space."})]})})]}):g.jsx("div",{className:"stack",children:g.jsx(Gt,{title:"Location not found",sub:"This QR code may be incorrect.",children:g.jsx(lt,{to:"/",className:"btn",children:"Back Home"})})})}function QV(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const XV=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function ar(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let hi=null;function oS(t={}){return hi||(t.includeStyleProperties?(hi=t.includeStyleProperties,hi):(hi=ar(window.getComputedStyle(document.documentElement)),hi))}function nu(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function YV(t){const e=nu(t,"border-left-width"),n=nu(t,"border-right-width");return t.clientWidth+e+n}function JV(t){const e=nu(t,"border-top-width"),n=nu(t,"border-bottom-width");return t.clientHeight+e+n}function aS(t,e={}){const n=e.width||YV(t),r=e.height||JV(t);return{width:n,height:r}}function ZV(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const At=16384;function eD(t){(t.width>At||t.height>At)&&(t.width>At&&t.height>At?t.width>t.height?(t.height*=At/t.width,t.width=At):(t.width*=At/t.height,t.height=At):t.width>At?(t.height*=At/t.width,t.width=At):(t.width*=At/t.height,t.height=At))}function ru(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function tD(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function nD(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),tD(i)}const St=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||St(n,e)};function rD(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function iD(t,e){return oS(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function sD(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?rD(n):iD(n,r);return document.createTextNode(`${i}{${s}}`)}function Xv(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=XV();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(sD(o,n,i,r)),e.appendChild(a)}function oD(t,e,n){Xv(t,e,":before",n),Xv(t,e,":after",n)}const Yv="application/font-woff",Jv="image/jpeg",aD={woff:Yv,woff2:Yv,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Jv,jpeg:Jv,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function lD(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Dp(t){const e=lD(t).toLowerCase();return aD[e]||""}function uD(t){return t.split(/,/)[1]}function kd(t){return t.search(/^(data:)/)!==-1}function cD(t,e){return`data:${e};base64,${t}`}async function lS(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(u){o(u)}},a.readAsDataURL(i)})}const sh={};function hD(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function bp(t,e,n){const r=hD(t,e,n.includeQueryParams);if(sh[r]!=null)return sh[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await lS(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),uD(a)));i=cD(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return sh[r]=i,i}async function dD(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ru(e)}async function fD(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return ru(a)}const n=t.poster,r=Dp(n),i=await bp(n,r,e);return ru(i)}async function pD(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Ou(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function mD(t,e){return St(t,HTMLCanvasElement)?dD(t):St(t,HTMLVideoElement)?fD(t,e):St(t,HTMLIFrameElement)?pD(t,e):t.cloneNode(uS(t))}const gD=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",uS=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function yD(t,e,n){var r,i;if(uS(e))return e;let s=[];return gD(t)&&t.assignedNodes?s=ar(t.assignedNodes()):St(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=ar(t.contentDocument.body.childNodes):s=ar(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||St(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>Ou(a,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function vD(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):oS(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),St(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function _D(t,e){St(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),St(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function wD(t,e){if(St(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function ED(t,e,n){return St(e,Element)&&(vD(t,e,n),oD(t,e,n),_D(t,e),wD(t,e)),e}async function TD(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const u=t.querySelector(a),c=document.querySelector(a);!u&&c&&!r[a]&&(r[a]=await Ou(c,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let u=0;u<i.length;u++)a.appendChild(i[u]);t.appendChild(o)}return t}async function Ou(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>mD(r,e)).then(r=>yD(t,r,e)).then(r=>ED(t,r,e)).then(r=>TD(r,e))}const cS=/url\((['"]?)([^'"]+?)\1\)/g,SD=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,xD=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function AD(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function ID(t){const e=[];return t.replace(cS,(n,r,i)=>(e.push(i),n)),e.filter(n=>!kd(n))}async function PD(t,e,n,r,i){try{const s=n?QV(e,n):e,o=Dp(e);let a;return i||(a=await bp(s,o,r)),t.replace(AD(e),`$1${a}$3`)}catch{}return t}function CD(t,{preferredFontFormat:e}){return e?t.replace(xD,n=>{for(;;){const[r,,i]=SD.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function hS(t){return t.search(cS)!==-1}async function dS(t,e,n){if(!hS(t))return t;const r=CD(t,n);return ID(r).reduce((s,o)=>s.then(a=>PD(a,o,e,n)),Promise.resolve(r))}async function di(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await dS(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function RD(t,e){await di("background",t,e)||await di("background-image",t,e),await di("mask",t,e)||await di("-webkit-mask",t,e)||await di("mask-image",t,e)||await di("-webkit-mask-image",t,e)}async function kD(t,e){const n=St(t,HTMLImageElement);if(!(n&&!kd(t.src))&&!(St(t,SVGImageElement)&&!kd(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await bp(r,Dp(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...u)=>{try{s(e.onImageErrorHandler(...u))}catch(c){o(c)}}:o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function ND(t,e){const r=ar(t.childNodes).map(i=>fS(i,e));await Promise.all(r).then(()=>t)}async function fS(t,e){St(t,Element)&&(await RD(t,e),await kD(t,e),await ND(t,e))}function VD(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const Zv={};async function e0(t){let e=Zv[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},Zv[t]=e,e}async function t0(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),lS(a,e.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function n0(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=a.exec(r),u===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(u[0])}return e}async function DD(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{ar(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const u=s.href,c=e0(u).then(h=>t0(h,e)).then(h=>n0(h).forEach(f=>{try{i.insertRule(f,f.startsWith("@import")?a+=1:i.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:f,error:p})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(c)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(e0(i.href).then(a=>t0(a,e)).then(a=>n0(a).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{ar(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function bD(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>hS(e.style.getPropertyValue("src")))}async function LD(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=ar(t.ownerDocument.styleSheets),r=await DD(n,e);return bD(r)}function pS(t){return t.trim().replace(/["']/g,"")}function MD(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(pS(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function OD(t,e){const n=await LD(t,e),r=MD(t);return(await Promise.all(n.filter(s=>r.has(pS(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return dS(s.cssText,o,e)}))).join(`
`)}async function jD(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await OD(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function FD(t,e={}){const{width:n,height:r}=aS(t,e),i=await Ou(t,e,!0);return await jD(i,e),await fS(i,e),VD(i,e),await nD(i,n,r)}async function UD(t,e={}){const{width:n,height:r}=aS(t,e),i=await FD(t,e),s=await ru(i),o=document.createElement("canvas"),a=o.getContext("2d"),u=e.pixelRatio||ZV(),c=e.canvasWidth||n,h=e.canvasHeight||r;return o.width=c*u,o.height=h*u,e.skipAutoScale||eD(o),o.style.width=`${c}`,o.style.height=`${h}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function BD(t,e={}){return(await UD(t,e)).toDataURL()}var r0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$D=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,v=c&63;u||(v=64,o||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$D(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new zD;const p=s<<2|a>>4;if(r.push(p),c!==64){const v=a<<4&240|c>>2;if(r.push(v),f!==64){const T=c<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WD=function(t){const e=mS(t);return gS.encodeByteArray(e,!0)},yS=function(t){return WD(t).replace(/\./g,"")},vS=function(t){try{return gS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=()=>HD().__FIREBASE_DEFAULTS__,KD=()=>{if(typeof process>"u"||typeof r0>"u")return;const t=r0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vS(t[1]);return e&&JSON.parse(e)},_S=()=>{try{return qD()||KD()||GD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QD=t=>{var e;return(e=_S())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function YD(){var t;const e=(t=_S())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tb(){return!YD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function rb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ib,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sa.prototype.create)}}class sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?sb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sr(i,a,r)}}function sb(t,e){return t.replace(ob,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ob=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ab(t,e){const n=new lb(t,e);return n.subscribe.bind(n)}class lb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ub(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=oh),i.error===void 0&&(i.error=oh),i.complete===void 0&&(i.complete=oh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ub(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t){return t&&t._delegate?t._delegate:t}class es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const cb={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},hb=Z.INFO,db={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},fb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=db[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lp{constructor(e){this.name=e,this._logLevel=hb,this._logHandler=fb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const pb=(t,e)=>e.some(n=>t instanceof n);let i0,s0;function mb(){return i0||(i0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gb(){return s0||(s0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ES=new WeakMap,Nd=new WeakMap,TS=new WeakMap,ah=new WeakMap,Mp=new WeakMap;function yb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(lr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ES.set(n,t)}).catch(()=>{}),Mp.set(e,t),e}function vb(t){if(Nd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Nd.set(t,e)}let Vd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _b(t){Vd=t(Vd)}function wb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lh(this),e,...n);return TS.set(r,e.sort?e.sort():[e]),lr(r)}:gb().includes(t)?function(...e){return t.apply(lh(this),e),lr(ES.get(this))}:function(...e){return lr(t.apply(lh(this),e))}}function Eb(t){return typeof t=="function"?wb(t):(t instanceof IDBTransaction&&vb(t),pb(t,mb())?new Proxy(t,Vd):t)}function lr(t){if(t instanceof IDBRequest)return yb(t);if(ah.has(t))return ah.get(t);const e=Eb(t);return e!==t&&(ah.set(t,e),Mp.set(e,t)),e}const lh=t=>Mp.get(t);function Tb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=lr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(lr(o.result),u.oldVersion,u.newVersion,lr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Sb=["get","getKey","getAll","getAllKeys","count"],xb=["put","add","delete","clear"],uh=new Map;function o0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uh.get(e))return uh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=xb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Sb.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return uh.set(e,s),s}_b(t=>({...t,get:(e,n,r)=>o0(e,n)||t.get(e,n,r),has:(e,n)=>!!o0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ib(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ib(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dd="@firebase/app",a0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new Lp("@firebase/app"),Pb="@firebase/app-compat",Cb="@firebase/analytics-compat",Rb="@firebase/analytics",kb="@firebase/app-check-compat",Nb="@firebase/app-check",Vb="@firebase/auth",Db="@firebase/auth-compat",bb="@firebase/database",Lb="@firebase/data-connect",Mb="@firebase/database-compat",Ob="@firebase/functions",jb="@firebase/functions-compat",Fb="@firebase/installations",Ub="@firebase/installations-compat",Bb="@firebase/messaging",$b="@firebase/messaging-compat",zb="@firebase/performance",Wb="@firebase/performance-compat",Hb="@firebase/remote-config",qb="@firebase/remote-config-compat",Kb="@firebase/storage",Gb="@firebase/storage-compat",Qb="@firebase/firestore",Xb="@firebase/vertexai-preview",Yb="@firebase/firestore-compat",Jb="firebase",Zb="10.14.1",e2={[Dd]:"fire-core",[Pb]:"fire-core-compat",[Rb]:"fire-analytics",[Cb]:"fire-analytics-compat",[Nb]:"fire-app-check",[kb]:"fire-app-check-compat",[Vb]:"fire-auth",[Db]:"fire-auth-compat",[bb]:"fire-rtdb",[Lb]:"fire-data-connect",[Mb]:"fire-rtdb-compat",[Ob]:"fire-fn",[jb]:"fire-fn-compat",[Fb]:"fire-iid",[Ub]:"fire-iid-compat",[Bb]:"fire-fcm",[$b]:"fire-fcm-compat",[zb]:"fire-perf",[Wb]:"fire-perf-compat",[Hb]:"fire-rc",[qb]:"fire-rc-compat",[Kb]:"fire-gcs",[Gb]:"fire-gcs-compat",[Qb]:"fire-fst",[Yb]:"fire-fst-compat",[Xb]:"fire-vertex","fire-js":"fire-js",[Jb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new Map,n2=new Map,l0=new Map;function u0(t,e){try{t.container.addComponent(e)}catch(n){kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ts(t){const e=t.name;if(l0.has(e))return kn.debug(`There were multiple attempts to register component ${e}.`),!1;l0.set(e,t);for(const n of t2.values())u0(n,t);for(const n of n2.values())u0(n,t);return!0}function Qs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Op=new sa("app","Firebase",r2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=Zb;function ur(t,e,n){var r;let i=(r=e2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kn.warn(a.join(" "));return}ts(new es(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebase-heartbeat-database",s2=1,zo="firebase-heartbeat-store";let ch=null;function SS(){return ch||(ch=Tb(i2,s2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Op.create("idb-open",{originalErrorMessage:t.message})})),ch}async function o2(t){try{const n=(await SS()).transaction(zo),r=await n.objectStore(zo).get(xS(t));return await n.done,r}catch(e){if(e instanceof Sr)kn.warn(e.message);else{const n=Op.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kn.warn(n.message)}}}async function c0(t,e){try{const r=(await SS()).transaction(zo,"readwrite");await r.objectStore(zo).put(e,xS(t)),await r.done}catch(n){if(n instanceof Sr)kn.warn(n.message);else{const r=Op.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kn.warn(r.message)}}}function xS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=1024,l2=30*24*60*60*1e3;class u2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=h0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=l2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h0(),{heartbeatsToSend:r,unsentEntries:i}=c2(this._heartbeatsCache.heartbeats),s=yS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return kn.warn(n),""}}}function h0(){return new Date().toISOString().substring(0,10)}function c2(t,e=a2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),d0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),d0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class h2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?rb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function d0(t){return yS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t){ts(new es("platform-logger",e=>new Ab(e),"PRIVATE")),ts(new es("heartbeat",e=>new u2(e),"PRIVATE")),ur(Dd,a0,t),ur(Dd,a0,"esm2017"),ur("fire-js","")}d2("");var f2="firebase",p2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(f2,p2,"app");function AS(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function IS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m2=IS,PS=new sa("auth","Firebase",IS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Lp("@firebase/auth");function g2(t,...e){iu.logLevel<=Z.WARN&&iu.warn(`Auth (${ju}): ${t}`,...e)}function vl(t,...e){iu.logLevel<=Z.ERROR&&iu.error(`Auth (${ju}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,...e){throw jp(t,...e)}function CS(t,...e){return jp(t,...e)}function RS(t,e,n){const r=Object.assign(Object.assign({},m2()),{[e]:n});return new sa("auth","Firebase",r).create(e,{appName:t.name})}function _l(t){return RS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PS.create(t,...e)}function oe(t,e,...n){if(!t)throw jp(e,...n)}function fo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vl(e),new Error(e)}function su(t,e){t||fo(e)}function y2(){return p0()==="http:"||p0()==="https:"}function p0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y2()||ZD()||"connection"in navigator)?navigator.onLine:!0}function _2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.shortDelay=e,this.longDelay=n,su(n>e,"Short delay should be less than long delay!"),this.isMobile=XD()||eb()}get(){return v2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t,e){su(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new oa(3e4,6e4);function NS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fu(t,e,n,r,i={}){return VS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=wS(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return JD()||(c.referrerPolicy="no-referrer"),kS.fetch()(DS(t,t.config.apiHost,n,a),c)})}async function VS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},E2),e);try{const i=new S2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ya(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ya(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ya(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw RS(t,h,c);f0(t,h)}}catch(i){if(i instanceof Sr)throw i;f0(t,"network-request-failed",{message:String(i)})}}function DS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?w2(t.config,i):`${t.config.apiScheme}://${i}`}class S2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(CS(this.auth,"network-request-failed")),T2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ya(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=CS(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return Fu(t,"POST","/v1/accounts:delete",e)}async function bS(t,e){return Fu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A2(t,e=!1){const n=pr(t),r=await n.getIdToken(e),i=LS(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:po(hh(i.auth_time)),issuedAtTime:po(hh(i.iat)),expirationTime:po(hh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hh(t){return Number(t)*1e3}function LS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vl("JWT malformed, contained fewer than 3 sections"),null;try{const i=vS(n);return i?JSON.parse(i):(vl("Failed to decode base64 JWT payload"),null)}catch(i){return vl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function m0(t){const e=LS(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&I2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=po(this.lastLoginAt),this.creationTime=po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t){var e;const n=t.auth,r=await t.getIdToken(),i=await bd(t,bS(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?MS(s.providerUserInfo):[],a=R2(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ld(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function C2(t){const e=pr(t);await ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function MS(t){return t.map(e=>{var{providerId:n}=e,r=AS(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e){const n=await VS(t,{},async()=>{const r=wS({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=DS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N2(t,e){return Fu(t,"POST","/v2/accounts:revokeToken",NS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=m0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await k2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Fi;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fi,this.toJSON())}_performRefresh(){return fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=AS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ld(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bd(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A2(this,e)}reload(){return C2(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qs(this.auth.app))return Promise.reject(_l(this.auth));const e=await this.getIdToken();return await bd(this,x2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:V,isAnonymous:L,providerData:O,stsTokenManager:I}=n;oe(x&&I,e,"internal-error");const y=Fi.fromJSON(this.name,I);oe(typeof x=="string",e,"internal-error"),Un(f,e.name),Un(p,e.name),oe(typeof V=="boolean",e,"internal-error"),oe(typeof L=="boolean",e,"internal-error"),Un(v,e.name),Un(T,e.name),Un(S,e.name),Un(C,e.name),Un(w,e.name),Un(_,e.name);const A=new Qn({uid:x,auth:e,email:p,emailVerified:V,displayName:f,isAnonymous:L,photoURL:T,phoneNumber:v,tenantId:S,stsTokenManager:y,createdAt:w,lastLoginAt:_});return O&&Array.isArray(O)&&(A.providerData=O.map(P=>Object.assign({},P))),C&&(A._redirectEventId=C),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Fi;i.updateFromServerResponse(n);const s=new Qn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ou(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?MS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Fi;a.updateFromIdToken(r);const u=new Qn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ld(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;function Fr(t){su(t instanceof Function,"Expected a class definition");let e=g0.get(t);return e?(su(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OS.type="NONE";const y0=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=dh(this.userKey,i.apiKey,s),this.fullPersistenceKey=dh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ui(Fr(y0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Fr(y0);const o=dh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Qn._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ui(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ui(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O2(e))return"Blackberry";if(j2(e))return"Webos";if(D2(e))return"Safari";if((e.includes("chrome/")||b2(e))&&!e.includes("edge/"))return"Chrome";if(M2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function V2(t=Jt()){return/firefox\//i.test(t)}function D2(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b2(t=Jt()){return/crios\//i.test(t)}function L2(t=Jt()){return/iemobile/i.test(t)}function M2(t=Jt()){return/android/i.test(t)}function O2(t=Jt()){return/blackberry/i.test(t)}function j2(t=Jt()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t,e=[]){let n;switch(t){case"Browser":n=v0(Jt());break;case"Worker":n=`${v0(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ju}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(t,e={}){return Fu(t,"GET","/v2/passwordPolicy",NS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=6;class $2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:B2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _0(this),this.idTokenSubscription=new _0(this),this.beforeStateQueue=new F2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ui.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bS(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qs(this.app))return Promise.reject(_l(this));const n=e?pr(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qs(this.app)?Promise.reject(_l(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qs(this.app)?Promise.reject(_l(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await U2(this),n=new $2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await N2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Ui.create(this,[Fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&g2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function W2(t){return pr(t)}class _0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ab(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function H2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}new oa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new oa(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new oa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new oa(5e3,15e3);var w0="@firebase/auth",E0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G2(t){ts(new es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jS(t)},c=new z2(r,i,s,u);return H2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ts(new es("auth-internal",e=>{const n=W2(e.getProvider("auth").getImmediate());return(r=>new q2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(w0,E0,K2(t)),ur(w0,E0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=5*60;QD("authIdTokenMaxAge");G2("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,FS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function A(){}A.prototype=y.prototype,I.D=y.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(P,N,D){for(var R=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)R[ve-2]=arguments[ve];return y.prototype[N].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,A){A||(A=0);var P=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)P[N]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(N=0;16>N;++N)P[N]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=I.g[0],A=I.g[1],N=I.g[2];var D=I.g[3],R=y+(D^A&(N^D))+P[0]+3614090360&4294967295;y=A+(R<<7&4294967295|R>>>25),R=D+(N^y&(A^N))+P[1]+3905402710&4294967295,D=y+(R<<12&4294967295|R>>>20),R=N+(A^D&(y^A))+P[2]+606105819&4294967295,N=D+(R<<17&4294967295|R>>>15),R=A+(y^N&(D^y))+P[3]+3250441966&4294967295,A=N+(R<<22&4294967295|R>>>10),R=y+(D^A&(N^D))+P[4]+4118548399&4294967295,y=A+(R<<7&4294967295|R>>>25),R=D+(N^y&(A^N))+P[5]+1200080426&4294967295,D=y+(R<<12&4294967295|R>>>20),R=N+(A^D&(y^A))+P[6]+2821735955&4294967295,N=D+(R<<17&4294967295|R>>>15),R=A+(y^N&(D^y))+P[7]+4249261313&4294967295,A=N+(R<<22&4294967295|R>>>10),R=y+(D^A&(N^D))+P[8]+1770035416&4294967295,y=A+(R<<7&4294967295|R>>>25),R=D+(N^y&(A^N))+P[9]+2336552879&4294967295,D=y+(R<<12&4294967295|R>>>20),R=N+(A^D&(y^A))+P[10]+4294925233&4294967295,N=D+(R<<17&4294967295|R>>>15),R=A+(y^N&(D^y))+P[11]+2304563134&4294967295,A=N+(R<<22&4294967295|R>>>10),R=y+(D^A&(N^D))+P[12]+1804603682&4294967295,y=A+(R<<7&4294967295|R>>>25),R=D+(N^y&(A^N))+P[13]+4254626195&4294967295,D=y+(R<<12&4294967295|R>>>20),R=N+(A^D&(y^A))+P[14]+2792965006&4294967295,N=D+(R<<17&4294967295|R>>>15),R=A+(y^N&(D^y))+P[15]+1236535329&4294967295,A=N+(R<<22&4294967295|R>>>10),R=y+(N^D&(A^N))+P[1]+4129170786&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^N&(y^A))+P[6]+3225465664&4294967295,D=y+(R<<9&4294967295|R>>>23),R=N+(y^A&(D^y))+P[11]+643717713&4294967295,N=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(N^D))+P[0]+3921069994&4294967295,A=N+(R<<20&4294967295|R>>>12),R=y+(N^D&(A^N))+P[5]+3593408605&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^N&(y^A))+P[10]+38016083&4294967295,D=y+(R<<9&4294967295|R>>>23),R=N+(y^A&(D^y))+P[15]+3634488961&4294967295,N=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(N^D))+P[4]+3889429448&4294967295,A=N+(R<<20&4294967295|R>>>12),R=y+(N^D&(A^N))+P[9]+568446438&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^N&(y^A))+P[14]+3275163606&4294967295,D=y+(R<<9&4294967295|R>>>23),R=N+(y^A&(D^y))+P[3]+4107603335&4294967295,N=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(N^D))+P[8]+1163531501&4294967295,A=N+(R<<20&4294967295|R>>>12),R=y+(N^D&(A^N))+P[13]+2850285829&4294967295,y=A+(R<<5&4294967295|R>>>27),R=D+(A^N&(y^A))+P[2]+4243563512&4294967295,D=y+(R<<9&4294967295|R>>>23),R=N+(y^A&(D^y))+P[7]+1735328473&4294967295,N=D+(R<<14&4294967295|R>>>18),R=A+(D^y&(N^D))+P[12]+2368359562&4294967295,A=N+(R<<20&4294967295|R>>>12),R=y+(A^N^D)+P[5]+4294588738&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^N)+P[8]+2272392833&4294967295,D=y+(R<<11&4294967295|R>>>21),R=N+(D^y^A)+P[11]+1839030562&4294967295,N=D+(R<<16&4294967295|R>>>16),R=A+(N^D^y)+P[14]+4259657740&4294967295,A=N+(R<<23&4294967295|R>>>9),R=y+(A^N^D)+P[1]+2763975236&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^N)+P[4]+1272893353&4294967295,D=y+(R<<11&4294967295|R>>>21),R=N+(D^y^A)+P[7]+4139469664&4294967295,N=D+(R<<16&4294967295|R>>>16),R=A+(N^D^y)+P[10]+3200236656&4294967295,A=N+(R<<23&4294967295|R>>>9),R=y+(A^N^D)+P[13]+681279174&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^N)+P[0]+3936430074&4294967295,D=y+(R<<11&4294967295|R>>>21),R=N+(D^y^A)+P[3]+3572445317&4294967295,N=D+(R<<16&4294967295|R>>>16),R=A+(N^D^y)+P[6]+76029189&4294967295,A=N+(R<<23&4294967295|R>>>9),R=y+(A^N^D)+P[9]+3654602809&4294967295,y=A+(R<<4&4294967295|R>>>28),R=D+(y^A^N)+P[12]+3873151461&4294967295,D=y+(R<<11&4294967295|R>>>21),R=N+(D^y^A)+P[15]+530742520&4294967295,N=D+(R<<16&4294967295|R>>>16),R=A+(N^D^y)+P[2]+3299628645&4294967295,A=N+(R<<23&4294967295|R>>>9),R=y+(N^(A|~D))+P[0]+4096336452&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~N))+P[7]+1126891415&4294967295,D=y+(R<<10&4294967295|R>>>22),R=N+(y^(D|~A))+P[14]+2878612391&4294967295,N=D+(R<<15&4294967295|R>>>17),R=A+(D^(N|~y))+P[5]+4237533241&4294967295,A=N+(R<<21&4294967295|R>>>11),R=y+(N^(A|~D))+P[12]+1700485571&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~N))+P[3]+2399980690&4294967295,D=y+(R<<10&4294967295|R>>>22),R=N+(y^(D|~A))+P[10]+4293915773&4294967295,N=D+(R<<15&4294967295|R>>>17),R=A+(D^(N|~y))+P[1]+2240044497&4294967295,A=N+(R<<21&4294967295|R>>>11),R=y+(N^(A|~D))+P[8]+1873313359&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~N))+P[15]+4264355552&4294967295,D=y+(R<<10&4294967295|R>>>22),R=N+(y^(D|~A))+P[6]+2734768916&4294967295,N=D+(R<<15&4294967295|R>>>17),R=A+(D^(N|~y))+P[13]+1309151649&4294967295,A=N+(R<<21&4294967295|R>>>11),R=y+(N^(A|~D))+P[4]+4149444226&4294967295,y=A+(R<<6&4294967295|R>>>26),R=D+(A^(y|~N))+P[11]+3174756917&4294967295,D=y+(R<<10&4294967295|R>>>22),R=N+(y^(D|~A))+P[2]+718787259&4294967295,N=D+(R<<15&4294967295|R>>>17),R=A+(D^(N|~y))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var A=y-this.blockSize,P=this.B,N=this.h,D=0;D<y;){if(N==0)for(;D<=A;)i(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<y;)if(P[N++]=I.charCodeAt(D++),N==this.blockSize){i(this,P),N=0;break}}else for(;D<y;)if(P[N++]=I[D++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var A=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=A&255,A/=256;for(this.u(I),I=Array(16),y=A=0;4>y;++y)for(var P=0;32>P;P+=8)I[A++]=this.g[y]>>>P&255;return I};function s(I,y){var A=a;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=y(I)}function o(I,y){this.h=y;for(var A=[],P=!0,N=I.length-1;0<=N;N--){var D=I[N]|0;P&&D==y||(A[N]=D,P=!1)}this.g=A}var a={};function u(I){return-128<=I&&128>I?s(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(c(-I));for(var y=[],A=1,P=0;I>=A;P++)y[P]=I/A|0,A*=4294967296;return new o(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return C(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(y,8)),P=f,N=0;N<I.length;N+=8){var D=Math.min(8,I.length-N),R=parseInt(I.substring(N,N+D),y);8>D?(D=c(Math.pow(y,D)),P=P.j(D).add(c(R))):(P=P.j(A),P=P.add(c(R)))}return P}var f=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(S(this))return-C(this).m();for(var I=0,y=1,A=0;A<this.g.length;A++){var P=this.i(A);I+=(0<=P?P:4294967296+P)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(S(this))return"-"+C(this).toString(I);for(var y=c(Math.pow(I,6)),A=this,P="";;){var N=V(A,y).g;A=w(A,N.j(y));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=N,T(A))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=w(this,I),S(I)?-1:T(I)?0:1};function C(I){for(var y=I.g.length,A=[],P=0;P<y;P++)A[P]=~I.g[P];return new o(A,~I.h).add(p)}t.abs=function(){return S(this)?C(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),A=[],P=0,N=0;N<=y;N++){var D=P+(this.i(N)&65535)+(I.i(N)&65535),R=(D>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);P=R>>>16,D&=65535,R&=65535,A[N]=R<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function w(I,y){return I.add(C(y))}t.j=function(I){if(T(this)||T(I))return f;if(S(this))return S(I)?C(this).j(C(I)):C(C(this).j(I));if(S(I))return C(this.j(C(I)));if(0>this.l(v)&&0>I.l(v))return c(this.m()*I.m());for(var y=this.g.length+I.g.length,A=[],P=0;P<2*y;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<I.g.length;N++){var D=this.i(P)>>>16,R=this.i(P)&65535,ve=I.i(N)>>>16,Ln=I.i(N)&65535;A[2*P+2*N]+=R*Ln,_(A,2*P+2*N),A[2*P+2*N+1]+=D*Ln,_(A,2*P+2*N+1),A[2*P+2*N+1]+=R*ve,_(A,2*P+2*N+1),A[2*P+2*N+2]+=D*ve,_(A,2*P+2*N+2)}for(P=0;P<y;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=y;P<2*y;P++)A[P]=0;return new o(A,0)};function _(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function x(I,y){this.g=I,this.h=y}function V(I,y){if(T(y))throw Error("division by zero");if(T(I))return new x(f,f);if(S(I))return y=V(C(I),y),new x(C(y.g),C(y.h));if(S(y))return y=V(I,C(y)),new x(C(y.g),y.h);if(30<I.g.length){if(S(I)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var A=p,P=y;0>=P.l(I);)A=L(A),P=L(P);var N=O(A,1),D=O(P,1);for(P=O(P,2),A=O(A,2);!T(P);){var R=D.add(P);0>=R.l(I)&&(N=N.add(A),D=R),P=O(P,1),A=O(A,1)}return y=w(I,N.j(y)),new x(N,y)}for(N=f;0<=I.l(y);){for(A=Math.max(1,Math.floor(I.m()/y.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(A),R=D.j(y);S(R)||0<R.l(I);)A-=P,D=c(A),R=D.j(y);T(D)&&(D=p),N=N.add(D),I=w(I,R)}return new x(N,I)}t.A=function(I){return V(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),A=[],P=0;P<y;P++)A[P]=this.i(P)&I.i(P);return new o(A,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),A=[],P=0;P<y;P++)A[P]=this.i(P)|I.i(P);return new o(A,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),A=[],P=0;P<y;P++)A[P]=this.i(P)^I.i(P);return new o(A,this.h^I.h)};function L(I){for(var y=I.g.length+1,A=[],P=0;P<y;P++)A[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(A,I.h)}function O(I,y){var A=y>>5;y%=32;for(var P=I.g.length-A,N=[],D=0;D<P;D++)N[D]=0<y?I.i(D+A)>>>y|I.i(D+A+1)<<32-y:I.i(D+A);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Wr=o}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,Xs,BS,wl,Md,$S,zS,WS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var m=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var b=l[E];if(!(b in m))break e;m=m[b]}l=l[l.length-1],E=m[l],d=d(E),d!=E&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var m=0,E=!1,b={next:function(){if(!E&&m<l.length){var M=m++;return{value:d(M,l[M]),done:!1}}return E=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(l){return l||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,m){return l.call.apply(l.bind,arguments)}function f(l,d,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,E),l.apply(d,b)}}return function(){return l.apply(d,arguments)}}function p(l,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function v(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function T(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,b,M){for(var B=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)B[ue-2]=arguments[ue];return d.prototype[b].apply(E,B)}}function S(l){const d=l.length;if(0<d){const m=Array(d);for(let E=0;E<d;E++)m[E]=l[E];return m}return[]}function C(l,d){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(u(E)){const b=l.length||0,M=E.length||0;l.length=b+M;for(let B=0;B<M;B++)l[b+B]=E[B]}else l.push(E)}}class w{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(l){return/^[\s\xa0]*$/.test(l)}function x(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function V(l){return V[" "](l),l}V[" "]=function(){};var L=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(l,d,m){for(const E in l)d.call(m,l[E],E,l)}function I(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function y(l){const d={};for(const m in l)d[m]=l[m];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,d){let m,E;for(let b=1;b<arguments.length;b++){E=arguments[b];for(m in E)l[m]=E[m];for(let M=0;M<A.length;M++)m=A[M],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function N(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function D(l){a.setTimeout(()=>{throw l},0)}function R(){var l=G;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ve{constructor(){this.h=this.g=null}add(d,m){const E=Ln.get();E.set(d,m),this.h?this.h.next=E:this.g=E,this.h=E}}var Ln=new w(()=>new si,l=>l.reset());class si{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let he,$=!1,G=new ve,Q=()=>{const l=a.Promise.resolve(void 0);he=()=>{l.then(_e)}};var _e=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(m){D(m)}var d=Ln;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}$=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var dn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return l}();function fn(l,d){if(Re.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(L){e:{try{V(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:pn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&fn.aa.h.call(this)}}T(fn,Re);var pn={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var mn="closure_listenable_"+(1e6*Math.random()|0),qx=0;function Kx(l,d,m,E,b){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.ha=b,this.key=++qx,this.da=this.fa=!1}function da(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function fa(l){this.src=l,this.g={},this.h=0}fa.prototype.add=function(l,d,m,E,b){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var B=Xu(l,d,E,b);return-1<B?(d=l[B],m||(d.fa=!1)):(d=new Kx(d,this.src,M,!!E,b),d.fa=m,l.push(d)),d};function Qu(l,d){var m=d.type;if(m in l.g){var E=l.g[m],b=Array.prototype.indexOf.call(E,d,void 0),M;(M=0<=b)&&Array.prototype.splice.call(E,b,1),M&&(da(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Xu(l,d,m,E){for(var b=0;b<l.length;++b){var M=l[b];if(!M.da&&M.listener==d&&M.capture==!!m&&M.ha==E)return b}return-1}var Yu="closure_lm_"+(1e6*Math.random()|0),Ju={};function vm(l,d,m,E,b){if(Array.isArray(d)){for(var M=0;M<d.length;M++)vm(l,d[M],m,E,b);return null}return m=Em(m),l&&l[mn]?l.K(d,m,c(E)?!!E.capture:!1,b):Gx(l,d,m,!1,E,b)}function Gx(l,d,m,E,b,M){if(!d)throw Error("Invalid event type");var B=c(b)?!!b.capture:!!b,ue=ec(l);if(ue||(l[Yu]=ue=new fa(l)),m=ue.add(d,m,E,B,M),m.proxy)return m;if(E=Qx(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)dn||(b=B),b===void 0&&(b=!1),l.addEventListener(d.toString(),E,b);else if(l.attachEvent)l.attachEvent(wm(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Qx(){function l(m){return d.call(l.src,l.listener,m)}const d=Xx;return l}function _m(l,d,m,E,b){if(Array.isArray(d))for(var M=0;M<d.length;M++)_m(l,d[M],m,E,b);else E=c(E)?!!E.capture:!!E,m=Em(m),l&&l[mn]?(l=l.i,d=String(d).toString(),d in l.g&&(M=l.g[d],m=Xu(M,m,E,b),-1<m&&(da(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete l.g[d],l.h--)))):l&&(l=ec(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Xu(d,m,E,b)),(m=-1<l?d[l]:null)&&Zu(m))}function Zu(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[mn])Qu(d.i,l);else{var m=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(m,E,l.capture):d.detachEvent?d.detachEvent(wm(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=ec(d))?(Qu(m,l),m.h==0&&(m.src=null,d[Yu]=null)):da(l)}}}function wm(l){return l in Ju?Ju[l]:Ju[l]="on"+l}function Xx(l,d){if(l.da)l=!0;else{d=new fn(d,this);var m=l.listener,E=l.ha||l.src;l.fa&&Zu(l),l=m.call(E,d)}return l}function ec(l){return l=l[Yu],l instanceof fa?l:null}var tc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Em(l){return typeof l=="function"?l:(l[tc]||(l[tc]=function(d){return l.handleEvent(d)}),l[tc])}function Je(){le.call(this),this.i=new fa(this),this.M=this,this.F=null}T(Je,le),Je.prototype[mn]=!0,Je.prototype.removeEventListener=function(l,d,m,E){_m(this,l,d,m,E)};function ht(l,d){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new Re(d,l);else if(d instanceof Re)d.target=d.target||l;else{var b=d;d=new Re(E,l),P(d,b)}if(b=!0,m)for(var M=m.length-1;0<=M;M--){var B=d.g=m[M];b=pa(B,E,!0,d)&&b}if(B=d.g=l,b=pa(B,E,!0,d)&&b,b=pa(B,E,!1,d)&&b,m)for(M=0;M<m.length;M++)B=d.g=m[M],b=pa(B,E,!1,d)&&b}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],E=0;E<m.length;E++)da(m[E]);delete l.g[d],l.h--}}this.F=null},Je.prototype.K=function(l,d,m,E){return this.i.add(String(l),d,!1,m,E)},Je.prototype.L=function(l,d,m,E){return this.i.add(String(l),d,!0,m,E)};function pa(l,d,m,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,M=0;M<d.length;++M){var B=d[M];if(B&&!B.da&&B.capture==m){var ue=B.listener,We=B.ha||B.src;B.fa&&Qu(l.i,B),b=ue.call(We,E)!==!1&&b}}return b&&!E.defaultPrevented}function Tm(l,d,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Sm(l){l.g=Tm(()=>{l.g=null,l.i&&(l.i=!1,Sm(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Yx extends le{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(l){le.call(this),this.h=l,this.g={}}T(_s,le);var xm=[];function Am(l){O(l.g,function(d,m){this.g.hasOwnProperty(m)&&Zu(d)},l),l.g={}}_s.prototype.N=function(){_s.aa.N.call(this),Am(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nc=a.JSON.stringify,Jx=a.JSON.parse,Zx=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function rc(){}rc.prototype.h=null;function Im(l){return l.h||(l.h=l.i())}function Pm(){}var ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ic(){Re.call(this,"d")}T(ic,Re);function sc(){Re.call(this,"c")}T(sc,Re);var Ar={},Cm=null;function ma(){return Cm=Cm||new Je}Ar.La="serverreachability";function Rm(l){Re.call(this,Ar.La,l)}T(Rm,Re);function Es(l){const d=ma();ht(d,new Rm(d))}Ar.STAT_EVENT="statevent";function km(l,d){Re.call(this,Ar.STAT_EVENT,l),this.stat=d}T(km,Re);function dt(l){const d=ma();ht(d,new km(d,l))}Ar.Ma="timingevent";function Nm(l,d){Re.call(this,Ar.Ma,l),this.size=d}T(Nm,Re);function Ts(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function eA(l,d,m,E,b,M){l.info(function(){if(l.g)if(M)for(var B="",ue=M.split("&"),We=0;We<ue.length;We++){var ie=ue[We].split("=");if(1<ie.length){var Ze=ie[0];ie=ie[1];var et=Ze.split("_");B=2<=et.length&&et[1]=="type"?B+(Ze+"="+ie+"&"):B+(Ze+"=redacted&")}}else B=null;else B=M;return"XMLHTTP REQ ("+E+") [attempt "+b+"]: "+d+`
`+m+`
`+B})}function tA(l,d,m,E,b,M,B){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+b+"]: "+d+`
`+m+`
`+M+" "+B})}function oi(l,d,m,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+rA(l,m)+(E?" "+E:"")})}function nA(l,d){l.info(function(){return"TIMEOUT: "+d})}Ss.prototype.info=function(){};function rA(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var b=E[1];if(Array.isArray(b)&&!(1>b.length)){var M=b[0];if(M!="noop"&&M!="stop"&&M!="close")for(var B=1;B<b.length;B++)b[B]=""}}}}return nc(m)}catch{return d}}var ga={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oc;function ya(){}T(ya,rc),ya.prototype.g=function(){return new XMLHttpRequest},ya.prototype.i=function(){return{}},oc=new ya;function Mn(l,d,m,E){this.j=l,this.i=d,this.l=m,this.R=E||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dm}function Dm(){this.i=null,this.g="",this.h=!1}var bm={},ac={};function lc(l,d,m){l.L=1,l.v=Ea(gn(d)),l.m=m,l.P=!0,Lm(l,null)}function Lm(l,d){l.F=Date.now(),va(l),l.A=gn(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Qm(m.i,"t",E),l.C=0,m=l.j.J,l.h=new Dm,l.g=fg(l.j,m?d:null,!l.m),0<l.O&&(l.M=new Yx(p(l.Y,l,l.g),l.O)),d=l.U,m=l.g,E=l.ca;var b="readystatechange";Array.isArray(b)||(b&&(xm[0]=b.toString()),b=xm);for(var M=0;M<b.length;M++){var B=vm(m,b[M],E||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Es(),eA(l.i,l.u,l.A,l.l,l.R,l.m)}Mn.prototype.ca=function(l){l=l.target;const d=this.M;d&&yn(l)==3?d.j():this.Y(l)},Mn.prototype.Y=function(l){try{if(l==this.g)e:{const et=yn(this.g);var d=this.g.Ba();const ui=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||ng(this.g)))){this.J||et!=4||d==7||(d==8||0>=ui?Es(3):Es(2)),uc(this);var m=this.g.Z();this.X=m;t:if(Mm(this)){var E=ng(this.g);l="";var b=E.length,M=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),xs(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(M&&d==b-1)});E.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,tA(this.i,this.u,this.A,this.l,this.R,et,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,We=this.g;if((ue=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ue)){var ie=ue;break t}}ie=null}if(m=ie)oi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cc(this,m);else{this.o=!1,this.s=3,dt(12),Ir(this),xs(this);break e}}if(this.P){m=!0;let $t;for(;!this.J&&this.C<B.length;)if($t=iA(this,B),$t==ac){et==4&&(this.s=4,dt(14),m=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if($t==bm){this.s=4,dt(15),oi(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else oi(this.i,this.l,$t,null),cc(this,$t);if(Mm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||B.length!=0||this.h.h||(this.s=1,dt(16),m=!1),this.o=this.o&&m,!m)oi(this.i,this.l,B,"[Invalid Chunked Response]"),Ir(this),xs(this);else if(0<B.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),gc(Ze),Ze.M=!0,dt(11))}}else oi(this.i,this.l,B,null),cc(this,B);et==4&&Ir(this),this.o&&!this.J&&(et==4?ug(this.j,this):(this.o=!1,va(this)))}else EA(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Ir(this),xs(this)}}}catch{}finally{}};function Mm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function iA(l,d){var m=l.C,E=d.indexOf(`
`,m);return E==-1?ac:(m=Number(d.substring(m,E)),isNaN(m)?bm:(E+=1,E+m>d.length?ac:(d=d.slice(E,E+m),l.C=E+m,d)))}Mn.prototype.cancel=function(){this.J=!0,Ir(this)};function va(l){l.S=Date.now()+l.I,Om(l,l.I)}function Om(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ts(p(l.ba,l),d)}function uc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Mn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(nA(this.i,this.A),this.L!=2&&(Es(),dt(17)),Ir(this),this.s=2,xs(this)):Om(this,this.S-l)};function xs(l){l.j.G==0||l.J||ug(l.j,l)}function Ir(l){uc(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Am(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function cc(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||hc(m.h,l))){if(!l.K&&hc(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var b=E;if(b[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Pa(m),Aa(m);else break e;mc(m),dt(18)}}else m.za=b[1],0<m.za-m.T&&37500>b[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ts(p(m.Za,m),6e3));if(1>=Um(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Cr(m,11)}else if((l.K||m.g==l)&&Pa(m),!_(d))for(b=m.Da.g.parse(d),d=0;d<b.length;d++){let ie=b[d];if(m.T=ie[0],ie=ie[1],m.G==2)if(ie[0]=="c"){m.K=ie[1],m.ia=ie[2];const Ze=ie[3];Ze!=null&&(m.la=Ze,m.j.info("VER="+m.la));const et=ie[4];et!=null&&(m.Aa=et,m.j.info("SVER="+m.Aa));const ui=ie[5];ui!=null&&typeof ui=="number"&&0<ui&&(E=1.5*ui,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const $t=l.g;if($t){const Ra=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var M=E.h;M.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(dc(M,M.h),M.h=null))}if(E.D){const yc=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;yc&&(E.ya=yc,de(E.I,E.D,yc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var B=l;if(E.qa=dg(E,E.J?E.ia:null,E.W),B.K){Bm(E.h,B);var ue=B,We=E.L;We&&(ue.I=We),ue.B&&(uc(ue),va(ue)),E.g=B}else ag(E);0<m.i.length&&Ia(m)}else ie[0]!="stop"&&ie[0]!="close"||Cr(m,7);else m.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Cr(m,7):pc(m):ie[0]!="noop"&&m.l&&m.l.ta(ie),m.v=0)}}Es(4)}catch{}}var sA=class{constructor(l,d){this.g=l,this.map=d}};function jm(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Um(l){return l.h?1:l.g?l.g.size:0}function hc(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function dc(l,d){l.g?l.g.add(d):l.h=d}function Bm(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}jm.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $m(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return S(l.i)}function oA(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],m=l.length,E=0;E<m;E++)d.push(l[E]);return d}d=[],m=0;for(E in l)d[m++]=l[E];return d}function aA(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const E in l)d[m++]=E;return d}}}function zm(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=aA(l),E=oA(l),b=E.length,M=0;M<b;M++)d.call(void 0,E[M],m&&m[M],l)}var Wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lA(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),b=null;if(0<=E){var M=l[m].substring(0,E);b=l[m].substring(E+1)}else M=l[m];d(M,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Pr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Pr){this.h=l.h,_a(this,l.j),this.o=l.o,this.g=l.g,wa(this,l.s),this.l=l.l;var d=l.i,m=new Ps;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Hm(this,m),this.m=l.m}else l&&(d=String(l).match(Wm))?(this.h=!1,_a(this,d[1]||"",!0),this.o=As(d[2]||""),this.g=As(d[3]||"",!0),wa(this,d[4]),this.l=As(d[5]||"",!0),Hm(this,d[6]||"",!0),this.m=As(d[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}Pr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Is(d,qm,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Is(d,qm,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Is(m,m.charAt(0)=="/"?hA:cA,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Is(m,fA)),l.join("")};function gn(l){return new Pr(l)}function _a(l,d,m){l.j=m?As(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function wa(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Hm(l,d,m){d instanceof Ps?(l.i=d,pA(l.i,l.h)):(m||(d=Is(d,dA)),l.i=new Ps(d,l.h))}function de(l,d,m){l.i.set(d,m)}function Ea(l){return de(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function As(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Is(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,uA),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function uA(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qm=/[#\/\?@]/g,cA=/[#\?:]/g,hA=/[#\?]/g,dA=/[#\?@]/g,fA=/#/g;function Ps(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function On(l){l.g||(l.g=new Map,l.h=0,l.i&&lA(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Ps.prototype,t.add=function(l,d){On(this),this.i=null,l=ai(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function Km(l,d){On(l),d=ai(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Gm(l,d){return On(l),d=ai(l,d),l.g.has(d)}t.forEach=function(l,d){On(this),this.g.forEach(function(m,E){m.forEach(function(b){l.call(d,b,E,this)},this)},this)},t.na=function(){On(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let E=0;E<d.length;E++){const b=l[E];for(let M=0;M<b.length;M++)m.push(d[E])}return m},t.V=function(l){On(this);let d=[];if(typeof l=="string")Gm(this,l)&&(d=d.concat(this.g.get(ai(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},t.set=function(l,d){return On(this),this.i=null,l=ai(this,l),Gm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Qm(l,d,m){Km(l,d),0<m.length&&(l.i=null,l.g.set(ai(l,d),S(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var E=d[m];const M=encodeURIComponent(String(E)),B=this.V(E);for(E=0;E<B.length;E++){var b=M;B[E]!==""&&(b+="="+encodeURIComponent(String(B[E]))),l.push(b)}}return this.i=l.join("&")};function ai(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function pA(l,d){d&&!l.j&&(On(l),l.i=null,l.g.forEach(function(m,E){var b=E.toLowerCase();E!=b&&(Km(this,E),Qm(this,b,m))},l)),l.j=d}function mA(l,d){const m=new Ss;if(a.Image){const E=new Image;E.onload=v(jn,m,"TestLoadImage: loaded",!0,d,E),E.onerror=v(jn,m,"TestLoadImage: error",!1,d,E),E.onabort=v(jn,m,"TestLoadImage: abort",!1,d,E),E.ontimeout=v(jn,m,"TestLoadImage: timeout",!1,d,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function gA(l,d){const m=new Ss,E=new AbortController,b=setTimeout(()=>{E.abort(),jn(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(M=>{clearTimeout(b),M.ok?jn(m,"TestPingServer: ok",!0,d):jn(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),jn(m,"TestPingServer: error",!1,d)})}function jn(l,d,m,E,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),E(m)}catch{}}function yA(){this.g=new Zx}function vA(l,d,m){const E=m||"";try{zm(l,function(b,M){let B=b;c(b)&&(B=nc(b)),d.push(E+M+"="+encodeURIComponent(B))})}catch(b){throw d.push(E+"type="+encodeURIComponent("_badmap")),b}}function Ta(l){this.l=l.Ub||null,this.j=l.eb||!1}T(Ta,rc),Ta.prototype.g=function(){return new Sa(this.l,this.j)},Ta.prototype.i=function(l){return function(){return l}}({});function Sa(l,d){Je.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Sa,Je),t=Sa.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Rs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Cs(this):Rs(this),this.readyState==3&&Xm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Cs(this))},t.Qa=function(l){this.g&&(this.response=l,Cs(this))},t.ga=function(){this.g&&Cs(this)};function Cs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rs(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Rs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ym(l){let d="";return O(l,function(m,E){d+=E,d+=":",d+=m,d+=`\r
`}),d}function fc(l,d,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Ym(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):de(l,d,m))}function Ae(l){Je.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ae,Je);var _A=/^https?$/i,wA=["POST","PUT"];t=Ae.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oc.g(),this.v=this.o?Im(this.o):Im(oc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(M){Jm(this,M);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var b in E)m.set(b,E[b]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const M of E.keys())m.set(M,E.get(M));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),b=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wA,d,void 0))||E||b||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of m)this.g.setRequestHeader(M,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tg(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){Jm(this,M)}};function Jm(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Zm(l),xa(l)}function Zm(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ht(this,"complete"),ht(this,"abort"),xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xa(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eg(this):this.bb())},t.bb=function(){eg(this)};function eg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||yn(l)!=4||l.Z()!=2)){if(l.u&&yn(l)==4)Tm(l.Ea,0,l);else if(ht(l,"readystatechange"),yn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var E;if(E=B===0){var b=String(l.D).match(Wm)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),E=!_A.test(b?b.toLowerCase():"")}m=E}if(m)ht(l,"complete"),ht(l,"success");else{l.m=6;try{var M=2<yn(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",Zm(l)}}finally{xa(l)}}}}function xa(l,d){if(l.g){tg(l);const m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ht(l,"ready");try{m.onreadystatechange=E}catch{}}}function tg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function yn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Jx(d)}};function ng(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function EA(l){const d={};l=(l.g&&2<=yn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(_(l[E]))continue;var m=N(l[E]);const b=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=d[b]||[];d[b]=M,M.push(m)}I(d,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function rg(l){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,l),this.cb=ks("retryDelaySeedMs",1e4,l),this.Wa=ks("forwardChannelMaxRetries",2,l),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new jm(l&&l.concurrentRequestLimit),this.Da=new yA,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rg.prototype,t.la=8,t.G=1,t.connect=function(l,d,m,E){dt(0),this.W=l,this.H=d||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=dg(this,null,this.W),Ia(this)};function pc(l){if(ig(l),l.G==3){var d=l.U++,m=gn(l.I);if(de(m,"SID",l.K),de(m,"RID",d),de(m,"TYPE","terminate"),Ns(l,m),d=new Mn(l,l.j,d),d.L=2,d.v=Ea(gn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=fg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),va(d)}hg(l)}function Aa(l){l.g&&(gc(l),l.g.cancel(),l.g=null)}function ig(l){Aa(l),l.u&&(a.clearTimeout(l.u),l.u=null),Pa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ia(l){if(!Fm(l.h)&&!l.s){l.s=!0;var d=l.Ga;he||Q(),$||(he(),$=!0),G.add(d,l),l.B=0}}function TA(l,d){return Um(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ts(p(l.Ga,l,d),cg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const b=new Mn(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),P(M,this.S)):M=this.S),this.m!==null||this.O||(b.H=M,M=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=og(this,b,d),m=gn(this.I),de(m,"RID",l),de(m,"CVER",22),this.D&&de(m,"X-HTTP-Session-Id",this.D),Ns(this,m),M&&(this.O?d="headers="+encodeURIComponent(String(Ym(M)))+"&"+d:this.m&&fc(m,this.m,M)),dc(this.h,b),this.Ua&&de(m,"TYPE","init"),this.P?(de(m,"$req",d),de(m,"SID","null"),b.T=!0,lc(b,m,null)):lc(b,m,d),this.G=2}}else this.G==3&&(l?sg(this,l):this.i.length==0||Fm(this.h)||sg(this))};function sg(l,d){var m;d?m=d.l:m=l.U++;const E=gn(l.I);de(E,"SID",l.K),de(E,"RID",m),de(E,"AID",l.T),Ns(l,E),l.m&&l.o&&fc(E,l.m,l.o),m=new Mn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=og(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),dc(l.h,m),lc(m,E,d)}function Ns(l,d){l.H&&O(l.H,function(m,E){de(d,E,m)}),l.l&&zm({},function(m,E){de(d,E,m)})}function og(l,d,m){m=Math.min(l.i.length,m);var E=l.l?p(l.l.Na,l.l,l):null;e:{var b=l.i;let M=-1;for(;;){const B=["count="+m];M==-1?0<m?(M=b[0].g,B.push("ofs="+M)):M=0:B.push("ofs="+M);let ue=!0;for(let We=0;We<m;We++){let ie=b[We].g;const Ze=b[We].map;if(ie-=M,0>ie)M=Math.max(0,b[We].g-100),ue=!1;else try{vA(Ze,B,"req"+ie+"_")}catch{E&&E(Ze)}}if(ue){E=B.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,E}function ag(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;he||Q(),$||(he(),$=!0),G.add(d,l),l.v=0}}function mc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ts(p(l.Fa,l),cg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,lg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ts(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Aa(this),lg(this))};function gc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function lg(l){l.g=new Mn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=gn(l.qa);de(d,"RID","rpc"),de(d,"SID",l.K),de(d,"AID",l.T),de(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&de(d,"TO",l.ja),de(d,"TYPE","xmlhttp"),Ns(l,d),l.m&&l.o&&fc(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Ea(gn(d)),m.m=null,m.P=!0,Lm(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),mc(this),dt(19))};function Pa(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function ug(l,d){var m=null;if(l.g==d){Pa(l),gc(l),l.g=null;var E=2}else if(hc(l.h,d))m=d.D,Bm(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var b=l.B;E=ma(),ht(E,new Nm(E,m)),Ia(l)}else ag(l);else if(b=d.s,b==3||b==0&&0<d.X||!(E==1&&TA(l,d)||E==2&&mc(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),b){case 1:Cr(l,5);break;case 4:Cr(l,10);break;case 3:Cr(l,6);break;default:Cr(l,2)}}}function cg(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function Cr(l,d){if(l.j.info("Error code "+d),d==2){var m=p(l.fb,l),E=l.Xa;const b=!E;E=new Pr(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_a(E,"https"),Ea(E),b?mA(E.toString(),m):gA(E.toString(),m)}else dt(2);l.G=0,l.l&&l.l.sa(d),hg(l),ig(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function hg(l){if(l.G=0,l.ka=[],l.l){const d=$m(l.h);(d.length!=0||l.i.length!=0)&&(C(l.ka,d),C(l.ka,l.i),l.h.i.length=0,S(l.i),l.i.length=0),l.l.ra()}}function dg(l,d,m){var E=m instanceof Pr?gn(m):new Pr(m);if(E.g!="")d&&(E.g=d+"."+E.g),wa(E,E.s);else{var b=a.location;E=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var M=new Pr(null);E&&_a(M,E),d&&(M.g=d),b&&wa(M,b),m&&(M.l=m),E=M}return m=l.D,d=l.ya,m&&d&&de(E,m,d),de(E,"VER",l.la),Ns(l,E),E}function fg(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ae(new Ta({eb:m})):new Ae(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pg(){}t=pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(l,d){return new xt(l,d)};function xt(l,d){Je.call(this),this.g=new rg(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!_(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new li(this)}T(xt,Je),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){pc(this.g)},xt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=nc(l),l=m);d.i.push(new sA(d.Ya++,l)),d.G==3&&Ia(d)},xt.prototype.N=function(){this.g.l=null,delete this.j,pc(this.g),delete this.g,xt.aa.N.call(this)};function mg(l){ic.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}T(mg,ic);function gg(){sc.call(this),this.status=1}T(gg,sc);function li(l){this.g=l}T(li,pg),li.prototype.ua=function(){ht(this.g,"a")},li.prototype.ta=function(l){ht(this.g,new mg(l))},li.prototype.sa=function(l){ht(this.g,new gg)},li.prototype.ra=function(){ht(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,WS=function(){return new Ca},zS=function(){return ma()},$S=Ar,Md={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ga.NO_ERROR=0,ga.TIMEOUT=8,ga.HTTP_ERROR=6,wl=ga,Vm.COMPLETE="complete",BS=Vm,Pm.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Xs=Pm,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,US=Ae}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const S0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Lp("@firebase/firestore");function Bs(){return Jr.logLevel}function W(t,...e){if(Jr.logLevel<=Z.DEBUG){const n=e.map(Fp);Jr.debug(`Firestore (${ms}): ${t}`,...n)}}function Nn(t,...e){if(Jr.logLevel<=Z.ERROR){const n=e.map(Fp);Jr.error(`Firestore (${ms}): ${t}`,...n)}}function Wo(t,...e){if(Jr.logLevel<=Z.WARN){const n=e.map(Fp);Jr.warn(`Firestore (${ms}): ${t}`,...n)}}function Fp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: `+t;throw Nn(e),new Error(e)}function Ce(t,e){t||Y()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class J2{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new X2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new yt(e)}}class Z2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Z2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new tL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=rL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new ze(0,0))}static max(){return new X(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ho.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ho?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends Ho{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const sL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Ho{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return sL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Ee.fromString(e))}static fromName(e){return new K(Ee.fromString(e).popFirst(5))}static empty(){return new K(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Ee(e.slice()))}}function oL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new mr(i,K.empty(),e)}function aL(t){return new mr(t.readTime,t.key,-1)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(X.min(),K.empty(),-1)}static max(){return new mr(X.max(),K.empty(),-1)}}function lL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==uL)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function hL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Bp.oe=-1;function Uu(t){return t==null}function au(t){return t===0&&1/t==-1/0}function dL(t){return typeof t=="number"&&Number.isInteger(t)&&!au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Za(this.root,e,this.comparator,!1)}getReverseIterator(){return new Za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Za(this.root,e,this.comparator,!0)}}class Za{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=i??Ke.EMPTY,this.right=s??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ke(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ke.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A0(this.data.getIterator())}getIteratorFrom(e){return new A0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class A0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Qe(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qS("Invalid base64 string: "+s):s}}(e);return new Ye(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ye(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const fL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=fL.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?Ye.fromBase64String(t):Ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zp(t){const e=t.mapValue.fields.__previous_value__;return $p(e)?zp(e):e}function qo(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Ko{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ko("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el={mapValue:{}};function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$p(t)?4:gL(t)?9007199254740991:mL(t)?10:11:Y()}function hn(t,e){if(t===e)return!0;const n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gr(i.timestampValue),a=gr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zr(i.bytesValue).isEqual(Zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?au(o)===au(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ns(t.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(x0(o)!==x0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!hn(o[u],a[u])))return!1;return!0}(t,e);default:return Y()}}function Go(t,e){return(t.values||[]).find(n=>hn(n,e))!==void 0}function rs(t,e){if(t===e)return 0;const n=ei(t),r=ei(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ne(s.integerValue||s.doubleValue),u=Ne(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return I0(t.timestampValue,e.timestampValue);case 4:return I0(qo(t),qo(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zr(s),u=Zr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=se(a[c],u[c]);if(h!==0)return h}return se(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=se(Ne(s.latitude),Ne(o.latitude));return a!==0?a:se(Ne(s.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return P0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const f=s.fields||{},p=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,T=(u=p.value)===null||u===void 0?void 0:u.arrayValue,S=se(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:P0(v,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===el.mapValue&&o===el.mapValue)return 0;if(s===el.mapValue)return 1;if(o===el.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=se(u[f],h[f]);if(p!==0)return p;const v=rs(a[u[f]],c[h[f]]);if(v!==0)return v}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y()}}function I0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=gr(t),r=gr(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function P0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=rs(n[i],r[i]);if(s)return s}return se(n.length,r.length)}function is(t){return Od(t)}function Od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Od(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Od(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function C0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jd(t){return!!t&&"integerValue"in t}function Wp(t){return!!t&&"arrayValue"in t}function R0(t){return!!t&&"nullValue"in t}function k0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fh(t){return!!t&&"mapValue"in t}function mL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function mo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mo(n)}setAll(e){let n=at.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=mo(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){la(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(mo(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ot(e,0,X.min(),X.min(),X.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new ot(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new ot(e,2,n,X.min(),X.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,X.min(),X.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.position=e,this.inclusive=n}}function N0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=rs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function V0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n="asc"){this.field=e,this.dir=n}}function yL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{}class Oe extends KS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _L(e,n,r):n==="array-contains"?new TL(e,r):n==="in"?new SL(e,r):n==="not-in"?new xL(e,r):n==="array-contains-any"?new AL(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wL(e,r):new EL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(rs(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends KS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zt(e,n)}matches(e){return GS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function GS(t){return t.op==="and"}function QS(t){return vL(t)&&GS(t)}function vL(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function Fd(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+is(t.value);if(QS(t))return t.filters.map(e=>Fd(e)).join(",");{const e=t.filters.map(n=>Fd(n)).join(",");return`${t.op}(${e})`}}function XS(t,e){return t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&hn(r.value,i.value)}(t,e):t instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XS(o,i.filters[a]),!0):!1}(t,e):void Y()}function YS(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${is(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(YS).join(" ,")+"}"}(t):"Filter"}class _L extends Oe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class wL extends Oe{constructor(e,n){super(e,"in",n),this.keys=JS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EL extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=JS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class TL extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wp(n)&&Go(n.arrayValue,this.value)}}class SL extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Go(this.value.arrayValue,n)}}class xL extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Go(this.value.arrayValue,n)}}class AL extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Go(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function D0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IL(t,e,n,r,i,s,o)}function Hp(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>is(r)).join(",")),e.ue=n}return e.ue}function qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!V0(t.startAt,e.startAt)&&V0(t.endAt,e.endAt)}function Ud(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PL(t,e,n,r,i,s,o,a){return new gs(t,e,n,r,i,s,o,a)}function ZS(t){return new gs(t)}function b0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ex(t){return t.collectionGroup!==null}function go(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(at.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qo(s,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new Qo(at.keyField(),r))}return e.ce}function un(t){const e=te(t);return e.le||(e.le=CL(e,go(t))),e.le}function CL(t,e){if(t.limitType==="F")return D0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qo(i.field,s)});const n=t.endAt?new lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lu(t.startAt.position,t.startAt.inclusive):null;return D0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bd(t,e){const n=t.filters.concat([e]);return new gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uu(t,e,n){return new gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bu(t,e){return qp(un(t),un(e))&&t.limitType===e.limitType}function tx(t){return`${Hp(un(t))}|lt:${t.limitType}`}function fi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YS(i)).join(", ")}]`),Uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>is(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function $u(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of go(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=N0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,go(r),i)||r.endAt&&!function(o,a,u){const c=N0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,go(r),i))}(t,e)}function RL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nx(t){return(e,n)=>{let r=!1;for(const i of go(t)){const s=kL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function kL(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?rs(u,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return HS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new be(K.comparator);function yr(){return NL}const rx=new be(K.comparator);function Ys(...t){let e=rx;for(const n of t)e=e.insert(n.key,n);return e}function VL(t){let e=rx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ur(){return yo()}function ix(){return yo()}function yo(){return new ys(t=>t.toString(),(t,e)=>t.isEqual(e))}const DL=new Qe(K.comparator);function ne(...t){let e=DL;for(const n of t)e=e.add(n);return e}const bL=new Qe(se);function LL(){return bL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:au(e)?"-0":e}}function sx(t){return{integerValue:""+t}}function ML(t,e){return dL(e)?sx(e):Kp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this._=void 0}}function OL(t,e,n){return t instanceof $d?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$p(s)&&(s=zp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cu?ox(t,e):t instanceof hu?ax(t,e):function(i,s){const o=FL(i,s),a=L0(o)+L0(i.Pe);return jd(o)&&jd(i.Pe)?sx(a):Kp(i.serializer,a)}(t,e)}function jL(t,e,n){return t instanceof cu?ox(t,e):t instanceof hu?ax(t,e):n}function FL(t,e){return t instanceof zd?function(r){return jd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class $d extends zu{}class cu extends zu{constructor(e){super(),this.elements=e}}function ox(t,e){const n=lx(e);for(const r of t.elements)n.some(i=>hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class hu extends zu{constructor(e){super(),this.elements=e}}function ax(t,e){let n=lx(e);for(const r of t.elements)n=n.filter(i=>!hn(i,r));return{arrayValue:{values:n}}}class zd extends zu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function L0(t){return Ne(t.integerValue||t.doubleValue)}function lx(t){return Wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cu&&i instanceof cu||r instanceof hu&&i instanceof hu?ns(r.elements,i.elements,hn):r instanceof zd&&i instanceof zd?hn(r.Pe,i.Pe):r instanceof $d&&i instanceof $d}(t.transform,e.transform)}class qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gp{}function ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $L(t.key,qr.none()):new Qp(t.key,t.data,qr.none());{const n=t.data,r=rn.empty();let i=new Qe(at.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wu(t.key,r,new Xn(i.toArray()),qr.none())}}function BL(t,e,n){t instanceof Qp?function(i,s,o){const a=i.value.clone(),u=O0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Wu?function(i,s,o){if(!El(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=O0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(cx(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vo(t,e,n,r){return t instanceof Qp?function(s,o,a,u){if(!El(s.precondition,o))return a;const c=s.value.clone(),h=j0(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wu?function(s,o,a,u){if(!El(s.precondition,o))return a;const c=j0(s.fieldTransforms,u,o),h=o.data;return h.setAll(cx(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return El(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function M0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ns(r,i,(s,o)=>UL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qp extends Gp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wu extends Gp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function O0(t,e,n){const r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jL(o,a,n[i]))}return r}function j0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,OL(s,o,e))}return r}class $L extends Gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&BL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ix();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ux(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ns(this.mutations,e.mutations,(n,r)=>M0(n,r))&&ns(this.baseMutations,e.baseMutations,(n,r)=>M0(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ee;function hx(t){if(t===void 0)return Nn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Le.OK:return U.OK;case Le.CANCELLED:return U.CANCELLED;case Le.UNKNOWN:return U.UNKNOWN;case Le.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Le.INTERNAL:return U.INTERNAL;case Le.UNAVAILABLE:return U.UNAVAILABLE;case Le.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Le.NOT_FOUND:return U.NOT_FOUND;case Le.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Le.ABORTED:return U.ABORTED;case Le.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Le.DATA_LOSS:return U.DATA_LOSS;default:return Y()}}(ee=Le||(Le={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Wr([4294967295,4294967295],0);function F0(t){const e=qL().encode(t),n=new FS;return n.update(e),new Uint8Array(n.digest())}function U0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([i,s],0)]}class Xp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Js(`Invalid padding: ${n}`);if(r<0)throw new Js(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Js(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Js(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Wr.fromNumber(r)));return i.compare(KL)===1&&(i=new Wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=F0(e),[r,i]=U0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=F0(e),[r,i]=U0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Js extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hu(X.min(),i,new be(se),yr(),ne())}}class ua{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ua(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class dx{constructor(e,n){this.targetId=e,this.me=n}}class fx{constructor(e,n,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class B0{constructor(){this.fe=0,this.ge=z0(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new ua(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=z0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GL{constructor(e){this.Le=e,this.Be=new Map,this.ke=yr(),this.qe=$0(),this.Qe=new be(se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ud(s))if(r===0){const o=new K(s.path);this.Ue(n,o,ot.newNoDocument(o,X.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zr(r).toUint8Array()}catch(u){if(u instanceof qS)return Wo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Xp(o,i,s)}catch(u){return Wo(u instanceof Js?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ud(a.target)){const u=new K(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ot.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Hu(e,n,this.Qe,this.ke,r);return this.ke=yr(),this.qe=$0(),this.Qe=new be(se),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new B0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qe(se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new B0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $0(){return new be(K.comparator)}function z0(){return new be(K.comparator)}const QL={asc:"ASCENDING",desc:"DESCENDING"},XL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YL={and:"AND",or:"OR"};class JL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wd(t,e){return t.useProto3Json||Uu(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function px(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Bi(t){return Ce(!!t),X.fromTimestamp(function(n){const r=gr(n);return new ze(r.seconds,r.nanos)}(t))}function mx(t,e){return qd(t,e).canonicalString()}function qd(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gx(t){const e=Ee.fromString(t);return Ce(Ex(e)),e}function ph(t,e){const n=gx(e);if(n.get(1)!==t.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(vx(n))}function yx(t,e){return mx(t.databaseId,e)}function ZL(t){const e=gx(t);return e.length===4?Ee.emptyPath():vx(e)}function W0(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vx(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ce(h===void 0||typeof h=="string"),Ye.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ye.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:hx(c.code);return new H(h,c.message||"")}(o);n=new fx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ph(t,r.document.name),s=Bi(r.document.updateTime),o=r.document.createTime?Bi(r.document.createTime):X.min(),a=new rn({mapValue:{fields:r.document.fields}}),u=ot.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Tl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ph(t,r.document),s=r.readTime?Bi(r.readTime):X.min(),o=ot.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Tl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ph(t,r.document),s=r.removedTargetIds||[];n=new Tl([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new HL(i,s),a=r.targetId;n=new dx(a,o)}}return n}function tM(t,e){return{documents:[yx(t,e.path)]}}function nM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yx(t,i);const s=function(c){if(c.length!==0)return wx(Zt.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:pi(p.field),direction:sM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Wd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function rM(t){let e=ZL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=_x(f);return p instanceof Zt&&QS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(T){return new Qo(mi(T.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Uu(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,v=f.values||[];return new lu(v,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,v=f.values||[];return new lu(v,p)}(n.endAt)),PL(e,i,o,s,a,"F",u,c)}function iM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _x(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mi(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mi(n.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=mi(n.unaryFilter.field);return Oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mi(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(mi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>_x(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function sM(t){return QL[t]}function oM(t){return XL[t]}function aM(t){return YL[t]}function pi(t){return{fieldPath:t.canonicalString()}}function mi(t){return at.fromServerFormat(t.fieldPath)}function wx(t){return t instanceof Oe?function(n){if(n.op==="=="){if(k0(n.value))return{unaryFilter:{field:pi(n.field),op:"IS_NAN"}};if(R0(n.value))return{unaryFilter:{field:pi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k0(n.value))return{unaryFilter:{field:pi(n.field),op:"IS_NOT_NAN"}};if(R0(n.value))return{unaryFilter:{field:pi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pi(n.field),op:oM(n.op),value:n.value}}}(t):t instanceof Zt?function(n){const r=n.getFilters().map(i=>wx(i));return r.length===1?r[0]:{compositeFilter:{op:aM(n.op),filters:r}}}(t):Y()}function Ex(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,i,s=X.min(),o=X.min(),a=Ye.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Yn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.ct=e}}function uM(t){const e=rM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.un=new hM}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(mr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class hM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ss(0)}static kn(){return new ss(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.changes=new ys(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vo(r.mutation,i,Xn.empty(),ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=Ur();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ys();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=yr();const o=yo(),a=function(){return yo()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Wu)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),vo(h.mutation,c,h.mutation.getFieldMask(),ze.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new fM(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=yo();let i=new be((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Xn.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(i.get(a.batchId)||ne()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=ix();h.forEach(p=>{if(!s.has(p)){const v=ux(n.get(p),r.get(p));v!==null&&f.set(p,v),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ex(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Ur());let a=-1,u=s;return o.next(c=>j.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ne())).next(h=>({batchId:a,changes:VL(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Ys();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ys();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,u=>{const c=function(f,p){return new gs(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ot.newInvalidDocument(h)))});let a=Ys();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&vo(h.mutation,c,Xn.empty(),ze.now()),$u(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bi(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:uM(i.bundledQuery),readTime:Bi(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.overlays=new be(K.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Ur(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ur(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ur(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new WL(n,r));let s=this.Ir.get(n);s===void 0&&(s=ne(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.Tr=new Qe(Ue.Er),this.dr=new Qe(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new Ee([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new Ee([])),r=new Ue(n,e),i=new Ue(n,e+1);let s=ne();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||se(e.wr,n.wr)}static Ar(e,n){return se(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qe(Ue.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ue(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(se);return n.forEach(i=>{const s=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Ue(new K(s),0);let a=new Qe(se);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.Mr=e,this.docs=function(){return new be(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ot.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=yr();const o=n.path,a=new K(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||lL(aL(h),r)<=0||(i.has(h.key)||$u(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wM(this)}getSize(e){return j.resolve(this.size)}}class wM extends dM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.persistence=e,this.Nr=new ys(n=>Hp(n),qp),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yp,this.targetCount=0,this.kr=ss.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ss(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Bp(0),this.Kr=!1,this.Kr=!0,this.$r=new yM,this.referenceDelegate=e(this),this.Ur=new EM(this),this.indexManager=new cM,this.remoteDocumentCache=function(i){return new _M(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lM(n),this.Gr=new mM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new SM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class SM extends cL{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Jr=new Yp,this.Yr=null}static Zr(e){return new Jp(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Zp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tb()?8:hL(Jt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new xM;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bs()<=Z.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",fi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Bs()<=Z.DEBUG&&W("QueryEngine","Query:",fi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bs()<=Z.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",fi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):j.resolve())}Yi(e,n){if(b0(n))return j.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uu(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,uu(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return b0(n)||i.isEqual(X.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?j.resolve(null):(Bs()<=Z.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fi(n)),this.rs(e,o,n,oL(i,-1)).next(a=>a))})}ts(e,n){let r=new Qe(nx(e));return n.forEach((i,s)=>{$u(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bs()<=Z.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",fi(n)),this.Ji.getDocumentsMatchingQuery(e,n,mr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new be(se),this._s=new ys(s=>Hp(s),qp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function PM(t,e,n,r){return new IM(t,e,n,r)}async function Tx(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ne();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Sx(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function CM(t,e){const n=te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let v=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Ye.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(f,v),function(S,C,w){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=yr(),c=ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(RM(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(X.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function RM(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=yr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function kM(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Yn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kd(t,e,n){const r=te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!aa(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function H0(t,e,n){const r=te(t);let i=X.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=te(u),p=f._s.get(h);return p!==void 0?j.resolve(f.os.get(p)):f.Ur.getTargetData(c,h)}(r,o,un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:ne())).next(a=>(NM(r,RL(e),a),{documents:a,Ts:s})))}function NM(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class q0{constructor(){this.activeTargetIds=LL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VM{constructor(){this.so=new q0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new q0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=null;function mh(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection";class MM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=mh(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Wo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=bM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=mh();return new Promise((o,a)=>{const u=new US;u.setWithCredentials(!0),u.listenOnce(BS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wl.NO_ERROR:const h=u.getResponseJson();W(rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case wl.TIMEOUT:W(rt,`RPC '${e}' ${s} timed out`),a(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const f=u.getStatus();if(W(rt,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const T=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(v.status);a(new H(T,v.message))}else a(new H(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(U.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(rt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(rt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=mh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WS(),a=zS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");W(rt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let p=!1,v=!1;const T=new LM({Io:C=>{v?W(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(W(rt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),W(rt,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),S=(C,w,_)=>{C.listen(w,x=>{try{_(x)}catch(V){setTimeout(()=>{throw V},0)}})};return S(f,Xs.EventType.OPEN,()=>{v||(W(rt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),S(f,Xs.EventType.CLOSE,()=>{v||(v=!0,W(rt,`RPC '${e}' stream ${i} transport closed`),T.So())}),S(f,Xs.EventType.ERROR,C=>{v||(v=!0,Wo(rt,`RPC '${e}' stream ${i} transport errored:`,C),T.So(new H(U.UNAVAILABLE,"The operation could not be completed")))}),S(f,Xs.EventType.MESSAGE,C=>{var w;if(!v){const _=C.data[0];Ce(!!_);const x=_,V=x.error||((w=x[0])===null||w===void 0?void 0:w.error);if(V){W(rt,`RPC '${e}' stream ${i} received error:`,V);const L=V.status;let O=function(A){const P=Le[A];if(P!==void 0)return hx(P)}(L),I=V.message;O===void 0&&(O=U.INTERNAL,I="Unknown error status: "+L+" with message "+V.message),v=!0,T.So(new H(O,I)),f.close()}else W(rt,`RPC '${e}' stream ${i} received:`,_),T.bo(_)}}),S(a,$S.STAT_EVENT,C=>{C.stat===Md.PROXY?W(rt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Md.NOPROXY&&W(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return new JL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Nn(n.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jM extends OM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=eM(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Bi(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=W0(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Ud(u)?{documents:tM(s,u)}:{query:nM(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=px(s,o.resumeToken);const c=Wd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Hd(s,o.snapshotVersion.toTimestamp());const c=Wd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=iM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=W0(this.serializer),n.removeTarget=e,this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,qd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,qd(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class UM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Nn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ha(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=te(u);c.L_.add(4),await ca(c),c.q_.set("Unknown"),c.L_.delete(4),await Ku(c)}(this))})}),this.q_=new UM(r,i)}}async function Ku(t){if(ha(t))for(const e of t.B_)await e(!0)}async function ca(t){for(const e of t.B_)await e(!1)}function Ax(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),rm(n)?nm(n):vs(n).r_()&&tm(n,e))}function em(t,e){const n=te(t),r=vs(n);n.N_.delete(e),r.r_()&&Ix(n,e),n.N_.size===0&&(r.r_()?r.o_():ha(n)&&n.q_.set("Unknown"))}function tm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vs(t).A_(e)}function Ix(t,e){t.Q_.xe(e),vs(t).R_(e)}function nm(t){t.Q_=new GL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vs(t).start(),t.q_.v_()}function rm(t){return ha(t)&&!vs(t).n_()&&t.N_.size>0}function ha(t){return te(t).L_.size===0}function Px(t){t.Q_=void 0}async function $M(t){t.q_.set("Online")}async function zM(t){t.N_.forEach((e,n)=>{tm(t,e)})}async function WM(t,e){Px(t),rm(t)?(t.q_.M_(e),nm(t)):t.q_.set("Unknown")}async function HM(t,e,n){if(t.q_.set("Online"),e instanceof fx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await G0(t,r)}else if(e instanceof Tl?t.Q_.Ke(e):e instanceof dx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await Sx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),Ix(s,u);const f=new Yn(h.target,u,c,h.sequenceNumber);tm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await G0(t,r)}}async function G0(t,e,n){if(!aa(e))throw e;t.L_.add(1),await ca(t),t.q_.set("Offline"),n||(n=()=>Sx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ku(t)})}async function Q0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=ha(n);n.L_.add(3),await ca(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ku(n)}async function qM(t,e){const n=te(t);e?(n.L_.delete(2),await Ku(n)):e||(n.L_.add(2),await ca(n),n.q_.set("Unknown"))}function vs(t){return t.K_||(t.K_=function(n,r,i){const s=te(n);return s.w_(),new jM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:$M.bind(null,t),Ro:zM.bind(null,t),mo:WM.bind(null,t),d_:HM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),rm(t)?nm(t):t.q_.set("Unknown")):(await t.K_.stop(),Px(t))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new im(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cx(t,e){if(Nn("AsyncQueue",`${e}: ${t}`),aa(t))return new H(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Ys(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new $i(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $i)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $i;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.W_=new be(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class os{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new os(e,n,$i.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GM{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=Y0(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function Y0(){return new ys(t=>tx(t),Bu)}async function QM(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new KM,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Cx(o,`Initialization of query '${fi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&sm(n)}async function XM(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YM(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&sm(n)}function JM(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function sm(t){t.Y_.forEach(e=>{e.next()})}var Gd,J0;(J0=Gd||(Gd={})).ea="default",J0.Cache="cache";class ZM{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.key=e}}class kx{constructor(e){this.key=e}}class eO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=nx(e),this.Ra=new $i(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new X0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),v=$u(this.query,f)?f:null,T=!!p&&this.mutatedKeys.has(p.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;p&&v?p.data.isEqual(v.data)?T!==S&&(r.track({type:3,doc:v}),C=!0):this.ga(p,v)||(r.track({type:2,doc:v}),C=!0,(u&&this.Aa(v,u)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!p&&v?(r.track({type:0,doc:v}),C=!0):p&&!v&&(r.track({type:1,doc:p}),C=!0,(u||c)&&(a=!0)),C&&(v?(o=o.add(v),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(v,T){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return S(v)-S(T)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new os(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new X0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new kx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Rx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return os.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nO{constructor(e){this.key=e,this.va=!1}}class rO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ys(a=>tx(a),Bu),this.Ma=new Map,this.xa=new Set,this.Oa=new be(K.comparator),this.Na=new Map,this.La=new Yp,this.Ba={},this.ka=new Map,this.qa=ss.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iO(t,e,n=!0){const r=Lx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Nx(r,e,n,!0),i}async function sO(t,e){const n=Lx(t);await Nx(n,e,!0,!1)}async function Nx(t,e,n,r){const i=await kM(t.localStore,un(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await oO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ax(t.remoteStore,i),a}async function oO(t,e,n,r,i){t.Ka=(f,p,v)=>async function(S,C,w,_){let x=C.view.ma(w);x.ns&&(x=await H0(S.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,x)));const V=_&&_.targetChanges.get(C.targetId),L=_&&_.targetMismatches.get(C.targetId)!=null,O=C.view.applyChanges(x,S.isPrimaryClient,V,L);return e_(S,C.targetId,O.wa),O.snapshot}(t,f,p,v);const s=await H0(t.localStore,e,!0),o=new eO(e,s.Ts),a=o.ma(s.documents),u=ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);e_(t,n,c.wa);const h=new tO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function aO(t,e,n){const r=te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Bu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&em(r.remoteStore,i.targetId),Qd(r,i.targetId)}).catch(Up)):(Qd(r,i.targetId),await Kd(r.localStore,i.targetId,!0))}async function lO(t,e){const n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),em(n.remoteStore,r.targetId))}async function Vx(t,e){const n=te(t);try{const r=await CM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ce(o.va):i.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await bx(n,r,e)}catch(r){await Up(r)}}function Z0(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=te(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&sm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uO(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new be(K.comparator);o=o.insert(s,ot.newNoDocument(s,X.min()));const a=ne().add(s),u=new Hu(X.min(),new Map,new be(se),o,a);await Vx(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),om(r)}else await Kd(r.localStore,e,!1).then(()=>Qd(r,e,n)).catch(Up)}function Qd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Dx(t,r)})}function Dx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(em(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),om(t))}function e_(t,e,n){for(const r of n)r instanceof Rx?(t.La.addReference(r.key,e),cO(t,r)):r instanceof kx?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Dx(t,r.key)):Y()}function cO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),om(t))}function om(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new nO(n)),t.Oa=t.Oa.insert(n,r),Ax(t.remoteStore,new Yn(un(ZS(n.path)),r,"TargetPurposeLimboResolution",Bp.oe))}}async function bx(t,e,n){const r=te(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Zp.Wi(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=te(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(c,p=>j.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>j.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!aa(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const v=h.os.get(p),T=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(p,S)}}}(r.localStore,s))}async function hO(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Tx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new H(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bx(n,r.hs)}}function dO(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Lx(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uO.bind(null,e),e.Ca.d_=YM.bind(null,e.eventManager),e.Ca.$a=JM.bind(null,e.eventManager),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return PM(this.persistence,new AM,e.initialUser,this.serializer)}Ga(e){return new TM(Jp.Zr,this.serializer)}Wa(e){return new VM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class Xd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hO.bind(null,this.syncEngine),await qM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GM}()}createDatastore(e){const n=qu(e.databaseInfo.databaseId),r=function(s){return new MM(s)}(e.databaseInfo);return function(s,o,a,u){return new FM(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new BM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Z0(this.syncEngine,n,0),function(){return K0.D()?new K0:new DM}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const f=new rO(i,s,o,a,u,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ca(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Nn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=iL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Tx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mO(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Q0(e.remoteStore,i)),t._onlineComponents=e}async function mO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await yh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Wo("Error using user provided cache. Falling back to memory cache: "+n),await yh(t,new du)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await yh(t,new du);return t._offlineComponents}async function gO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await t_(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await t_(t,new Xd))),t._onlineComponents}async function yO(t){const e=await gO(t),n=e.eventManager;return n.onListen=iO.bind(null,e.syncEngine),n.onUnlisten=aO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lO.bind(null,e.syncEngine),n}function vO(t,e,n={}){const r=new Hr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new fO({next:p=>{h.Za(),o.enqueueAndForget(()=>XM(s,f)),p.fromCache&&u.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new ZM(a,h,{includeMetadataChanges:!0,_a:!0});return QM(s,f)}(await yO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;function _O(t,e,n,r){if(e===!0&&r===!0)throw new H(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r_(t){if(K.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function i_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gu(t);throw new H(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_O("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ox{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Y2;switch(r.type){case"firstParty":return new eL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n_.get(n);r&&(W("ComponentProvider","Removing Datastore"),n_.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class bn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class zi extends xr{constructor(e,n,r){super(e,n,ZS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new K(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function wO(t,e,...n){if(t=pr(t),t instanceof Ox){const r=Ee.fromString(e,...n);return r_(r),new zi(t,null,r)}{if(!(t instanceof bn||t instanceof zi))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return r_(r),new zi(t.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xx(this,"async_queue_retry"),this.Vu=()=>{const r=gh();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Hr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!aa(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Nn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=im.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class jx extends Ox{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new o_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o_(e),this._firestoreClient=void 0,await e}}}function EO(t){if(t._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TO(t),t._firestoreClient}function TO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new pL(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Mx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._byteString=e}static fromBase64String(e){try{return new as(Ye.fromBase64String(e))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new as(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=/^__.*__$/;function Bx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class um{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Bx(this.Cu)&&SO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qu(e)}Qu(e,n,r,i=!1){return new um({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AO(t){const e=t._freezeSettings(),n=qu(t._databaseId);return new xO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IO(t,e,n,r=!1){return cm(n,t.Qu(r?4:3,e))}function cm(t,e){if($x(t=pr(t)))return CO("Unsupported field value:",e,t),PO(t,e);if(t instanceof Ux)return function(r,i){if(!Bx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=cm(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ML(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ze.fromDate(r);return{timestampValue:Hd(i.serializer,s)}}if(r instanceof ze){const s=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(i.serializer,s)}}if(r instanceof am)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof as)return{bytesValue:px(i.serializer,r._byteString)};if(r instanceof bn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Kp(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Gu(r)}`)}(t,e)}function PO(t,e){const n={};return HS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,(r,i)=>{const s=cm(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $x(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof am||t instanceof as||t instanceof bn||t instanceof Ux||t instanceof lm)}function CO(t,e,n){if(!$x(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Gu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}const RO=new RegExp("[~\\*/\\[\\]]");function kO(t,e,n){if(e.search(RO)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fx(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(U.INVALID_ARGUMENT,a+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NO extends zx{data(){return super.data()}}function hm(t,e){return typeof e=="string"?kO(t,e):e instanceof Fx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dm{}class fm extends dm{}function DO(t,e,...n){let r=[];e instanceof dm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof mm).length,a=s.filter(u=>u instanceof pm).length;if(o>1||o>0&&a>0)throw new H(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class pm extends fm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pm(e,n,r)}_apply(e){const n=this._parse(e);return Wx(e._query,n),new xr(e.firestore,e.converter,Bd(e._query,n))}_parse(e){const n=AO(e.firestore);return function(s,o,a,u,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){l_(f,h);const v=[];for(const T of f)v.push(a_(u,s,T));p={arrayValue:{values:v}}}else p=a_(u,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||l_(f,h),p=IO(a,o,f,h==="in"||h==="not-in");return Oe.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class mm extends dm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Wx(o,u),o=Bd(o,u)}(e._query,n),new xr(e.firestore,e.converter,Bd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gm extends fm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(s,o)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new gs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function bO(t,e="asc"){const n=e,r=hm("orderBy",t);return gm._create(r,n)}class ym extends fm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ym(e,n,r)}_apply(e){return new xr(e.firestore,e.converter,uu(e._query,this._limit,this._limitType))}}function LO(t){return ym._create("limit",t,"F")}function a_(t,e,n){if(typeof(n=pr(n))=="string"){if(n==="")throw new H(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ex(e)&&n.indexOf("/")!==-1)throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!K.isDocumentKey(r))throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return C0(t,new K(r))}if(n instanceof bn)return C0(t,n._key);throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gu(n)}.`)}function l_(t,e){if(!Array.isArray(t)||t.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wx(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MO{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return la(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ne(o.doubleValue));return new lm(s)}convertGeoPoint(e){return new am(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=gr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);Ce(Ex(r));const i=new Ko(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Nn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OO extends zx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Sl extends OO{data(e={}){return super.data(e)}}class jO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new nl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Sl(this._firestore,this._userDataWriter,r.key,r,new nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Sl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Sl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:FO(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class UO extends MO{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function BO(t){t=i_(t,xr);const e=i_(t.firestore,jx),n=EO(e),r=new UO(e);return VO(t._query),vO(n,t._query).then(i=>new jO(e,r,t,i))}(function(e,n=!0){(function(i){ms=i})(ju),ts(new es("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new jx(new J2(r.getProvider("auth-internal")),new nL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ur(S0,"4.7.3",e),ur(S0,"4.7.3","esm2017")})();const $O=!1;function zO(){return{app:null,auth:null,db:null}}async function WO(){return{uid:null}}async function HO(t,e){return!(Object.keys(t.solved||{}).length===cn.length)||t.submittedAchievement,!1}function qO({state:t,onToast:e}){var h,f;const[n,r]=k.useState([]),[i,s]=k.useState(!1),o=Object.keys(t.solved||{}).length,a=o===cn.length,u=(((h=t.profile)==null?void 0:h.firstName)||"").trim()&&(((f=t.profile)==null?void 0:f.department)||"").trim();k.useEffect(()=>{let p=!0;async function v(){s(!0);try{if(!$O){r([]);return}await WO();const{db:T}=zO(),S=DO(wO(T,"italyQuestLeaderboard"),bO("totalPoints","desc"),LO(50)),C=await BO(S),w=[];C.forEach(_=>w.push({id:_.id,..._.data()})),p&&r(w)}catch{p&&r([])}finally{p&&s(!1)}}return v(),()=>{p=!1}},[]);const c=k.useMemo(()=>n.slice(0,3),[n]);return g.jsxs("div",{className:"stack",children:[g.jsxs("section",{className:"page-head",children:[g.jsxs("div",{className:"crumbs",children:[g.jsx(lt,{to:"/",className:"crumb",children:"Home"}),g.jsx("span",{className:"crumb-sep",children:"/"}),g.jsx("span",{className:"crumb",children:"Leaderboard"})]}),g.jsx("h1",{className:"h1",children:"Italy Explorer Leaderboard"}),g.jsx("p",{className:"muted",children:"Shared live board for departments. Submit after completing all 10 locations."})]}),g.jsx(Gt,{title:"Leaderboard not configured (Firebase)",sub:"To enable the shared leaderboard, add Firebase env vars and deploy. Progress still works locally without it.",children:g.jsx("div",{className:"hint warn",children:"Create a free Firebase project  enable Firestore + Anonymous Auth  fill .env  redeploy."})}),g.jsxs(Gt,{title:"Your Status",sub:"Finish all 10 to unlock and submit your achievement.",children:[g.jsxs("div",{className:"row wrap",children:[g.jsxs("div",{className:"stat",children:[g.jsxs("div",{className:"stat-num mono",children:[o,"/10"]}),g.jsx("div",{className:"stat-label",children:"Locations"})]}),g.jsxs("div",{className:"stat",children:[g.jsx("div",{className:"stat-num mono",children:t.totalPoints||0}),g.jsx("div",{className:"stat-label",children:"Points"})]}),g.jsxs("div",{className:"stat",children:[g.jsx("div",{className:"stat-num",children:t.submittedAchievement?"":a?"":""}),g.jsx("div",{className:"stat-label",children:"Submitted"})]})]}),g.jsx("div",{className:"row",children:g.jsx(lt,{className:"btn",to:a?"/certificate":"/",children:a?"Go to Certificate":"Continue Hunt"})}),!u&&g.jsx("div",{className:"hint warn",children:"Add your name + department on the home page to submit."})]}),g.jsx(Gt,{title:"Top Explorers",sub:i?"Loading":"Ranked by points",children:g.jsxs("div",{className:"leader",children:[c.map((p,v)=>g.jsxs("div",{className:"leader-top",children:[g.jsx("div",{className:"medal",children:v===0?"":v===1?"":""}),g.jsxs("div",{className:"leader-name",children:[p.firstName," ",g.jsxs("span",{className:"muted",children:["(",p.department,")"]})]}),g.jsx("div",{className:"leader-points mono",children:p.totalPoints})]},p.id)),c.length===0&&g.jsx("div",{className:"muted",children:"No submissions yet. Be the first!"})]})}),g.jsxs(Gt,{title:"Full Board",sub:"Up to 50 submissions shown",children:[g.jsxs("div",{className:"table",children:[g.jsxs("div",{className:"trow thead",children:[g.jsx("div",{children:"#"}),g.jsx("div",{children:"Name"}),g.jsx("div",{children:"Department"}),g.jsx("div",{className:"right",children:"Points"})]}),n.map((p,v)=>g.jsxs("div",{className:"trow",children:[g.jsx("div",{className:"mono",children:v+1}),g.jsx("div",{children:p.firstName}),g.jsx("div",{className:"muted",children:p.department}),g.jsx("div",{className:"right mono",children:p.totalPoints})]},p.id)),n.length===0&&!i&&g.jsx("div",{className:"muted",children:"No entries yet."})]}),g.jsx("div",{className:"hint muted",children:"Ethics & Respect note: Win with integrityhelp others join in and avoid blocking access to QR stations."})]})]})}function KO({state:t,setState:e,onToast:n}){var v,T,S,C;const r=k.useRef(null),i=Object.keys(t.solved||{}).length,s=i===cn.length,o=((T=(v=t.profile)==null?void 0:v.firstName)==null?void 0:T.trim())||"Explorer",a=((C=(S=t.profile)==null?void 0:S.department)==null?void 0:C.trim())||"Department",[u,c]=k.useState(!1),h=s&&!t.submittedAchievement;async function f(){if(r.current){c(!0);try{const w=await BD(r.current,{cacheBust:!0,pixelRatio:2}),_=document.createElement("a");_.href=w,_.download=`Italy-Explorer-${o}.png`,_.click(),n==null||n("Certificate downloaded!","ok")}catch{n==null||n("Could not generate image on this device.","warn")}finally{c(!1)}}}async function p(){c(!0);try{await HO(t,e)?n==null||n("Submitted to leaderboard!","ok"):n==null||n("Leaderboard submit not available (Firebase not configured) or already submitted.","warn")}finally{c(!1)}}return g.jsxs("div",{className:"stack",children:[g.jsxs("section",{className:"page-head",children:[g.jsxs("div",{className:"crumbs",children:[g.jsx(lt,{to:"/",className:"crumb",children:"Home"}),g.jsx("span",{className:"crumb-sep",children:"/"}),g.jsx("span",{className:"crumb",children:"Certificate"})]}),g.jsx("h1",{className:"h1",children:"Italy Explorer"}),g.jsx("p",{className:"muted",children:s?"Achievement unlocked. Download or submit to the live leaderboard.":"Complete all 10 locations to unlock."})]}),g.jsx("div",{className:"certWrap",children:g.jsxs("div",{className:"certificate",ref:r,children:[g.jsxs("div",{className:"certTop",children:[g.jsx("div",{className:"certSeal","aria-hidden":"true",children:""}),g.jsxs("div",{children:[g.jsx("div",{className:"certTitle",children:"Italy Explorer Achievement"}),g.jsx("div",{className:"certSub",children:"Scavenger Hunt  Culture  Respect"})]})]}),g.jsxs("div",{className:"certMid",children:[g.jsx("div",{className:"certName",children:o}),g.jsx("div",{className:"certDept",children:a}),g.jsx("div",{className:"certLine"}),g.jsxs("div",{className:"certText",children:["Completed all ",g.jsx("strong",{children:"10"})," Italy locations and finished each minigame once."]}),g.jsxs("div",{className:"certPoints",children:["Total Points: ",g.jsx("span",{className:"mono",children:t.totalPoints||0})]})]}),g.jsxs("div",{className:"certBottom",children:[g.jsx("div",{className:"certFine",children:"Play fair  Cheer others on  Keep spaces welcoming"}),g.jsx("div",{className:"certStamp mono",children:new Date().toLocaleDateString()})]})]})}),g.jsxs(Gt,{title:"Next",sub:"Leaderboard is shared across devices (requires free Firebase).",children:[g.jsxs("div",{className:"row",children:[g.jsx("button",{className:"btn",onClick:f,disabled:!s||u,children:"Download Certificate"}),g.jsx("button",{className:"btn alt",onClick:p,disabled:!h||u,children:t.submittedAchievement?"Already Submitted":"Submit to Leaderboard"}),g.jsx(lt,{to:"/leaderboard",className:"ghost-btn",children:"View Leaderboard"})]}),!s&&g.jsxs("div",{className:"hint warn",children:["Complete all 10 first. Current: ",i,"/10"]})]})]})}function GO(){const t=typeof window<"u"?window.location.origin:"";return g.jsxs("div",{className:"stack",children:[g.jsxs("section",{className:"page-head",children:[g.jsxs("div",{className:"crumbs",children:[g.jsx(lt,{to:"/",className:"crumb",children:"Home"}),g.jsx("span",{className:"crumb-sep",children:"/"}),g.jsx("span",{className:"crumb",children:"Admin Links"})]}),g.jsx("h1",{className:"h1",children:"QR Link List (Admin)"}),g.jsx("p",{className:"muted",children:"Use these URLs to generate QR codes. Each QR should link to its location page."})]}),g.jsxs(Gt,{title:"Location URLs",sub:"Paste each URL into any QR generator.",children:[g.jsxs("div",{className:"table",children:[g.jsxs("div",{className:"trow thead",children:[g.jsx("div",{children:"#"}),g.jsx("div",{children:"Location"}),g.jsx("div",{children:"URL"})]}),cn.map(e=>{const n=`${t}/loc/${e.id}`;return g.jsxs("div",{className:"trow",children:[g.jsx("div",{className:"mono",children:e.id}),g.jsx("div",{children:e.city}),g.jsx("div",{className:"mono wrapline",children:n})]},e.id)})]}),g.jsx("div",{className:"hint muted",children:"Pro tip: place QR codes at eye level next to props/signage. Add a big number matching the QR to build urgency."})]})]})}function QO({msg:t,type:e="ok",onClose:n}){return k.useEffect(()=>{const r=setTimeout(()=>n==null?void 0:n(),2600);return()=>clearTimeout(r)},[n]),g.jsxs(Mu.div,{className:`toast ${e}`,initial:{opacity:0,y:18,filter:"blur(6px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},exit:{opacity:0,y:18,filter:"blur(6px)"},transition:{duration:.22},role:"status","aria-live":"polite",children:[g.jsx("div",{className:"toast-dot","aria-hidden":"true"}),g.jsx("div",{className:"toast-msg",children:t}),g.jsx("button",{className:"toast-x",onClick:n,"aria-label":"Close",children:""})]})}const Hx="italy_qr_quest_v1";function XO(){try{const t=localStorage.getItem(Hx);return t?JSON.parse(t):null}catch{return null}}function YO(t){localStorage.setItem(Hx,JSON.stringify(t))}function JO(){return{profile:{firstName:"",department:""},solved:{},totalPoints:0,achievementUnlocked:!1,submittedAchievement:!1,createdAt:Date.now(),updatedAt:Date.now()}}function ZO(){const t=ri(),[e,n]=k.useState(null),[r,i]=k.useState(()=>XO()||JO());k.useEffect(()=>{YO(r)},[r]),k.useEffect(()=>{const a=(r==null?void 0:r.theme)||localStorage.getItem("italy_theme")||"dark";document.documentElement.dataset.theme=a},[]);const s=k.useMemo(()=>t.pathname,[t.pathname]);function o(a,u="ok"){n({msg:a,type:u,k:Date.now()})}return g.jsxs("div",{className:"app-shell",children:[g.jsx(NV,{state:r,setState:i,onToast:o}),g.jsx("main",{className:"main",children:g.jsx(oC,{mode:"wait",children:g.jsx(Mu.div,{initial:{opacity:0,y:10,filter:"blur(6px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},exit:{opacity:0,y:-8,filter:"blur(6px)"},transition:{duration:.28,ease:[.2,.8,.2,1]},children:g.jsxs(HP,{children:[g.jsx(Vr,{path:"/",element:g.jsx(bV,{state:r,setState:i,onToast:o})}),g.jsx(Vr,{path:"/loc/:id",element:g.jsx(GV,{state:r,setState:i,onToast:o})}),g.jsx(Vr,{path:"/certificate",element:g.jsx(KO,{state:r,setState:i,onToast:o})}),g.jsx(Vr,{path:"/leaderboard",element:g.jsx(qO,{state:r,onToast:o})}),g.jsx(Vr,{path:"/admin/links",element:g.jsx(GO,{})}),g.jsx(Vr,{path:"*",element:g.jsx(zP,{to:"/",replace:!0})})]})},s)})}),e&&g.jsx(QO,{msg:e.msg,type:e.type,onClose:()=>n(null)},e.k)]})}const ej="/";vh.createRoot(document.getElementById("root")).render(g.jsx(__.StrictMode,{children:g.jsx(JP,{basename:ej,children:g.jsx(ZO,{})})}));
